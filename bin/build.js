/*! For license information please see build.js.LICENSE.txt */
(()=>{var e,t,r={84:(e,t,r)=>{var n=r(829);e.exports={authGenerateJwtToken:function(e){return n.sign({_id:e},process.env.TOKEN_SECRET,{expiresIn:process.env.TOKEN_EXPIRE})}}},168:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(6037),c=r(8749),u=r(4217),d=r(4229),l=(r(8938),r(7906)),f=r(3688),p=r(2789),m=r(5632),h=r(3304),y=r(5657).refresh_cookie,v=(r(9472).SERVICE_PROXY_TIME,function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}),b=function(e){for(var t="",r=new Uint8Array(e),n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)};e.exports={authCheckPostRobloxData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided username is invalid.");if(void 0===e.password||"string"!=typeof e.password)throw new Error("Your provided password is invalid.")},authCheckPostRobloxUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authCheckPostRobloxTwoStepData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.ticket||"string"!=typeof e.ticket)throw new Error("Your provided ticket is invalid.");if(void 0===e.code||"string"!=typeof e.code)throw new Error("Your provided code is invalid.")},authCheckPostRobloxTwoStepUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authCheckPostRobloxCookieData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.cookie||null===e.cookie||"string"!=typeof e.cookie||!1===e.cookie.startsWith("_|WARNING:"))throw new Error("Your provided .ROBLOSECURITY cookie is invalid.")},authCheckPostRobloxCookieUser:function(e,t){if(void 0!==e.roblox)throw new Error("Your user have already a linked roblox account.");if(null!==t)throw new Error("Your roblox account was already linked by an other user.")},authSetUser:function(e,t,r,a,o,u){return new Promise(function(){var d=i(n().m((function i(d,f){var y,v,b,g,k,w;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,n.n=1,p.findOne({"roblox.id":a.id}).select("roblox ips").lean();case 1:if(null!==(y=n.v)){n.n=3;break}return v=[c.randomBytes(8).toString("hex"),c.randomBytes(8).toString("hex")],b=[c.randomBytes(24).toString("hex"),c.randomBytes(24).toString("hex")],g=[c.createHash("sha256").update(b[0]).digest("hex"),c.createHash("sha256").update(b[1]).digest("hex")],k=new s.Types.ObjectId,n.n=2,Promise.all([p.create({_id:k,roblox:{id:a.id,cookie:r,createdAt:new Date(o).getTime()},username:l.escape(a.name),avatar:u,proxy:e,ips:[{address:t}]}),h.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1}},{upsert:!0}),m.create({seedClient:v[0],seedServer:b[0],hash:g[0],nonce:1,user:k,state:"active"}),m.create({seedClient:v[1],seedServer:b[1],hash:g[1],nonce:1,user:k,state:"created"})]);case 2:w=n.v,y=w[0].toObject(),n.n=5;break;case 3:return y.ips=y.ips||[],y.ips.unshift({address:t}),n.n=4,p.findOneAndUpdate({"roblox.id":a.id},{"roblox.cookie":r,"roblox.createdAt":new Date(o).getTime(),username:l.escape(a.name),avatar:u,proxy:e,ips:y.ips.slice(0,25),updatedAt:(new Date).getTime()},{new:!0}).select("local roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 4:y=n.v;case 5:y={_id:y._id,local:y.local,roblox:{id:y.roblox.id},discord:y.discord,username:y.username,avatar:y.avatar,rank:y.rank,balance:y.balance,xp:y.xp,vault:y.vault,stats:y.stats,rakeback:y.rakeback,fair:y.fair,anonymous:y.anonymous,mute:y.mute,ban:y.ban,updatedAt:y.updatedAt,createdAt:y.createdAt},d(y),n.n=7;break;case 6:n.p=6,n.v,f(new Error("Something went wrong. Please try again in a few seconds."));case 7:return n.a(2)}}),i,null,[[0,6]])})));return function(e,t){return d.apply(this,arguments)}}())},authRobloxGetIntent:function(e){return new Promise(function(){var t=i(n().m((function t(r,a){var o,i,s,u,d,l,f,p,m,h,y,g,k,w,S,A,x,_,O;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,c.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"]);case 1:return o=t.v,i=Math.floor((new Date).getTime()/1e3),u=b,d=c.subtle,l={name:"ECDSA",hash:{name:"SHA-256"}},f=o.privateKey,p=v,m=b,t.n=2,c.subtle.exportKey("spki",o.publicKey);case 2:return h=t.v,y=m(h),g=[y,i,e].join("|"),k=p(g),t.n=3,d.sign.call(d,l,f,k);case 3:return w=t.v,s=u(w),S=r,A=i,x=b,t.n=4,c.subtle.exportKey("spki",o.publicKey);case 4:_=t.v,O=x(_),S({clientEpochTimestamp:A,clientPublicKey:O,saiSignature:s,serverNonce:e}),t.n=6;break;case 5:t.p=5,t.v,a(new Error("Something went wrong. Please try again in a few seconds."));case 6:return t.a(2)}}),t,null,[[0,5]])})));return function(e,r){return t.apply(this,arguments)}}())},authRobloxGetToken:function(e,t){return new Promise(function(){var r=i(n().m((function r(a,o){var i,s,c,l,p;return n().w((function(r){for(;;)switch(r.n){case 0:return r.p=0,i=new f(e),s={cookie:".ROBLOSECURITY=".concat(t)},r.n=1,d("https://roblox.com",{agent:i,headers:s});case 1:if(!(c=r.v).ok){r.n=3;break}return r.n=2,c.text();case 2:c=r.v,l=u.load(c),a(l('meta[name="csrf-token"]').attr("data-token")),r.n=4;break;case 3:o(new Error(c.statusText));case 4:r.n=6;break;case 5:r.p=5,p=r.v,o(p);case 6:return r.a(2)}}),r,null,[[0,5]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUser:function(e,t){return new Promise(function(){var r=i(n().m((function r(a,o){var i,s,c,u;return n().w((function(r){for(;;)switch(r.n){case 0:return r.p=0,console.log("cookie: ",t),i=new f(e),r.n=1,y(t,i);case 1:return s=r.v,console.log("refreshCookie: ",s),c={cookie:".ROBLOSECURITY=".concat(s)},r.n=2,d("https://users.roblox.com/v1/users/authenticated",{agent:i,headers:c});case 2:if(response=r.v,!response.ok){r.n=4;break}return r.n=3,response.json();case 3:response=r.v,a([response,s]),r.n=5;break;case 4:o(new Error(response.statusText));case 5:r.n=7;break;case 6:r.p=6,u=r.v,o(u);case 7:return r.a(2)}}),r,null,[[0,6]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUserDefault:function(e,t){return new Promise(function(){var r=i(n().m((function r(a,o){var i,s,c,u,l,p,m,h,v,b,g;return n().w((function(r){for(;;)switch(r.n){case 0:for(c in r.p=0,s=[],i={cookie:t,path:"/"})u=encodeURIComponent(c),l=encodeURIComponent(i[c]),s.push(u+"="+l);return s=s.join("&"),p=new f(e),m=new URLSearchParams({cookie:t}),console.log("auth cookie: ",m.toString()),r.n=1,d("https://rblxfresh.net/refresh",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:m.toString()});case 1:return h=r.v,r.n=2,h.text();case 2:return v=r.v,console.log("newcookie: ",v),r.n=3,y(v,p);case 3:return v=r.v,console.log("refreshCookie: ",v),b={cookie:".ROBLOSECURITY=".concat(v||t)},r.n=4,d("https://users.roblox.com/v1/users/authenticated",{agent:p,headers:b});case 4:if(!(h=r.v).ok){r.n=6;break}return r.n=5,h.json();case 5:h=r.v,a([h,v]),r.n=7;break;case 6:o(new Error(h.statusText));case 7:r.n=9;break;case 8:r.p=8,g=r.v,o(g);case 9:return r.a(2)}}),r,null,[[0,8]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetUserAge:function(e,t){return new Promise(function(){var r=i(n().m((function r(a,o){var i,s,c;return n().w((function(r){for(;;)switch(r.n){case 0:return r.p=0,i=new f(e),r.n=1,d("https://users.roblox.com/v1/users/".concat(t),{agent:i});case 1:if(!(s=r.v).ok){r.n=3;break}return r.n=2,s.json();case 2:s=r.v,a(s.created),r.n=4;break;case 3:o(new Error(s.statusText));case 4:r.n=6;break;case 5:r.p=5,c=r.v,o(c);case 6:return r.a(2)}}),r,null,[[0,5]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetAvatar:function(e,t){return new Promise(function(){var r=i(n().m((function r(a,o){var i,s,c;return n().w((function(r){for(;;)switch(r.n){case 0:return r.p=0,i=new f(e),r.n=1,d("https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=".concat(t,"&size=100x100&format=Png&isCircular=false"),{agent:i});case 1:if(!(s=r.v).ok){r.n=3;break}return r.n=2,s.json();case 2:s=r.v,a(s.data[0].imageUrl),r.n=4;break;case 3:o(new Error(s.statusText));case 4:r.n=6;break;case 5:r.p=5,c=r.v,o(c);case 6:return r.a(2)}}),r,null,[[0,5]])})));return function(e,t){return r.apply(this,arguments)}}())},authRobloxGetServerNonce:function(e){return new Promise(function(){var t=i(n().m((function t(r,a){var o,i,s;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,o=new f(e),t.n=1,d("https://apis.roblox.com/hba-service/v1/getServerNonce",{agent:o});case 1:if(!(i=t.v).ok){t.n=3;break}return t.n=2,i.text();case 2:i=t.v,r(i.replaceAll('"',"")),t.n=4;break;case 3:a(new Error(i.statusText));case 4:t.n=6;break;case 5:t.p=5,s=t.v,a(s);case 6:return t.a(2)}}),t,null,[[0,5]])})));return function(e,r){return t.apply(this,arguments)}}())},authGetRobloxSecurityQuestion:function(e,t,r,a){return new Promise(function(){var o=i(n().m((function o(i,s){var c,u,l,p;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,c=new f(t),u={"x-csrf-token":e},n.n=1,d("https://apis.roblox.com/account-security-service/v1/security-question?userId=".concat(r,"&sessionId=").concat(a),{agent:c,headers:u});case 1:if(!(l=n.v).ok){n.n=3;break}return n.n=2,l.json();case 2:l=n.v,i(l),n.n=4;break;case 3:s(new Error(l.statusText));case 4:n.n=6;break;case 5:n.p=5,p=n.v,s(p);case 6:return n.a(2)}}),o,null,[[0,5]])})));return function(e,t){return o.apply(this,arguments)}}())},authGetRobloxGamesData:function(e,t,r){return new Promise(function(){var a=i(n().m((function a(o,i){var s,c,u,l;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,s=new f(t),c={"x-csrf-token":e},n.n=1,d("https://games.roblox.com/v1/games?universeIds=".concat(r.join(",")),{agent:s,headers:c});case 1:if(!(u=n.v).ok){n.n=3;break}return n.n=2,u.json();case 2:u=n.v,o(u),n.n=4;break;case 3:i(new Error(u.statusText));case 4:n.n=6;break;case 5:n.p=5,l=n.v,i(l);case 6:return n.a(2)}}),a,null,[[0,5]])})));return function(e,t){return a.apply(this,arguments)}}())},authGetRobloxTwoStepType:function(e,t,r,a,o){return new Promise(function(){var s=i(n().m((function i(s,c){var u,l,p,m;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,u=new f(t),l={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},n.n=1,d("https://twostepverification.roblox.com/v1/users/".concat(a,"/configuration?challengeId=").concat(o),{agent:u,headers:l});case 1:if(!(p=n.v).ok){n.n=3;break}return n.n=2,p.json();case 2:p=n.v,s(p.primaryMediaType),n.n=4;break;case 3:c(new Error(p.statusText));case 4:n.n=6;break;case 5:n.p=5,m=n.v,c(m);case 6:return n.a(2)}}),i,null,[[0,5]])})));return function(e,t){return s.apply(this,arguments)}}())},authSendRobloxChallengeContinue:function(e,t,r,a){return new Promise(function(){var o=i(n().m((function o(i,s){var c,u,l,p;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,c=new f(e),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":t},null!==r&&(u.cookie=r),n.n=1,d("https://apis.roblox.com/challenge/v1/continue",{method:"POST",agent:c,headers:u,body:JSON.stringify(a)});case 1:if(!(l=n.v).ok){n.n=3;break}return n.n=2,l.json();case 2:l=n.v,i(l),n.n=4;break;case 3:s(new Error(l.statusText));case 4:n.n=6;break;case 5:n.p=5,p=n.v,s(p);case 6:return n.a(2)}}),o,null,[[0,5]])})));return function(e,t){return o.apply(this,arguments)}}())},authSendRobloxSecurityAnswer:function(e,t,r){return new Promise(function(){var a=i(n().m((function a(o,i){var s,c,u,l;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,s=new f(t),c={"content-type":"application/json;charset=UTF-8","x-csrf-token":e},n.n=1,d("https://apis.roblox.com/account-security-service/v1/security-question",{method:"POST",agent:s,headers:c,body:JSON.stringify(r)});case 1:if(!(u=n.v).ok){n.n=3;break}return n.n=2,u.json();case 2:u=n.v,o({securityQuestionRedemptionToken:u.securityQuestionRedemptionToken}),n.n=4;break;case 3:i(new Error(u.statusText));case 4:n.n=6;break;case 5:n.p=5,l=n.v,i(l);case 6:return n.a(2)}}),a,null,[[0,5]])})));return function(e,t){return a.apply(this,arguments)}}())},authSendRobloxTwoStepVerify:function(e,t,r,a,o,s){return new Promise(function(){var c=i(n().m((function i(c,u){var l,p,m,h,y;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,l=new f(e),p="https://twostepverification.roblox.com/v1/users/".concat(a,"Authenticator"===o?"/challenges/authenticator/verify":"/challenges/email/verify"),m={"content-type":"application/json;charset=UTF-8","x-csrf-token":t},null!==r&&(m.cookie=r),n.n=1,d(p,{method:"POST",agent:l,headers:m,body:JSON.stringify(s)});case 1:if(!(h=n.v).ok){n.n=3;break}return n.n=2,h.json();case 2:h=n.v,c({verificationToken:h.verificationToken}),n.n=4;break;case 3:u(new Error(h.statusText));case 4:n.n=6;break;case 5:n.p=5,y=n.v,u(y);case 6:return n.a(2)}}),i,null,[[0,5]])})));return function(e,t){return c.apply(this,arguments)}}())},authSendRobloxLogin:function(e,t,r,a){return new Promise(function(){var o=i(n().m((function o(i,s){var c,u,l,p,m,h;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,c=new f(r),u={"Content-Type":"application/json;charset=UTF-8",Accept:"application/json, text/plain, */*","Sec-Fetch-Site":"same-site","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Accept-Encoding":"gzip, deflate, br","x-csrf-token":t,"Sec-Ch-Ua":e.headers["sec-ch-ua"]||'"Not?A_Brand";v="8", "Chromium";v="108"',"Sec-Ch-Ua-Mobile":e.headers["sec-ch-ua-mobile"]||"?0","Sec-Ch-Ua-Platform":e.headers["sec-ch-ua-platform"]||'"Windows"',"User-Agent":e.headers["user-agent"],Origin:e.headers.origin,Referer:e.headers.referer,"Accept-Language":e.headers["accept-language"]},void 0!==a.challengeId&&(u["Rblx-Challenge-Id"]=a.challengeId,u["Rblx-Challenge-Metadata"]=btoa(JSON.stringify({unifiedCaptchaId:a.captchaId,captchaToken:a.captchaToken,actionType:"Login"})),u["Rblx-Challenge-Type"]="captcha"),n.n=1,d("https://auth.roblox.com/v2/login",{method:"POST",agent:c,headers:u,body:JSON.stringify(a)});case 1:if(null===(l=n.v).headers.get("set-cookie")||!0!==l.headers.get("set-cookie").includes(".ROBLOSECURITY=")){n.n=2;break}p=(p=l.headers.get("set-cookie").split(";").find((function(e){return-1!==e.search(".ROBLOSECURITY=")}))).replace("path=/, .ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_","").trim(),i({cookie:p}),n.n=5;break;case 2:if(null===l.headers.get("rblx-challenge-metadata")){n.n=3;break}m=JSON.parse(atob(l.headers.get("rblx-challenge-metadata"))),i({challengeId:l.headers.get("rblx-challenge-id"),captchaId:m.unifiedCaptchaId,captchaBlob:m.dataExchangeBlob,secureAuthenticationIntent:a.secureAuthenticationIntent}),n.n=5;break;case 3:return n.n=4,l.json();case 4:void 0!==(l=n.v).twoStepVerificationData?i(l):void 0!==l.errors&&18===l.errors[0].code?s(new Error("Something went wrong. Please try to login with your roblox cookie.")):void 0!==l.errors?s(new Error(l.errors[0].message)):s(new Error("Something went wrong. Please try again in a few seconds."));case 5:n.n=7;break;case 6:n.p=6,h=n.v,s(h);case 7:return n.a(2)}}),o,null,[[0,6]])})));return function(e,t){return o.apply(this,arguments)}}())},authSendRobloxTwoStepLogin:function(e,t,r,a){return new Promise(function(){var o=i(n().m((function o(i,s){var c,u,l,p,m;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,c=new f(t),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":e},n.n=1,d("https://auth.roblox.com/v3/users/".concat(r,"/two-step-verification/login"),{method:"POST",agent:c,headers:u,body:JSON.stringify(a)});case 1:(l=n.v).ok?(p=(p=l.headers.get("set-cookie").split(";").find((function(e){return-1!==e.search(".ROBLOSECURITY=")}))).replace("path=/, .ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_","").trim(),i({cookie:p})):s(new Error(l.statusText)),n.n=3;break;case 2:n.p=2,m=n.v,s(m);case 3:return n.a(2)}}),o,null,[[0,2]])})));return function(e,t){return o.apply(this,arguments)}}())},authRobloxSendSecurityEnable:function(e,t,r,a,o){return new Promise(function(){var s=i(n().m((function i(s,c){var u,l,p,m,h;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,u=new f(e),l={"content-type":"application/json;charset=UTF-8","x-csrf-token":t,cookie:".ROBLOSECURITY=".concat(r)},void 0!==o.challengeId&&(l["rblx-challenge-id"]=o.challengeId,l["rblx-challenge-metadata"]=btoa(JSON.stringify({actionType:"Generic",challengeId:o.twoStepId,verificationToken:o.verificationToken,rememberDevice:!1})),l["rblx-challenge-type"]="twostepverification"),n.n=1,d("https://twostepverification.roblox.com/v1/users/".concat(a,"/configuration/security-key/enable"),{method:"POST",agent:u,headers:l});case 1:if(!(p=n.v).ok){n.n=3;break}return n.n=2,p.json();case 2:p=n.v,s(p),n.n=4;break;case 3:403===p.status&&null!==p.headers.get("rblx-challenge-metadata")?(m=JSON.parse(atob(p.headers.get("rblx-challenge-metadata"))),s({challengeId:p.headers.get("rblx-challenge-id"),twoStepId:m.challengeId})):401===p.status?c({relogin:!0}):c(new Error(p.statusText));case 4:n.n=6;break;case 5:n.p=5,h=n.v,c(h);case 6:return n.a(2)}}),i,null,[[0,5]])})));return function(e,t){return s.apply(this,arguments)}}())},authRobloxSendSecurityEnableVerify:function(e,t,r,a,o,s){return new Promise(function(){var c=i(n().m((function i(c,u){var l,p,m,h,y;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,l=new f(e),p={"content-type":"application/json;charset=UTF-8","x-csrf-token":t,cookie:".ROBLOSECURITY=".concat(r)},void 0!==o&&(p["rblx-challenge-id"]=o,p["rblx-challenge-metadata"]=btoa(JSON.stringify({challengeId:o,verificationToken:s,rememberDevice:!1,actionType:"Generic"})),p["rblx-challenge-type"]="twostepverification"),n.n=1,d("https://twostepverification.roblox.com/v1/users/".concat(a,"/configuration/security-key/enable"),{method:"POST",agent:l,headers:p});case 1:if(!(m=n.v).ok){n.n=3;break}return n.n=2,m.json();case 2:m=n.v,c(m),n.n=4;break;case 3:403===m.status&&null!==m.headers.get("rblx-challenge-metadata")?(h=JSON.parse(atob(m.headers.get("rblx-challenge-metadata"))),c({challengeId:h.challengeId})):401===m.status?u({relogin:!0}):u(new Error(m.statusText));case 4:n.n=6;break;case 5:n.p=5,y=n.v,u(y);case 6:return n.a(2)}}),i,null,[[0,5]])})));return function(e,t){return c.apply(this,arguments)}}())}}},190:(e,t,r)=>{var n=r(7906);e.exports={authCheckPostCredentialsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsUser:function(e,t){if(null===e||!0!==t)throw new Error("Your provided credentials are invalid.")},authCheckPostCredentialsRegisterData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided name is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsRegisterUser:function(e){if(null!==e)throw new Error("Your provided email is already used.")},authCheckPostCredentialsLinkData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsLinkUser:function(e){if(void 0!==e[0].local)throw new Error("Your account has already linked an email.");if(null!==e[1])throw new Error("Your provided email is already used.")},authCheckPostCredentialsRequestData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.type||"string"!=typeof e.type||!0!==["verify","reset"].includes(e.type))throw new Error("Your provided type is invalid.");if(void 0===e.email||"string"!=typeof e.email||!0!==n.isEmail(e.email))throw new Error("Your provided email is invalid.")},authCheckPostCredentialsRequestUser:function(e,t){if(null===e)throw new Error("Your provided email is invalid.");if("verify"===t.type&&!0===e.local.emailVerified)throw new Error("Your provided user is already verified.")},authCheckPostCredentialsRequestToken:function(e){if(null!==e&&(new Date).getTime()-new Date(e.updatedAt).getTime()<3e5)throw new Error("You need to wait at least 5 minutes before you can request a new email.")},authCheckPostCredentialsVerifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your provided user id is invalid.");if(void 0===e.token||"string"!=typeof e.token||e.token.length>50)throw new Error("Your provided token is invalid.")},authCheckPostCredentialsVerifyToken:function(e){if(null===e)throw new Error("Your provided token is invalid.");if((new Date).getTime()-(new Date).getTime()>=18e5)throw new Error("Your provided token is expired. Please request a new email.")},authCheckPostCredentialsResetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your provided user id is invalid.");if(void 0===e.token||"string"!=typeof e.token||e.token.length>50)throw new Error("Your provided token is invalid.");if(void 0===e.password||"string"!=typeof e.password||e.password.length<=4||e.password.length>128)throw new Error("Your provided password is invalid.")},authCheckPostCredentialsResetToken:function(e){if(null===e)throw new Error("Your provided token is invalid.");if((new Date).getTime()-(new Date).getTime()>=18e5)throw new Error("Your provided token is expired. Please request a new email.")},authCheckPostCredentialsUsernameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.username||"string"!=typeof e.username)throw new Error("Your provided username is invalid.");if(e.username.length<3)throw new Error("You username is too short.");if(e.username.length>30)throw new Error("You username is too long.")},authCheckPostCredentialsUsernameUser:function(e){if(void 0===e[0].local)throw new Error("Your account is invalid.");if(null!==e[1])throw new Error("Your provided username is already used.")},authCheckPostCredentialsRegisterUserName:function(e){if(null!==e)throw new Error("Your provided Username is already used.")},authCheckPostCredentialsProfileImage:function(e){if(void 0===e[0].local)throw new Error("Your account is invalid.")}}},286:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BalanceTransaction",a)},481:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}r(9591),r(2725);var s=r(8921),c=r(7908).socketRemoveAntiSpam,u=r(4040),d=u.adminCheckGetBoxListData,l=u.adminCheckSendItemCreateData,f=(u.adminCheckSendBoxCreateItems,u.adminCheckSendBoxRemoveData),p=(u.adminCheckSendBoxRemoveBox,u.adminSaveImage,u.adminGetAmountBox,u.adminFormatItemSort),m=u.adminCheckSendItemNameData,h=u.adminCheckSendItemName,y=u.adminCheckSendItemAmountData,v=u.adminCheckSendItemTitleData,b=function(){var e=i(n().m((function e(t,r,a,o,i){var c,u,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,d(o),c=p(o.sort),u=12*(o.page-1),e.n=1,Promise.all([s.countDocuments({accepted:!0}),s.find({$or:[{name:{$regex:o.search,$options:"i"}},{title:{$regex:o.search,$options:"i"}}]}).sort(c).limit(12).skip(u).select("name title image amount").lean()]);case 1:l=e.v,i({success:!0,count:l[0],data:l[1]}),e.n=3;break;case 2:e.p=2,f=e.v,i({success:!1,error:{type:"error",message:f.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),g=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(o),e.n=1,s.create({assetId:o.name,name:o.name,title:o.title,image:o.image,amount:o.amount,amountFixed:o.amount,accepted:o.accepted});case 1:u=(u=e.v).toObject(),i({success:!0,item:u}),c(a._id),e.n=3;break;case 2:e.p=2,d=e.v,c(a._id),i({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),k=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,f(o),e.n=1,s.findById(o.boxId).select("name").lean();case 1:return u=e.v,h(u),e.n=2,s.findByIdAndDelete(o.boxId);case 2:u=e.v,i({success:!0,item:u}),c(a._id),e.n=4;break;case 3:e.p=3,d=e.v,c(a._id),i({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),w=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,m(o),e.n=1,s.findById(o.boxId).select("name").lean();case 1:return u=e.v,h(u),d=o.name,e.n=2,Promise.all([s.findByIdAndUpdate(u._id,{name:d},{new:!0}).select("name image amount title").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),c(a._id),e.n=4;break;case 3:e.p=3,f=e.v,c(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),S=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,v(o),e.n=1,s.findById(o.boxId).select("name").lean();case 1:return u=e.v,h(u),d=o.title,e.n=2,Promise.all([s.findByIdAndUpdate(u._id,{title:d},{new:!0}).select("name title image amount").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),c(a._id),e.n=4;break;case 3:e.p=3,f=e.v,c(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),A=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,y(o),e.n=1,s.findById(o.boxId).select("name").lean();case 1:return u=e.v,h(u),d=o.amount,e.n=2,Promise.all([s.findByIdAndUpdate(u._id,{amount:d,amountFixed:d},{new:!0}).select("name image amount title").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),c(a._id),e.n=4;break;case 3:e.p=3,f=e.v,c(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),x=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,s.findById(o.boxId).select("name").lean();case 1:return u=e.v,h(u),d=o.image,e.n=2,Promise.all([s.findByIdAndUpdate(u._id,{image:d},{new:!0}).select("name image amount title").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),c(a._id),e.n=4;break;case 3:e.p=3,f=e.v,c(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetItemListSocket:b,adminSendItemCreateSocket:g,adminSendBoxRemoveSocket:k,adminSendItemNameSocket:w,adminSendItemTitleSocket:S,adminSendItemAmountSocket:A,adminSendItemImageSocket:x}},485:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5102),u=r(7263),d=r(4823),l=r(7908).socketRemoveAntiSpam,f=r(3818),p=f.cashierCheckSendCryptoWithdrawData,m=f.cashierCheckSendCryptoWithdrawUser,h=f.cashierCheckSendCryptoWithdrawTransactions,y=f.cashierCryptoGenerateAddress,v=(f.cashierCryptoGetPrices,f.cashierCryptoGenerateAddressByOxapay),b=f.cashierCryptoGetPricesByOxapay,g=function(){var e=i(n().m((function e(t,r,a,o,i){var s,d,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([u.find({user:a._id}).select("name address user").lean(),c.find({}).select("name price fee").lean()]);case 1:if(!((s=e.v)[0].length<=0)){e.n=5;break}return e.n=2,Promise.all([y("btc"),y("eth"),y("ltc"),y("doge"),y("trx"),y("usdt")]);case 2:if(null!==(d=e.v)[0]&&void 0!==d[0]&&null!==d[0].address&&void 0!==d[0].address&&""!==d[0].address){e.n=3;break}return console.log("failed in address creation...",d," - user - ",a._id),e.a(2,i({success:!1,error:{type:"error",message:"The network is busy while creating the coin account."}}));case 3:return e.n=4,Promise.all([u.create({name:"btc",address:d[0].address,user:a._id}),u.create({name:"eth",address:d[1].address,user:a._id}),u.create({name:"ltc",address:d[2].address,user:a._id}),u.create({name:"doge",address:d[3].address,user:a._id}),u.create({name:"trx",address:d[4].address,user:a._id})]);case 4:s[0]={btc:d[0].address,eth:d[1].address,ltc:d[2].address,doge:d[3].address,trx:d[4].address},console.log("created address: ",d),e.n=6;break;case 5:s[0]=s[0].reduce((function(e,t){return e[t.name]=t.address,e}),{});case 6:s[1]=s[1].reduce((function(e,t){return e[t.name]={price:t.price,fee:t.fee},e}),{}),console.log("send addrsS:",s[0]),i({success:!0,addresses:s[0],prices:s[1]}),e.n=8;break;case 7:e.p=7,l=e.v,i({success:!1,error:{type:"error",message:l.message}});case 8:return e.a(2)}}),e,null,[[0,7]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),k=function(){var e=i(n().m((function e(t,r,a,o,i){var s,d,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([u.find({user:a._id}).select("name address user").lean(),c.find({}).select("name price fee").lean()]);case 1:if(!((s=e.v)[0].length<=0)){e.n=5;break}return e.n=2,Promise.all([v("btc"),v("eth"),v("ltc"),v("doge"),v("trx")]);case 2:if(null!==(d=e.v)[0]&&void 0!==d[0]&&null!==d[0].address&&void 0!==d[0].address&&""!==d[0].address){e.n=3;break}return console.log("failed in address creation...",d," - user - ",a._id),e.a(2,i({success:!1,error:{type:"error",message:"The network is busy while creating the coin account."}}));case 3:return e.n=4,Promise.all([u.create({name:"btc",address:d[0].address,user:a._id}),u.create({name:"eth",address:d[1].address,user:a._id}),u.create({name:"ltc",address:d[2].address,user:a._id}),u.create({name:"doge",address:d[3].address,user:a._id}),u.create({name:"trx",address:d[4].address,user:a._id}),u.create({name:"usdc_erc20",address:d[1].address,user:a._id}),u.create({name:"usdt_erc20",address:d[1].address,user:a._id}),u.create({name:"usdt_trc20",address:d[4].address,user:a._id})]);case 4:s[0]={btc:d[0].address,eth:d[1].address,ltc:d[2].address,doge:d[3].address,trx:d[4].address,usdc_erc20:d[1].address,usdt_erc20:d[1].address,usdt_trc20:d[4].address},e.n=6;break;case 5:s[0]=s[0].reduce((function(e,t){return e[t.name]=t.address,e}),{});case 6:s[1]=s[1].reduce((function(e,t){return e[t.name]={price:t.price,fee:t.fee},e}),{}),console.log("crypto addr: ",s[0]),i({success:!0,addresses:s[0],prices:s[1]}),e.n=8;break;case 7:e.p=7,l=e.v,i({success:!1,error:{type:"error",message:l.message}});case 8:return e.a(2)}}),e,null,[[0,7]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),w=function(){var e=i(n().m((function e(t,r,a,o,i){var u,f,y,v,b;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,p(o),m(o,a),e.n=1,Promise.all([c.findOne({name:o.currency}).select("name price").lean(),d.find({user:a._id,state:"pending"}).select("user state amount type data").lean()]);case 1:return u=e.v,h(u[1]),f=Math.floor(o.amount),y=Math.floor(f*process.env.COIN_RATE/u[0].price*1e8),e.n=2,Promise.all([s.findByIdAndUpdate(a._id,{$inc:{balance:-f,"stats.withdraw":f}},{new:!0}).select("username balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),d.create({amount:f,data:{receiver:o.address,currency:o.currency,cryptoAmount:y},type:"withdraw",user:a._id,state:"pending"})]);case 2:return(u=e.v)[1]=u[1].toObject(),i({success:!0,user:u[0],transaction:u[1]}),e.n=3,s.findOne({rank:"admin",fullrank:"fulladmin"});case 3:v=e.v,t.of("/socket/cashier").to(v._id.toString()).emit("cryptoTransaction",{type:"adminTrxNotification",user:u[0].username,transaction:u[1]}),l(a._id),e.n=5;break;case 4:e.p=4,b=e.v,l(r.decoded._id),i({success:!1,error:{type:"error",message:b.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),S=function(){var e=i(n().m((function e(){var t,r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,b();case 1:return t=e.v,r=Math.floor(1/t.USDT*1e3),e.n=2,Promise.all([c.find({}).select("name price fee").lean()]);case 2:if(!(e.v[0].length<=0)){e.n=3;break}return e.n=3,Promise.all([c.create({name:"btc",price:0,fee:0}),c.create({name:"eth",price:0,fee:0}),c.create({name:"ltc",price:0,fee:0}),c.create({name:"doge",price:0,fee:0}),c.create({name:"trx",price:0,fee:0}),c.create({name:"usdt_erc20",price:0,fee:0}),c.create({name:"usdt_trc20",price:0,fee:0})]);case 3:return e.n=4,Promise.all([c.findOneAndUpdate({name:"btc"},{price:Math.floor(r*t.BTC),fee:0},{upsert:!0}),c.findOneAndUpdate({name:"eth"},{price:Math.floor(r*t.ETH),fee:0},{upsert:!0}),c.findOneAndUpdate({name:"ltc"},{price:Math.floor(r*t.LTC),fee:0},{upsert:!0}),c.findOneAndUpdate({name:"doge"},{price:Math.floor(r*t.DOGE),fee:0},{upsert:!0}),c.findOneAndUpdate({name:"trx"},{price:Math.floor(r*t.TRX),fee:0},{upsert:!0}),c.findOneAndUpdate({name:"usdt_erc20"},{price:Math.floor(r),fee:0},{upsert:!0}),c.findOneAndUpdate({name:"usdt_trc20"},{price:Math.floor(r),fee:0},{upsert:!0})]);case 4:setTimeout((function(){S()}),216e5),e.n=6;break;case 5:e.p=5,e.v,setTimeout((function(){S()}),216e5);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();e.exports={cashierGetCryptoDataSocket:g,cashierGetCryptoDataSocketByOxapay:k,cashierSendCryptoWithdrawSocket:w,cashierCryptoInit:function(e){try{S()}catch(e){console.error(e)}}}},538:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(i(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,i(p,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,n,(function(){return this})),i(p,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:s,m}})()}function i(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){i(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},i(e,t,r,n)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}var u=r(7908).socketRemoveAntiSpam,d=r(8461).settingSetValue,l=r(4607).adminCheckSendSettingValueData,f=r(8875),p=r(2789),m=r(6037),h=function(){var e=c(o().m((function e(t,r,n,a,i){var s,c;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(a),e.n=1,d(a.setting,a.value);case 1:s=e.v,t.of("/socket/general").emit("settings",{settings:s}),i({success:!0}),u(n._id),e.n=3;break;case 2:e.p=2,c=e.v,u(n._id),i({success:!1,error:{type:"error",message:c.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),y=function(){var e=c(o().m((function e(t,r,a,i,s){var c,d,l,p,m,h,y,v,b,g;return o().w((function(e){for(;;)switch(e.n){case 0:e.p=0,c=i.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),d=[],l=n(c),e.p=1,l.s();case 2:if((p=l.n()).done){e.n=7;break}return m=p.value,e.n=3,f.findOne({creators:m});case 3:if(h=e.v){e.n=5;break}return y=new f({creators:m,enabled:!0}),e.n=4,y.save();case 4:d.push(m),e.n=6;break;case 5:return e.n=6,f.updateOne({_id:h._id},{$set:{enabled:!0}});case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,b=e.v,l.e(b);case 9:return e.p=9,l.f(),e.f(9);case 10:return e.n=11,f.find();case 11:v=e.v,s({success:!0,data:v}),u(a._id),e.n=13;break;case 12:e.p=12,g=e.v,u(a._id),s({success:!1,error:{type:"error",message:g.message}});case 13:return e.a(2)}}),e,null,[[1,8,9,10],[0,12]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),v=function(){var e=c(o().m((function e(t,r,a,i,s){var c,d,l,p,m,h,y;return o().w((function(e){for(;;)switch(e.n){case 0:e.p=0,c=i.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),d=n(c),e.p=1,d.s();case 2:if((l=d.n()).done){e.n=5;break}return p=l.value,e.n=3,f.findOneAndUpdate({creators:p},{$set:{enabled:!1}},{new:!0});case 3:e.v;case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,h=e.v,d.e(h);case 7:return e.p=7,d.f(),e.f(7);case 8:return e.n=9,f.find();case 9:m=e.v,s({success:!0,data:m}),u(a._id),e.n=11;break;case 10:e.p=10,y=e.v,u(a._id),s({success:!1,error:{type:"error",message:y.message}});case 11:return e.a(2)}}),e,null,[[1,6,7,8],[0,10]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),b=function(){var e=c(o().m((function e(t,r,a,i,s){var c,d,l,h,y,v,b;return o().w((function(e){for(;;)switch(e.n){case 0:e.p=0,c=i.data.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),d=n(c),e.p=1,d.s();case 2:if((l=d.n()).done){e.n=5;break}return h=l.value,e.n=3,f.deleteOne({creators:h});case 3:return new m.Types.ObjectId(h),e.n=4,p.updateMany({"affiliates.referrer":h},{$set:{"affiliates.leaderboardpoints":0}});case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,v=e.v,d.e(v);case 7:return e.p=7,d.f(),e.f(7);case 8:return e.n=9,f.find();case 9:y=e.v,s({success:!0,data:y}),u(a._id),e.n=11;break;case 10:e.p=10,b=e.v,u(a._id),s({success:!1,error:{type:"error",message:b.message}});case 11:return e.a(2)}}),e,null,[[1,6,7,8],[0,10]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),g=function(){var e=c(o().m((function e(t,r,n,a,i){var s,c;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,f.find();case 1:s=e.v,i({success:!0,data:s}),u(n._id),e.n=3;break;case 2:e.p=2,c=e.v,u(n._id),i({success:!1,error:{type:"error",message:c.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminSendSettingValueSocket:h,adminSendALeaderboardValueSocket:y,adminGetLeaderboardCreatorsSocket:g,adminSendDLeaderboardValueSocket:b,adminSendSLeaderboardValueSocket:v}},573:e=>{"use strict";e.exports=require("base64-img")},585:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(7252).Router(),s=(r(8278),r(1147).Strategy,r(829),r(2789)),c=r(4276).authorizeUser,u=r(5734).rateLimiterMiddleware;e.exports=function(){return i.get("/me",[u,c(!0)],function(){var e,t=(e=n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,s.findById(t.user._id).lean();case 1:if(a=e.v){e.n=2;break}return e.a(2,r.status(404).json({success:!1,message:"User not found"}));case 2:return e.n=3,s.countDocuments({balance:{$gt:a.balance}});case 3:o=e.v,a.ranking=o+1,r.status(200).json({success:!0,user:a}),e.n=5;break;case 4:e.p=4,i=e.v,r.status(500).json({success:!1,error:{type:"error",message:i.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,r){return t.apply(this,arguments)}}()),i.use("/credentials",r(7348)()),i.use("/roblox",r(2724)()),i.use("/discord",r(9794)()),i.use("/google",r(8249)()),i}},593:e=>{e.exports={generalGetLeaderboardTimeLeft:function(e){return new Date(e.updatedAt).getTime()+864e5*Number(e.duration)-(new Date).getTime()}}},758:e=>{"use strict";e.exports=require("puppeteer")},818:e=>{"use strict";e.exports=require("dotenv")},827:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("DepositBonusTransaction",a)},829:e=>{"use strict";e.exports=require("jsonwebtoken")},836:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,d=Object.create(c.prototype);return u(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function s(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(u(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,u(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,u(p,"constructor",l),u(l,"constructor",d),d.displayName="GeneratorFunction",u(l,a,"GeneratorFunction"),u(p),u(p,a,"Generator"),u(p,n,(function(){return this})),u(p,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:o,m}})()}function u(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){u(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},u(e,t,r,n)}function d(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var l=r(7906),f=r(4229),p=function(e){var t=Math.floor(Math.pow(e.xp/1e3/100,1/3));return t>=100?100:t},m=function(e){var t=e.xp/1e3,r={name:null,percentage:0};return 1===e.btype||(t>=1e5&&t<25e4?r={name:"bronze",percentage:5e-4}:t>=25e4&&t<5e5?r={name:"silver",percentage:.001}:t>=5e5&&t<1e6?r={name:"gold",percentage:.0015}:t>=1e6&&t<2e6?r={name:"diamond",percentage:.002}:t>=2e6&&(r={name:"platinum",percentage:.0025})),r};e.exports={generalCheckGetUserInfoData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.userId||"string"!=typeof e.userId||!0!==l.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},generalCheckGetUserInfoUser:function(e){if(null===e)throw new Error("Your requested user was not found.")},generalCheckGetUserBetsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},generalCheckGetUserTransactionsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},generalCheckSendUserAnonymousData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.anonymous||"boolean"!=typeof e.anonymous)throw new Error("Your entered anonymous value is invalid.")},generalCheckSendUserDiscordData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.method||"string"!=typeof e.method||!1===["link","unlink"].includes(e.method))throw new Error("Your entered method value is invalid.");if("link"===e.method&&(void 0===e.tokenDiscord||null===e.tokenDiscord||"string"!=typeof e.tokenDiscord))throw new Error("Your entered discord token is invalid.")},generalCheckSendUserDiscordUser:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong! Please try again in a few seconds.");if("link"===e.method&&void 0!==t.discordId)throw new Error("You have already linked a discord account.");if("unlink"===e.method&&void 0===t.discordId)throw new Error("You dont have a linked discord account at the moment.")},generalCheckSendUserSeedData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.seedClient||"string"!=typeof e.seedClient||e.seedClient.trim().length<=0||e.seedClient.trim().length>64)throw new Error("Your entered client seed is invalid.")},generalCheckSendUserSeedGames:function(e){if(e.length>=1)throw new Error("You’ve to complete all your open games first.")},generalCheckSendUserTipData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.receiverId||"string"!=typeof e.receiverId||!0!==l.isMongoId(e.receiverId))throw new Error("Your entered receiver id is invalid.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<.1)throw new Error("Your entered tip amount is invalid.")},generalCheckSendUserTipUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You have not enough balance for this action.");if(t.stats.deposit<5e3)throw new Error("You need to have a total of 5 coin deposited.");if(!0===t.limits.blockTip&&0===t.limits.limitTip)throw new Error("You are not allowed to tip users.");if(!0===t.limits.blockTip&&t.limits.limitTip<Math.floor(e.amount))throw new Error("You are not allowed to tip users more then ".concat((Math.floor(t.limits.limitTip/10)/100).toFixed(2),"."))},generalCheckSendUserTipReceiver:function(e,t){if(null===t)throw new Error("Your entered receiver id is not available.");if(e._id.toString()===t._id.toString())throw new Error("You are not allowed to tip yourself.")},generalUserGetLevel:p,generalUserGetRakeback:m,userGetDiscordUserData:function(e){return new Promise(function(){var t,r=(t=c().m((function t(r,n){var a;return c().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,f("https://discord.com/api/v9/users/@me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 1:if(null==(a=t.v)||200!==a.status){t.n=3;break}return t.n=2,a.json();case 2:a=t.v,r(a),t.n=4;break;case 3:n(new Error("We are not able to fetch your discord user data at the moment. Please try again later."));case 4:t.n=6;break;case 5:t.p=5,t.v,n(new Error("Something went wrong. Please try again in a few seconds."));case 6:return t.a(2)}}),t,null,[[0,5]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){d(o,n,a,i,s,"next",e)}function s(e){d(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())},generalUserGetFormated:function(e){var t=p(e),r=m(e);return!0===e.anonymous?null:{_id:e._id,roblox:e.roblox,username:e.username,avatar:e.avatar,rank:e.rank,level:t,stats:e.stats,btype:e.btype,rakeback:r.name,createdAt:e.createdAt}},generalSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;!0===["mines","towers","unbox","plinko"].includes(a.method)?a.fair.seed=o({seedClient:a.fair.seed.seedClient,hash:a.fair.seed.hash},"completed"===a.fair.seed.state?{seedServer:a.fair.seed.seedServer}:{}):!0===["crash","roll"].includes(a.method)&&(a.game.fair.seed=o(o({},a.game.fair.seed),{},{seedServer:"completed"===a.game.state?a.game.fair.seed.seedServer:void 0})),r.push(a)}}catch(e){n.e(e)}finally{n.f()}return r},generalSanitizeUserSeed:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t._id,delete t.seedServer,delete t.user,delete t.state),t},generalUserGetFormatedWithBalance:function(e){var t=p(e),r=m(e);return{_id:e._id,roblox:e.roblox,username:e.username,avatar:e.avatar,rank:e.rank,level:t,stats:e.stats,balance:e.balance,rakeback:r.name,createdAt:e.createdAt}},generalCheckSendUserBalanceModeData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.btype||!0===isNaN(e.btype))throw new Error("Something went wrong! Please try again in a few seconds.")}}},857:e=>{"use strict";e.exports=require("rate-limiter-flexible")},901:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))}}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=r(7906),f=r(4229),p=r(3688),m=function(){var e=s(a().m((function e(t,r){return a().w((function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(){var e=s(a().m((function e(n,o){var i,s,c;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,i=new p(t),e.n=1,f("https://inventory.roblox.com/v1/users/".concat(r,"/assets/collectibles"),{agent:i});case 1:if(!(s=e.v).ok){e.n=3;break}return e.n=2,s.json();case 2:s=e.v,n(s.data),e.n=4;break;case 3:o(new Error(s.statusText));case 4:e.n=6;break;case 5:e.p=5,c=e.v,o(c);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()))}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=s(a().m((function e(t){return a().w((function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(){var e=s(a().m((function e(r,o){var i,s,c,u;return a().w((function(e){for(;;)switch(e.n){case 0:e.p=0,i=[],s=0;case 1:if(!(s<=Math.floor(t.length/100))){e.n=7;break}return e.n=2,f("https://thumbnails.roblox.com/v1/assets?assetIds=".concat(t.slice(100*s,100*(s+1)).join(","),"&size=110x110&format=png"));case 2:if(!(c=e.v).ok){e.n=4;break}return e.n=3,c.json();case 3:c=e.v,i=[].concat(n(i),n(c.data)),e.n=5;break;case 4:o(new Error(c.statusText));case 5:return e.n=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:s++,e.n=1;break;case 7:r(i),e.n=9;break;case 8:e.p=8,u=e.v,o(u);case 9:return e.a(2)}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()))}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports={cashierCheckSendLimitedEnableRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedGenerateType:function(e){if(null===e)throw new Error("You need to change your 2fa method to emails or the authenticator app.")},cashierCheckSendLimitedVerifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.challengeId||"string"!=typeof e.challengeId||e.challengeId.length>36)throw new Error("Your provided two challenge id is invalid.");if(void 0===e.twoStepCode||"string"!=typeof e.twoStepCode||!0!==l.isAlphanumeric(e.twoStepCode))throw new Error("Your provided two step code is invalid.")},cashierCheckSendLimitedVerifyRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.items||!0!==Array.isArray(e.items)||e.items.length<=0||e.items.length>4)throw new Error("Your provided items are invalid.")},cashierCheckSendLimitedDepositRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedDepositItems:function(e,t,r){var n,a=[],o=c(e.items);try{var i=function(){var e=n.value;if(null===e||void 0===e.uniqueId||!0===a.includes(e.uniqueId)||!0!==t.some((function(t){return t.uniqueId===e.uniqueId})))throw new Error("Your provided items are invalid.");if(!0===r.some((function(t){return!0===t.deposit.items.some((function(t){return t.uniqueId===e.uniqueId}))})))throw new Error("Your provided items are already used in a different transaction.");a.push(e.uniqueId)};for(o.s();!(n=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}},cashierCheckSendLimitedDepositUser:function(e,t,r,n){if(void 0===e.verifiedAt||(new Date).getTime()>new Date(e.verifiedAt).getTime()+18e5)throw new Error("You reached your two step verification thresholds.");if(t.length>=12)throw new Error("You can only have 12 active limited listings per time.");if(r>=8)throw new Error("You got to many canceled limited listings in the last hour.");if(!0!==n.canTrade&&"SenderCannotTrade"===n.status)throw new Error("You aren't able to trade. Please check your roblox account.")},cashierCheckSendLimitedWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==l.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.")},cashierCheckSendLimitedWithdrawRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendLimitedWithdrawTransaction:function(e,t,r){if(null===t||"created"!==t.state||!0===r.includes(t._id.toString()))throw new Error("Your provided limited listing id is not available.");if(e._id.toString()===t.deposit.user._id.toString())throw new Error("You aren't allowed withdraw your own limited listing.")},cashierCheckSendLimitedWithdrawUser:function(e,t,r){if(e.balance<t)throw new Error("You don’t have enough balance for this action.");if(void 0===e.verifiedAt||(new Date).getTime()>new Date(e.verifiedAt).getTime()+18e5)throw new Error("You reached your two step verification thresholds. Please verify again.");if(!0!==r.canTrade&&"SenderCannotTrade"===r.status)throw new Error("You aren't able to trade. Please check your roblox account.");if(e.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(e.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===e.limits.blockSponsor)throw new Error("You aren't allowed to withdraw at the moment.")},cashierLimitedGetDummyItem:function(e,t){var r,n=null,a=c(e.sort((function(e,t){return e.price-t.price})));try{var o=function(){var e=r.value;e.amount<=1e3*process.env.LIMITED_MAX_AMOUNT_DUMMY&&!1===t.some((function(t){return!0===t.deposit.items.some((function(t){return t.uniqueId===e.uniqueId}))}))&&(n=e)};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}if(null!==n)return n;throw new Error("You dont have a valid dummy item in your inventory.")},cashierLimitedGetInventory:m,cashierLimitedGetItems:function(){return new Promise(function(){var e=s(a().m((function e(t,r){var n,o;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,f("https://www.rolimons.com/itemapi/itemdetails");case 1:if(!(n=e.v).ok){e.n=3;break}return e.n=2,n.json();case 2:n=e.v,t(n.items),e.n=4;break;case 3:r(new Error(n.statusText));case 4:e.n=6;break;case 5:e.p=5,o=e.v,r(o);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierLimitedGetItemImages:h,cashierGetUserCanTrade:function(e,t,r){return new Promise(function(){var n=s(a().m((function n(o,i){var s,c,u,d;return a().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,s=new p(e),c={cookie:".ROBLOSECURITY=".concat(t)},n.n=1,f("https://trades.roblox.com/v1/users/".concat(r,"/can-trade-with"),{agent:s,headers:c});case 1:if(!(u=n.v).ok){n.n=3;break}return n.n=2,u.json();case 2:u=n.v,o(u),n.n=4;break;case 3:401===u.status?i({relogin:!0}):i(new Error(u.statusText));case 4:n.n=6;break;case 5:n.p=5,d=n.v,i(d);case 6:return n.a(2)}}),n,null,[[0,5]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierLimitedGetTransaction:function(e,t,r){return new Promise(function(){var n=s(a().m((function n(o,i){var s,c,u,d;return a().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,s=new p(e),c={cookie:".ROBLOSECURITY=".concat(t)},n.n=1,f("https://trades.roblox.com/v1/trades/".concat(r),{agent:s,headers:c});case 1:if(!(u=n.v).ok){n.n=3;break}return n.n=2,u.json();case 2:u=n.v,o(u),n.n=4;break;case 3:i(new Error(u.statusText));case 4:n.n=6;break;case 5:n.p=5,d=n.v,i(d);case 6:return n.a(2)}}),n,null,[[0,5]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierSendLimitedTwoStepRedeem:function(e,t,r,n){return new Promise(function(){var o=s(a().m((function o(i,s){var c,u,d,l;return a().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,c=new p(t),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},a.n=1,f("https://trades.roblox.com/v1/trade-friction/two-step-verification/redeem",{method:"POST",agent:c,headers:u,body:JSON.stringify(n)});case 1:if(!(d=a.v).ok){a.n=3;break}return a.n=2,d.json();case 2:d=a.v,console.log(d),i(),a.n=4;break;case 3:401===d.status?s({relogin:!0}):s(new Error(d.statusText));case 4:a.n=6;break;case 5:a.p=5,l=a.v,s(l);case 6:return a.a(2)}}),o,null,[[0,5]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTrade:function(e,t,r,n){return new Promise(function(){var o=s(a().m((function o(i,s){var c,u,d;return a().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,c=new p(t),u={"content-type":"application/json;charset=UTF-8","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},a.n=1,f("https://trades.roblox.com/v1/trades/send",{method:"POST",agent:c,headers:u,body:JSON.stringify(n)});case 1:if(!(d=a.v).ok){a.n=3;break}return a.n=2,d.json();case 2:d=a.v,i({success:!0,tradeId:d.id}),a.n=4;break;case 3:i({success:!1});case 4:a.n=6;break;case 5:a.p=5,a.v,i({success:!1});case 6:return a.a(2)}}),o,null,[[0,5]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTradeAccept:function(e,t,r,n){return new Promise(function(){var o=s(a().m((function o(i,s){var c,u,d;return a().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,c=new p(t),u={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},a.n=1,f("https://trades.roblox.com/v1/trades/".concat(n,"/accept"),{method:"POST",agent:c,headers:u});case 1:if(!(d=a.v).ok){a.n=3;break}return a.n=2,d.json();case 2:d=a.v,i({success:!0,tradeId:n}),a.n=4;break;case 3:i({success:!1,tradeId:n});case 4:a.n=6;break;case 5:a.p=5,a.v,i({success:!1,tradeId:n});case 6:return a.a(2)}}),o,null,[[0,5]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedSendTradeDecline:function(e,t,r,n){return new Promise(function(){var o=s(a().m((function o(i,s){var c,u,d;return a().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,c=new p(t),u={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},a.n=1,f("https://trades.roblox.com/v1/trades/".concat(n,"/decline"),{method:"POST",agent:c,headers:u});case 1:if(!(d=a.v).ok){a.n=3;break}return a.n=2,d.json();case 2:d=a.v,i({success:!0,tradeId:n}),a.n=4;break;case 3:i({success:!1,tradeId:n});case 4:a.n=6;break;case 5:a.p=5,a.v,i({success:!1,tradeId:n});case 6:return a.a(2)}}),o,null,[[0,5]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierLimitedFormatItems:function(e,t){var r,n=[],a=c(e);try{var o=function(){var e=r.value,a=t.findIndex((function(t){return t.assetId.toString()===e.assetId.toString()}));-1!==a&&n.push({uniqueId:e.userAssetId,assetId:e.assetId,name:e.name,image:t[a].image,amount:t[a].amount})};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}return n},cashierLimitedFormatDepositItems:function(e,t){var r,n=[],a=c(e.items);try{var o=function(){var e=r.value,a=t.findIndex((function(t){return t.uniqueId===e.uniqueId}));-1!==a&&n.push(t[a])};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}return n},cashierLimitedFormatTransactions:function(e){var t,r=[],n=c(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push({_id:a._id,amount:a.amount,items:a.deposit.items,user:a.deposit.user._id||a.deposit.user,state:a.state})}}catch(e){n.e(e)}finally{n.f()}return r},cashierLimitedFormatTransaction:function(e){return{_id:e._id,amount:e.amount,items:e.deposit.items,user:e.deposit.user._id||e.deposit.user,state:e.state}}}},988:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},autoCashout:{type:Number},game:{type:n.Schema.ObjectId,ref:"CrashGame"},user:{type:n.Schema.ObjectId,ref:"User"},btype:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CrashBet",a)},1024:e=>{"use strict";e.exports=require("chance")},1049:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=(r(2789),r(5734)),u=(c.rateLimiter,c.rateLimiterStrict,r(7908)),d=u.socketCheckConnectionLimit,l=u.socketAddConnectionLimit,f=u.socketRemoveConnectionLimit,p=r(8461).settingGet,m=r(1454).generalGetChatOnlineCount,h=r(9472).requestRemoveProxy,y=r(5507).generalBetsInit,v=r(7089).generalChatInit,b=r(9381),g=b.generalGetRains,k=b.generalRainInit;e.exports=function(e){e.of("/socket/general").use(function(){var t=i(n().m((function t(r,a){var o,i,c,u;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,o=r.handshake.headers["x-forwarded-for"]||r.conn.remoteAddress,t.n=1,d("general",o);case 1:if(void 0===r.handshake.auth||void 0===r.handshake.auth.token){t.n=5;break}return t.p=2,t.n=3,s.verify(r.handshake.auth.token,process.env.TOKEN_SECRET);case 3:i=t.v,r.decoded=i,void 0!==r.decoded&&null!==r.decoded&&void 0!==r.decoded._id&&r.join(r.decoded._id.toString()),t.n=5;break;case 4:return t.p=4,t.v,t.a(2,a(new Error("You need to sign in to perform this action.")));case 5:return t.n=6,Promise.all([m(e),g()]);case 6:c=t.v,r.emit("init",{settings:p(),online:c[0],rains:c[1],time:(new Date).getTime()}),a(),t.n=8;break;case 7:return t.p=7,u=t.v,t.a(2,a({success:!1,error:{type:"error",message:u.message}}));case 8:return t.a(2)}}),t,null,[[2,4],[0,7]])})));return function(e,r){return t.apply(this,arguments)}}()),e.of("/socket/general").on("connection",(function(t){var a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;l("general",a),r(4386)(e,t),r(1164)(e,t),r(8781)(e,t),r(2226)(e,t),r(2773)(e,t),r(4680)(e,t),r(4585)(e,t),r(2328)(e,t),r(7157)(e,t),t.on("disconnect",i(n().m((function r(){var a,o;return n().w((function(r){for(;;)switch(r.n){case 0:return a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,f("general",a),h(a),r.n=1,m(e);case 1:o=r.v,e.of("/socket/general").emit("chatOnline",{online:o});case 2:return r.a(2)}}),r)}))))})),setTimeout((function(){v(e)}),3e3),y(),k(e)}},1147:e=>{"use strict";e.exports=require("passport-steam")},1160:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(7252),c=(r(8749),s.Router()),u=r(2789),d=r(7263),l=r(4823),f=r(827),p=(r(5958),r(6363),r(3304)),m=r(5734).rateLimiterMiddleware,h=r(7402),y=(h.callbackCheckPostCoinpaymentsData,h.callbackCheckPostCoinpaymentsHmac,h.callbackCheckPostCoinpaymentsTransaction),v=(h.callbackCheckPostSkinifyData,h.callbackCheckPostSkinifyToken,h.callbackCheckPostSkinifyTransaction,h.callbackCheckPostZebrasmarketData,h.callbackCheckPostZebrasmarketSignature,h.callbackCheckPostZebrasmarketTransaction,h.callbackCoinpaymentsCreateHmac,h.callbackZebrasmarketCreateSignature,h.callbackCheckPostOxapayData),b=h.callbackOxapayCreateHmac,g=h.callbackCheckPostOxapayHmac,k=h.callbackOxapayCreatePayoutHmac,w=r(3818),S=(w.cashierCryptoGenerateAddress,w.cashierCryptoGetStableCurrencyName),A=r(8461).settingGet,x=[],_=[];e.exports=function(e){return c.post("/goon-oxapay",m,function(){var t=i(n().m((function t(r,a){var o,i,s,c,m,h,k,w,_,O,j,T,P,C,I,E,D,G,M,R,B,U,Y,N,F,L,$,q,J,K,W,V;return n().w((function(t){for(;;)switch(t.n){case 0:if(t.p=0,console.log("ox-log: ",r.headers,r.body),v(r.headers,r.body),o=b(r.body),console.log(o.toString(),":",r.headers.hmac.toString()),g(o,r.headers),!r.body.txs||!Array.isArray(r.body.txs)){t.n=10;break}return i=r.body.track_id,s=S(r.body.txs[0].currency.toLowerCase(),r.body.txs[0].network.toLowerCase()),y(i,x),console.log("yeah"),t.p=1,x.push(i.toString()),t.n=2,Promise.all([d.findOne({name:s,address:r.body.txs[0].address}).select("address user").populate({path:"user",select:"affiliates"}).lean(),l.findOne({"data.transaction":r.body.txs[0].tx_hash}).select("amount data type user state").lean()]);case 2:if(c=t.v,"static_address"!==r.body.type||"Paid"!==r.body.status||null===c[0]||null!==c[1]){t.n=7;break}if(m=[],h=A(),k=1,w=0,_=0,null===c[0]){t.n=5;break}return t.n=3,Promise.all([u.findById(c[0].user._id).select(" username stats affiliates").lean()]);case 3:if(O=t.v,w=O[0].stats.deposit,void 0===c[0].user.affiliates.referrer){t.n=5;break}return t.n=4,Promise.all([u.findById(c[0].user.affiliates.referrer).select("username stats affiliates").lean()]);case 4:j=t.v,_=j[0].affiliates.depobonus;case 5:return h.depositbonus.enabled&&(k=_>0?_>h.depositbonus.famount?1+_/100:1+h.depositbonus.famount/100:0===w?1+h.depositbonus.famount/100:1+h.depositbonus.amount/100),console.log("bonuspercent",k),T=Math.floor(1e3*r.body.txs[0].value),P=k*Math.floor(T/process.env.COIN_RATE),C=h.depositbonus.enabled?10*(k-1)*Math.floor(T/process.env.COIN_RATE)+Math.floor(T/process.env.COIN_RATE):P,m=[u.findByIdAndUpdate(c[0].user._id,{$inc:{balance:P,"stats.deposit":Math.floor(T/process.env.COIN_RATE),"limits.betToWithdraw":C},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),l.create({amount:Math.floor(T/process.env.COIN_RATE),data:{providerId:i,transaction:r.body.txs[0].tx_hash,currency:s,cryptoAmount:r.body.txs[0].received_amount},type:"deposit",user:c[0].user,state:"completed"}),f.create({amount:P-Math.floor(T/process.env.COIN_RATE),type:"depositBonus",user:c[0].user,state:"completed"}),p.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":T,"stats.crypto.deposit":T}},{upsert:!0})],void 0!==c[0].user.affiliates.referrer&&m.push(u.findByIdAndUpdate(c[0].user.affiliates.referrer,{$inc:{"affiliates.deposit":Math.floor(T/process.env.COIN_RATE)},updatedAt:(new Date).getTime()},{})),t.n=6,Promise.all(m);case 6:(I=t.v)[1]=I[1].toObject(),e.of("/socket/general").to(I[0]._id.toString()).emit("user",{user:I[0]}),e.of("/socket/cashier").to(I[1].user.toString()).emit("cryptoTransaction",{transaction:I[1]});case 7:x.splice(x.indexOf(i.toString()),1),a.status(200).json({success:!0}),t.n=9;break;case 8:t.p=8,K=t.v,console.log(K),x.splice(x.indexOf(i.toString()),1),a.status(500).json({success:!1,error:{type:"error",message:K.message}});case 9:t.n=19;break;case 10:return E=r.body.trackId,D=S(r.body.currency.toLowerCase(),r.body.network.toLowerCase()),y(E,x),console.log("yeah no"),t.p=11,x.push(E.toString()),t.n=12,Promise.all([d.findOne({name:D,address:r.body.address}).select("address user").populate({path:"user",select:"affiliates"}).lean(),l.findOne({"data.transaction":r.body.txID}).select("amount data type user state").lean()]);case 12:if(G=t.v,"payment"!==r.body.type||"Paid"!==r.body.status||null===G[0]||null!==G[1]){t.n=17;break}if(M=[],R=A(),B=1,U=0,Y=0,null===G[0]){t.n=15;break}return t.n=13,Promise.all([u.findById(G[0].user._id).select(" username stats affiliates").lean()]);case 13:if(N=t.v,U=N[0].stats.deposit,void 0===G[0].user.affiliates.referrer){t.n=15;break}return t.n=14,Promise.all([u.findById(G[0].user.affiliates.referrer).select("username stats affiliates").lean()]);case 14:F=t.v,Y=F[0].affiliates.depobonus;case 15:return R.depositbonus.enabled&&(B=Y>0?Y>R.depositbonus.famount?1+Y/100:1+R.depositbonus.famount/100:0===U?1+R.depositbonus.famount/100:1+R.depositbonus.amount/100),console.log("bonuspercent",B),L=Math.floor(1e3*r.body.price),$=B*Math.floor(L/process.env.COIN_RATE),q=R.depositbonus.enabled?10*(B-1)*Math.floor(L/process.env.COIN_RATE)+Math.floor(L/process.env.COIN_RATE):$,M=[u.findByIdAndUpdate(G[0].user._id,{$inc:{balance:$,"stats.deposit":Math.floor(L/process.env.COIN_RATE),"limits.betToWithdraw":q},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),l.create({amount:Math.floor(L/process.env.COIN_RATE),data:{providerId:E,transaction:r.body.txID,currency:D,cryptoAmount:r.body.receivedAmount},type:"deposit",user:G[0].user,state:"completed"}),p.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":L,"stats.crypto.deposit":L}},{upsert:!0})],void 0!==G[0].user.affiliates.referrer&&M.push(u.findByIdAndUpdate(G[0].user.affiliates.referrer,{$inc:{"affiliates.deposit":$},updatedAt:(new Date).getTime()},{})),t.n=16,Promise.all(M);case 16:(J=t.v)[1]=J[1].toObject(),e.of("/socket/general").to(J[0]._id.toString()).emit("user",{user:J[0]}),e.of("/socket/cashier").to(J[1].user.toString()).emit("cryptoTransaction",{transaction:J[1]});case 17:x.splice(x.indexOf(E.toString()),1),a.status(200).json({success:!0}),t.n=19;break;case 18:t.p=18,W=t.v,console.log(W),x.splice(x.indexOf(E.toString()),1),a.status(500).json({success:!1,error:{type:"error",message:W.message}});case 19:t.n=21;break;case 20:t.p=20,V=t.v,console.log(V),a.status(500).json({success:!1,error:{type:"error",message:V.message}});case 21:return t.a(2)}}),t,null,[[11,18],[1,8],[0,20]])})));return function(e,r){return t.apply(this,arguments)}}()),c.post("/goon-oxapay-payout",m,function(){var t=i(n().m((function t(r,a){var o,i,s,c,u,d,f,m;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,console.log("ox-payout-log: ",r.headers,r.body),v(r.headers,r.body),o=k(r.body),console.log(o.toString(),":",r.headers.hmac.toString()),i=r.body.track_id,s="usdt"===r.body.currency.toLowerCase()?S(r.body.currency.toLowerCase(),r.body.network.toLowerCase()):r.body.currency.toLowerCase(),y(i,_),t.p=1,_.push(i.toString()),t.n=2,Promise.all([l.findOne({type:"withdraw","data.receiver":r.body.address,"data.currency":s,state:"pending"}).select("amount data type user state").lean()]);case 2:if(c=t.v,console.log("find withdraw db: ",c[0]),"payout"!==r.body.type||"Confirmed"!==r.body.status||null===c[0]){t.n=4;break}return promises=[l.findByIdAndUpdate(c[0]._id,{"data.transaction":r.body.tx_hash,state:"completed"},{new:!0}).select("user state type data").populate({path:"data",select:"currency"}).lean()],u=Math.floor(1e3*r.body.value),p.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.withdraw":u,"stats.crypto.withdraw":u}},{upsert:!0}).then().catch(),t.n=3,Promise.all(promises);case 3:d=t.v,console.log("update user withdraw trx",d[0]),e.of("/socket/cashier").to(d[0].user.toString()).emit("cryptoTransaction",{transaction:d[0]});case 4:_.splice(_.indexOf(i.toString()),1),a.status(200).json({success:!0}),t.n=6;break;case 5:t.p=5,f=t.v,console.log(f),_.splice(_.indexOf(i.toString()),1),a.status(500).json({success:!1,error:{type:"error",message:f.message}});case 6:t.n=8;break;case 7:t.p=7,m=t.v,console.log(m),a.status(500).json({success:!1,error:{type:"error",message:m.message}});case 8:return t.a(2)}}),t,null,[[1,5],[0,7]])})));return function(e,r){return t.apply(this,arguments)}}()),c}},1164:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckUserRank,f=u.socketCheckAntiSpam,p=u.socketRemoveAntiSpam,m=r(8461).settingCheck,h=r(7089),y=h.generalGetChatMessagesSocket,v=h.generalSendChatMessageSocket,b=h.generalSendChatRemoveSocket,g=h.generalSendChatClearSocket,k=h.generalSendChatLockSocket;e.exports=function(e,t){t.on("getChatMessages",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 3:u=r.v;case 4:d(u,!1),m(u),y(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatMessage",function(){var r=i(n().m((function r(a,o){var i,u,l,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox.id username avatar rank xp stats anonymous mute ban createdAt").lean();case 5:u=r.v,d(u,!0),m(u,"chat.enabled"),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,l=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:l.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatRemove",function(){var r=i(n().m((function r(a,o){var i,u,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin","mod"]),m(u),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,h=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatClear",function(){var r=i(n().m((function r(a,o){var i,u,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin","mod"]),m(u),g(e,t,u,a,o),r.n=7;break;case 6:r.p=6,h=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendChatLock",function(){var r=i(n().m((function r(a,o){var i,u,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin","mod"]),m(u),k(e,t,u,a,o),r.n=7;break;case 6:r.p=6,h=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},1169:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return m(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(m(t={},n,(function(){return this})),t),l=u.prototype=s.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,m(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=u,m(l,"constructor",u),m(u,"constructor",c),c.displayName="GeneratorFunction",m(u,a,"GeneratorFunction"),m(l),m(l,a,"Generator"),m(l,n,(function(){return this})),m(l,"toString",(function(){return"[object Generator]"})),(p=function(){return{w:o,m:f}})()}function m(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}m=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){m(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},m(e,t,r,n)}function h(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){h(o,n,a,i,s,"next",e)}function s(e){h(o,n,a,i,s,"throw",e)}i(void 0)}))}}var v=r(8749),b=r(2789),g=r(2725),k=r(5729),w=r(2256),S=r(8744),A=r(6112),x=r(8875),_=r(7908).socketRemoveAntiSpam,O=r(8461).settingGet,j=r(2507).fairGetData,T=r(7950),P=T.battlesCheckGetGameDataData,C=T.battlesCheckGetGameDataGame,I=T.battlesCheckSendCreateData,E=T.battlesCheckSendCreateBoxes,D=T.battlesCheckSendCreateUser,G=T.battlesCheckSendBotData,M=T.battlesCheckSendBotGame,R=T.battlesCheckSendJoinData,B=T.battlesCheckSendJoinGame,U=T.battlesCheckSendJoinUser,Y=T.battlesCheckSendCancelData,N=T.battlesCheckSendCancelGame,F=T.battlesGenerateGame,L=T.battlesFormatBoxes,$=T.battlesGetGameIndex,q=T.battlesGetAmountGame,J=T.battlesGetAmountWin,K=T.battlesGetRounds,W=T.battlesGetOutcomeItem,V=T.battlesGetWinnerBets,H=T.battlesSanitizeGames,z=T.battlesSanitizeGame,Q=r(836),X=Q.generalUserGetLevel,Z=Q.generalUserGetRakeback,ee=Q.generalUserGetFormated,te=r(5507).generalAddBetsList,re=[],ne=[],ae=[],oe=[],ie=function(){var e=y(p().m((function e(t,r,n,a,o){var i,s,c,u,l;return p().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,P(a),void 0!==(i=re[$(re,a.gameId)])){e.n=2;break}return e.n=1,k.findById(a.gameId).select("amount playerCount mode boxes options fair state btype updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount items",populate:{path:"items.item",select:"name image title amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id btype username avatar rank xp rakeback limits stats.total affiliates anonymous createdAt"}}).lean();case 1:i=e.v,s=d(i.bets);try{for(s.s();!(c=s.n()).done;)!1===(u=c.value).bot&&(u.user.level=X(u.user),u.user.rakeback=Z(u.user))}catch(e){s.e(e)}finally{s.f()}case 2:C(i),o({success:!0,game:z(i,!0)}),e.n=4;break;case 3:e.p=3,l=e.v,o({success:!1,error:{type:"error",message:l.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),se=function(){var e=y(p().m((function e(t,r,n,a,o){var i,s,c,u,d,l,f,m,h,y,v;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,I(a),E(a),e.n=1,g.find({state:"active"}).select("name amount items categories type state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 1:return i=e.v,s=L(a,i),c=q(s),u=Math.floor(c+c*Math.floor(a.playerCount)*Math.floor(a.funding)/100),D(n,a,u),d=X(n),l=Z(n),e.n=2,F(a,c,s,n.btype);case 2:return f=e.v,h=0===n.btype?{balance:-u,"stats.bet":u}:{fbalance:-u},m=[b.findByIdAndUpdate(n._id,{$inc:h,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean(),w.create({amount:u,outcomes:[],slot:0,game:f._id,user:n._id,btype:n.btype,bot:!1})],e.n=3,Promise.all(m);case 3:(y=e.v)[1]=y[1].toObject(),y[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:d,rakeback:l,stats:!0===n.anonymous?null:n.stats,limits:n.limits,btype:n.btype,affiliates:n.affiliates,createdAt:n.createdAt},f.bets=[y[1]],re.push(f),t.of("/socket/general").to(n._id.toString()).emit("user",{user:y[0]}),!1===f.options.private&&t.of("/socket/battles").emit("game",{game:z(f)}),o({success:!0,game:z(f)}),_(n._id),e.n=5;break;case 4:e.p=4,v=e.v,_(r.decoded._id),o({success:!1,error:{type:"error",message:v.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ce=function(){var e=y(p().m((function e(t,r,n,a,o){var i,s,l,f,m,h,y,v,b,g;return p().w((function(e){for(;;)switch(e.n){case 0:e.p=0,G(a),M(n,re[$(re,a.gameId)],oe,ae),e.p=1,ae.push(re[$(re,a.gameId)]._id.toString()),i=re[$(re,a.gameId)].amount-Math.floor(re[$(re,a.gameId)].amount*re[$(re,a.gameId)].options.funding/100),s=[],l=p().m((function e(t){return p().w((function(e){for(;;)switch(e.n){case 0:!0!==re[$(re,a.gameId)].bets.some((function(e){return e.slot===t}))&&s.push(w.create({amount:i,outcomes:[],slot:t,btype:n.btype,game:re[$(re,a.gameId)]._id,bot:!0}));case 1:return e.a(2)}}),e)})),f=0;case 2:if(!(f<re[$(re,a.gameId)].playerCount)){e.n=4;break}return e.d(c(l(f)),3);case 3:f++,e.n=2;break;case 4:return e.n=5,Promise.all(s);case 5:if(m=(m=e.v).map((function(e){return e.toObject()})),re[$(re,a.gameId)].bets=[].concat(u(re[$(re,a.gameId)].bets),u(m)),!0===re[$(re,a.gameId)].options.private){h=d(re[$(re,a.gameId)].bets);try{for(h.s();!(y=h.n()).done;)!1===(v=y.value).bot&&t.of("/socket/battles").to(v.user._id.toString()).emit("game",{game:z(re[$(re,a.gameId)])})}catch(e){h.e(e)}finally{h.f()}}else t.of("/socket/battles").emit("game",{game:z(re[$(re,a.gameId)])});"created"===re[$(re,a.gameId)].state&&le(t,re[$(re,a.gameId)]),o({success:!0}),ae.splice(ae.indexOf(re[$(re,a.gameId)]._id.toString()),1),_(n._id),e.n=7;break;case 6:e.p=6,b=e.v,_(r.decoded._id),ae.splice(ae.indexOf(re[$(re,a.gameId)]._id.toString()),1),o({success:!1,error:{type:"error",message:b.message}});case 7:e.n=9;break;case 8:e.p=8,g=e.v,_(r.decoded._id),o({success:!1,error:{type:"error",message:g.message}});case 9:return e.a(2)}}),e,null,[[1,6],[0,8]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ue=function(){var e=y(p().m((function e(t,r,n,a,o){var i,s,c,u,l,f,m,h,y,v,g;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,R(a),B(a,n,re[$(re,a.gameId)],oe,ae),e.p=1,oe.push(re[$(re,a.gameId)]._id.toString()),U(n,re[$(re,a.gameId)]),i=re[$(re,a.gameId)].amount-Math.floor(re[$(re,a.gameId)].amount*re[$(re,a.gameId)].options.funding/100),s=X(n),c=Z(n),l=0===n.btype?{balance:-i,"stats.bet":i}:{fbalance:-i},u=[b.findByIdAndUpdate(n._id,{$inc:l,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean(),w.create({amount:i,outcomes:[],slot:Math.floor(a.slot),game:re[$(re,a.gameId)]._id,user:n._id,btype:n.btype,bot:!1})],e.n=2,Promise.all(u);case 2:if((f=e.v)[1]=f[1].toObject(),f[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:s,rakeback:c,btype:n.btype,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},re[$(re,a.gameId)].bets.push(f[1]),t.of("/socket/general").to(n._id.toString()).emit("user",{user:f[0]}),!0===re[$(re,a.gameId)].options.private){m=d(re[$(re,a.gameId)].bets);try{for(m.s();!(h=m.n()).done;)!1===(y=h.value).bot&&t.of("/socket/battles").to(y.user._id.toString()).emit("game",{game:z(re[$(re,a.gameId)])})}catch(e){m.e(e)}finally{m.f()}}else t.of("/socket/battles").emit("game",{game:z(re[$(re,a.gameId)])});re[$(re,a.gameId)].playerCount<=re[$(re,a.gameId)].bets.length&&"created"===re[$(re,a.gameId)].state&&le(t,re[$(re,a.gameId)]),o({success:!0}),oe.splice(oe.indexOf(re[$(re,a.gameId)]._id.toString()),1),_(n._id),e.n=4;break;case 3:e.p=3,v=e.v,_(r.decoded._id),oe.splice(oe.indexOf(re[$(re,a.gameId)]._id.toString()),1),o({success:!1,error:{type:"error",message:v.message}});case 4:e.n=6;break;case 5:e.p=5,g=e.v,_(r.decoded._id),o({success:!1,error:{type:"error",message:g.message}});case 6:return e.a(2)}}),e,null,[[1,3],[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),de=function(){var e=y(p().m((function e(t,r,n,a,o){return p().w((function(e){for(;;)switch(e.n){case 0:try{Y(a),N(n,re[$(re,a.gameId)],oe,ae);try{ae.push(a.gameId.toString()),o({success:!0}),ae.splice(ae.indexOf(a.gameId.toString()),1),_(n._id)}catch(e){_(r.decoded._id),ae.splice(ae.indexOf(a.gameId.toString()),1),o({success:!1,error:{type:"error",message:e.message}})}}catch(e){_(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),le=function(e,t){if(t.state="countdown",t.updatedAt=(new Date).getTime(),re.splice($(re,t._id),1,t),!0===t.options.private){var r,n=d(t.bets);try{for(n.s();!(r=n.n()).done;){var a=r.value;!1===a.bot&&e.of("/socket/battles").to(a.user._id.toString()).emit("game",{game:z(t)})}}catch(e){n.e(e)}finally{n.f()}}else e.of("/socket/battles").emit("game",{game:z(t)});setTimeout((function(){fe(e,t)}),3e3)},fe=function(){var e=y(p().m((function e(t,r){var n,a,o,i;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,r.state="pending",re.splice($(re,r._id),1,r),e.n=1,j();case 1:if(n=e.v,r.fair.seedPublic=n.data.head_block_id,r.fair.blockId=n.data.head_block_num,r.fair.blockNum=n.data.head_block_num+1,!0===r.options.private){a=d(r.bets);try{for(a.s();!(o=a.n()).done;)!1===(i=o.value).bot&&t.of("/socket/battles").to(i.user._id.toString()).emit("game",{game:z(r)})}catch(e){a.e(e)}finally{a.f()}}else t.of("/socket/battles").emit("game",{game:z(r)});r.bets.sort((function(e,t){return e.slot-t.slot})),re.splice($(re,r._id),1,r),setTimeout((function(){pe(t,r)}),2e3),e.n=3;break;case 2:e.p=2,e.v,setTimeout((function(){fe(t,r)}),15e3);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r){return e.apply(this,arguments)}}(),pe=function(){var e=y(p().m((function e(t,r){var n,a,o,i,u,l,f,m,h,y,b,g,k,w,S;return p().w((function(e){for(;;)switch(e.n){case 0:u=r.mode,l=null===(n=r.options)||void 0===n?void 0:n.cursed,f=null===(a=r.options)||void 0===a?void 0:a.trust,m=null===(o=r.options)||void 0===o?void 0:o.trust1,h=r.playerCount,y=null===(i=r.options)||void 0===i?void 0:i.funding,e.p=1,b=d(K(r.boxes).entries()),e.p=2,k=p().m((function e(){var n,a,o;return p().w((function(e){for(;;)switch(e.n){case 0:n=s(g.value,2),a=n[0],o=n[1],setTimeout((function(){for(var e=0;e<r.bets.length;e++){var n,i="".concat(r._id,"-").concat(r.fair.seedServer,"-").concat(r.fair.seedPublic,"-").concat(a,"-").concat(e),s=v.createHash("sha256").update(i).digest("hex"),c=parseInt(s.substr(0,8),16)%1e5,p=!0,b=null===(n=r.bets)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.bot;"standard"===u?p=l||!b:"team"===u&&(y>0?(p=l||2===e||3===e||!b,6===h&&(p=l||3===e||4===e||5===e||!b)):(p=l||0===e||1===e||!b,6===h&&(p=l||0===e||1===e||2===e||!b))),r.bets[e].payout=r.bets[e].payout+W(o.box.items,c,p&&f,p&&m).amountFixed,r.bets[e].outcomes.push(c)}if(r.state="rolling",r.updatedAt=(new Date).getTime(),re.splice($(re,r._id),1,r),!0===r.options.private){var g,k=d(r.bets);try{for(k.s();!(g=k.n()).done;){var w=g.value;!1===w.bot&&t.of("/socket/battles").to(w.user._id.toString()).emit("game",{game:z(r)})}}catch(e){k.e(e)}finally{k.f()}}else t.of("/socket/battles").emit("game",{game:z(r)})}),6500*a);case 1:return e.a(2)}}),e)})),b.s();case 3:if((g=b.n()).done){e.n=5;break}return e.d(c(k()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,w=e.v,b.e(w);case 7:return e.p=7,b.f(),e.f(7);case 8:setTimeout((function(){me(t,r)}),6500*K(r.boxes).length),e.n=10;break;case 9:e.p=9,S=e.v,console.error(S);case 10:return e.a(2)}}),e,null,[[2,6,7,8],[1,9]])})));return function(t,r){return e.apply(this,arguments)}}(),me=function(){var e=y(p().m((function e(t,r){var n,a,i,s,u,l,f,m,h,y,v,g,_,j,T,P,C,I,E,D,G,M;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,r.state="completed",e.n=1,S.findOne({state:"running"}).select("state").lean();case 1:n=e.v,a=[],i=[],s=[],u=0,l=V(r),f=J(r),m=d(r.bets),e.p=2,y=p().m((function e(){var t,r,o,c,d,m,y;return p().w((function(e){for(;;)switch(e.n){case 0:if((t=h.value).payout=!0===l.some((function(e){return e._id.toString()===t._id.toString()}))?Math.floor(f/l.length):0,!0===t.bot){e.n=2;break}return t.amount,u+=!0!==t.user.limits.blockSponsor&&0===t.user.btype?t.amount:0,r=O(),o=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage*r.general.reward.multiplier):0,c=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.005*t.amount):0,e.n=1,x.find({enabled:"true"}).select("creators").lean();case 1:d=e.v,m=d.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates.referrer)||void 0===r?void 0:r.toString())})),y=0===t.btype?{balance:t.payout,xp:!0!==t.user.limits.blockSponsor?Math.floor(t.amount*process.env.XP_RATE*r.general.reward.multiplier):0,"stats.won":t.payout,"limits.betToWithdraw":t.user.limits.betToWithdraw<=t.amount?-t.user.limits.betToWithdraw:-t.amount,"limits.betToRain":t.user.limits.betToRain<=t.amount?-t.user.limits.betToRain:-t.amount,"leaderboard.points":null!==n&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.leaderboardpoints":m&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.generated":c,"rakeback.earned":o,"rakeback.available":o}:{fbalance:t.payout},a.push(b.findByIdAndUpdate(t.user._id,{$inc:y,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean()),void 0!==t.user.affiliates.referrer&&c>0&&0===t.btype&&s.push(b.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":c,"affiliates.available":c},updatedAt:(new Date).getTime()},{}));case 2:i.push(w.findByIdAndUpdate(t._id,{payout:t.payout,multiplier:Math.floor(t.payout/(0===t.amount?10:t.amount)*100),outcomes:t.outcomes,updatedAt:(new Date).getTime()},{new:!0}).select("amount  btype payout multiplier user bot updatedAt").populate({path:"user",select:"roblox.id username btype avatar rank xp stats rakeback anonymous createdAt"}).lean());case 3:return e.a(2)}}),e)})),m.s();case 3:if((h=m.n()).done){e.n=5;break}return e.d(c(y()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,G=e.v,m.e(G);case 7:return e.p=7,m.f(),e.f(7);case 8:return e.n=9,Promise.all([k.findByIdAndUpdate(r._id,{fair:r.fair,state:"completed",updatedAt:(new Date).getTime()},{}),A.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*u)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(a,i,s));case 9:if(v=e.v,ne.unshift(z(r)),ne.length>8&&ne.pop(),re.splice($(re,r._id),1),!0===r.options.private){g=d(r.bets);try{for(g.s();!(_=g.n()).done;)!1===(j=_.value).bot&&t.of("/socket/battles").to(j.user._id.toString()).emit("game",{game:z(r)})}catch(e){g.e(e)}finally{g.f()}}else t.of("/socket/battles").emit("game",{game:z(r)});t.of("/socket/general").emit("rain",{rain:v[1]}),T=d(v.slice(2,a.length+2));try{for(T.s();!(P=T.n()).done;)C=P.value,t.of("/socket/general").to(C._id.toString()).emit("user",{user:C})}catch(e){T.e(e)}finally{T.f()}I=d(v.slice(a.length+2,a.length+i.length+2));try{for(I.s();!(E=I.n()).done;)!0!==(D=E.value).bot&&te(t,o(o({},D),{},{user:ee(D.user),method:"battles"}))}catch(e){I.e(e)}finally{I.f()}e.n=11;break;case 10:e.p=10,M=e.v,console.error(M);case 11:return e.a(2)}}),e,null,[[2,6,7,8],[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),he=function(){var e=y(p().m((function e(){var t,r,n,a,o,i,s,c,l,f,m,h,y,v,g;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([k.find({$or:[{state:"created"},{state:"pending"},{state:"rolling"}]}).select("amount playerCount mode boxes btype options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount title items",populate:{path:"items.item",select:"name title image amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username btype avatar rank xp limits stats.total affiliates anonymous createdAt"}}).lean(),k.find({"options.private":!1,state:"completed"}).sort({createdAt:-1}).limit(4).select("amount playerCount mode boxes btype options fair state updatedAt createdAt").populate({path:"boxes.box",select:"name slug amount title items",populate:{path:"items.item",select:"name title image amountFixed"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id btype username avatar rank xp stats.total anonymous createdAt"}}).lean()]);case 1:for(t=e.v,r=[],n=0,a=[].concat(u(t[0]),u(t[1]));n<a.length;n++)if("completed"!==(o=a[n]).state&&Math.floor(o.playerCount)===o.bets.length){r.push(k.findByIdAndUpdate(o._id,{state:"canceled",updatedAt:(new Date).getTime()},{})),i=d(o.bets);try{for(i.s();!(s=i.n()).done;)c=s.value,l=0===c.btype?{balance:c.amount,"stats.bet":-c.amount}:{fbalance:c.amount},r.push(b.findByIdAndUpdate(c.user,{$inc:l,updatedAt:(new Date).getTime()},{}))}catch(e){i.e(e)}finally{i.f()}}else{f=d(o.bets);try{for(f.s();!(m=f.n()).done;)!1===(h=m.value).bot?(y=X(h.user),v=Z(h.user),h.user={_id:h.user._id,roblox:h.user.roblox,username:h.user.username,avatar:h.user.avatar,rank:h.user.rank,level:y,rakeback:v,stats:!0===h.user.anonymous?null:h.user.stats,limits:h.user.limits,btype:h.user.btype,affiliates:h.user.affiliates,createdAt:h.user.createdAt}):h.user={}}catch(e){f.e(e)}finally{f.f()}"completed"!==o.state?re.push(o):ne.unshift(o)}return e.n=2,Promise.all(r);case 2:e.n=4;break;case 3:e.p=3,g=e.v,console.error(g);case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(){return e.apply(this,arguments)}}();e.exports={battlesGetData:function(e){return new Promise(function(){var t=y(p().m((function t(r,n){var a,o,i;return p().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,g.find({state:"active"}).select("name slug amount categories type state createdAt updatedAt items").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 1:a=t.v,o=re.filter((function(t){return!1===t.options.private||void 0!==e&&!0===t.bets.some((function(t){return!1===t.bot&&t.user._id.toString()===e._id.toString()}))})),r({boxes:a,games:H(o),history:ne}),t.n=3;break;case 2:t.p=2,i=t.v,n(i);case 3:return t.a(2)}}),t,null,[[0,2]])})));return function(e,r){return t.apply(this,arguments)}}())},battlesGetGameDataSocket:ie,battlesSendCreateSocket:se,battlesSendBotSocket:ce,battlesSendJoinSocket:ue,battlesSendCancelSocket:de,battlesInit:he}},1181:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=r(7906);r(9472).SERVICE_PROXY_TIME,e.exports={unboxCheckGetBoxDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==o.isMongoId(e.boxId))throw new Error("You’ve entered an invalid box id.")},unboxCheckGetBoxDataBox:function(e){if(null===e||"active"!==e.state)throw new Error("Your entered box is not available.")},unboxCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==o.isMongoId(e.boxId))throw new Error("You’ve entered an invalid box id.");if(void 0===e.unboxCount||null===e.unboxCount||!0===isNaN(e.unboxCount)||Math.floor(e.unboxCount)<1||Math.floor(e.unboxCount)>4)throw new Error("You’ve entered an invalid unbox count.")},unboxCheckSendBetBox:function(e){if(null===e||"active"!==e.state)throw new Error("Your requested box is not available.")},unboxCheckSendBetUser:function(e,t){if(0===e.btype){if(e.balance<t)throw new Error("You don’t have enough balance for this action.")}else{if(1!==e.btype)throw new Error("You don’t have selected the correct coin type");if(e.fbalance<t)throw new Error("You don’t have enough balance for this action.")}},unboxCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},unboxGetOutcomeItem:function(e,t){var r,a=0,o=null,i=n(e.items);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(t<=(a+=s.tickets)){o=s.item;break}}}catch(e){i.e(e)}finally{i.f()}return o},unboxSetOutcomeItem:function(e,t){var r,a=null,o=n(e);try{for(o.s();!(r=o.n()).done;){a=r.value;break}}catch(e){o.e(e)}finally{o.f()}return a?a.item:null},findPercent:function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r}}},1198:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return p(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(p(t={},n,(function(){return this})),t),l=u.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,p(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=u,p(l,"constructor",u),p(u,"constructor",c),c.displayName="GeneratorFunction",p(u,a,"GeneratorFunction"),p(l),p(l,a,"Generator"),p(l,n,(function(){return this})),p(l,"toString",(function(){return"[object Generator]"})),(f=function(){return{w:o,m}})()}function p(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}p=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){p(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},p(e,t,r,n)}function m(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){m(o,n,a,i,s,"next",e)}function s(e){m(o,n,a,i,s,"throw",e)}i(void 0)}))}}var y=r(8749),v=r(2789),b=r(5398),g=r(6769),k=r(8744),w=r(8875),S=r(7908).socketRemoveAntiSpam,A=r(8461).settingGet,x=r(836),_=x.generalUserGetRakeback,O=x.generalUserGetFormated,j=r(2507).fairGetData,T=r(6905),P=T.blackjackCheckSendJoinData,C=T.blackjackCheckSendJoinTable,I=T.blackjackCheckSendJoinUser,E=T.blackjackCheckSendBetData,D=T.blackjackCheckSendBetTable,G=T.blackjackCheckSendBetBets,M=T.blackjackCheckSendBetSeat,R=T.blackjackCheckSendBetUser,B=T.blackjackCheckSendClearData,U=T.blackjackCheckSendClearTable,Y=T.blackjackCheckSendClearSeat,N=T.blackjackCheckSendInsuranceData,F=T.blackjackCheckSendInsuranceTable,L=T.blackjackCheckSendInsuranceSeat,$=T.blackjackCheckSendInsuranceUser,q=T.blackjackCheckSendHitData,J=T.blackjackCheckSendHitTable,K=T.blackjackCheckSendHitSeat,W=T.blackjackCheckSendStandData,V=T.blackjackCheckSendStandTable,H=T.blackjackCheckSendStandSeat,z=T.blackjackCheckSendSplitData,Q=T.blackjackCheckSendSplitTable,X=T.blackjackCheckSendSplitSeat,Z=T.blackjackCheckSendSplitUser,ee=T.blackjackCheckSendDoubleData,te=T.blackjackCheckSendDoubleTable,re=T.blackjackCheckSendDoubleSeat,ne=T.blackjackCheckSendDoubleUser,ae=T.blackjackGenerateGame,oe=T.blackjackGenerateDeck,ie=T.blackjackShuffleDeck,se=T.blackjackGetCardsValue,ce=T.blackjackGetSideBetMultiplier,ue=T.blackjackCheckCardsSoftSeventeen,de=T.blackjackTableListSanitize,le=T.blackjackTableSanitize,fe=T.blackjackGetBetAmount,pe=(T.generateBlackjackWinningHand,r(8223)),me=r(1325),he=r(6049),ye=r(9845),ve=r(5507).generalAddBetsList,be=[],ge={},ke=[],we=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c;return f().w((function(e){for(;;)switch(e.n){case 0:try{P(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),C(a,n,be[i]),I(n,be[i]),s=Math.floor(Math.pow(n.xp/1e3/100,1/3)),c=_(n),be[i].players.push({seat:a.seat,user:{_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:s,rakeback:c,affiliates:n.affiliates,stats:n.stats,limits:n.limits,createdAt:n.createdAt},bet:null}),be[i].players.sort((function(e,t){return e.seat-t.seat})),t.of("/socket/blackjack").emit("table",{table:le(be[i])}),"created"===be[i].game.state&&Pe(t,be[i]),o({success:!0}),S(n._id)}catch(e){S(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Se=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,d,l,p,m,h,y,b,k,w,A,x,_;return f().w((function(e){for(;;)switch(e.n){case 0:e.p=0,E(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),D(be[i]),G(a.bets),s=[],d=0,l=u(a.bets),e.p=1,m=f().m((function e(){var t,r,a;return f().w((function(e){for(;;)switch(e.n){case 0:t=p.value,r=be[i].players[be[i].players.findIndex((function(e){return e.seat===t.seat}))],M(t,n,be[i],r),a=fe(t.amount),d=Math.floor(d+a),null===r.bet?s.push(g.create({amount:{main:Math.floor(t.amount.main),sideLeft:Math.floor(t.amount.sideLeft),sideRight:Math.floor(t.amount.sideRight)},actions:["created"],seat:r.seat,game:be[i].game._id,user:n._id})):s.push(g.findByIdAndUpdate(r.bet._id,{$inc:{"amount.main":Math.floor(t.amount.main),"amount.sideLeft":Math.floor(t.amount.sideLeft),"amount.sideRight":Math.floor(t.amount.sideRight)}},{new:!0,upsert:!0}).lean());case 1:return e.a(2)}}),e)})),l.s();case 2:if((p=l.n()).done){e.n=4;break}return e.d(c(m()),3);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,w=e.v,l.e(w);case 6:return e.p=6,l.f(),e.f(6);case 7:return R(n,d),e.p=8,ge[Math.floor(a.table).toString()]=ge[Math.floor(a.table).toString()]+1,e.n=9,Promise.all([v.findByIdAndUpdate(n._id,{$inc:{balance:-d,"stats.bet":d},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()].concat(s));case 9:h=e.v,y=u(h.slice(1)),e.p=10,k=f().m((function e(){var t,r;return f().w((function(e){for(;;)switch(e.n){case 0:t=b.value,r=be[i].players.findIndex((function(e){return e.seat===t.seat})),t instanceof g==1&&(t=t.toObject()),be[i].players[r].bet=t;case 1:return e.a(2)}}),e)})),y.s();case 11:if((b=y.n()).done){e.n=13;break}return e.d(c(k()),12);case 12:e.n=11;break;case 13:e.n=15;break;case 14:e.p=14,A=e.v,y.e(A);case 15:return e.p=15,y.f(),e.f(15);case 16:t.of("/socket/blackjack").emit("table",{table:le(be[i])}),o({success:!0,user:h[0]}),ge[Math.floor(a.table).toString()]=ge[Math.floor(a.table).toString()]-1,S(n._id),e.n=18;break;case 17:e.p=17,x=e.v,S(r.decoded._id),ge[Math.floor(a.table).toString()]=ge[Math.floor(a.table).toString()]-1,o({success:!1,error:{type:"error",message:x.message}});case 18:e.n=20;break;case 19:e.p=19,_=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:_.message}});case 20:return e.a(2)}}),e,null,[[10,14,15,16],[8,17],[1,5,6,7],[0,19]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Ae=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,d,l,p,m,h,y,b,k,w,A,x,_;return f().w((function(e){for(;;)switch(e.n){case 0:e.p=0,B(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),U(be[i]),s=be[i].players.filter((function(e){return e.user._id.toString()===n._id.toString()&&null!==e.bet})),Y(be[i],s),e.p=1,ge[Math.floor(a.table).toString()]=ge[Math.floor(a.table).toString()]+1,d=0,l=[],p=u(s);try{for(p.s();!(m=p.n()).done;)h=m.value,d+=fe(h.bet.amount),l.push(g.findByIdAndDelete(h.bet._id,{}))}catch(e){p.e(e)}finally{p.f()}return e.n=2,Promise.all([v.findByIdAndUpdate(n._id,{$inc:{balance:d,"stats.bet":-d},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()].concat(l));case 2:y=e.v,b=u(s),e.p=3,w=f().m((function e(){var t;return f().w((function(e){for(;;)switch(e.n){case 0:t=k.value,be[i].players[be[i].players.findIndex((function(e){return e.seat===t.seat}))].bet=null;case 1:return e.a(2)}}),e)})),b.s();case 4:if((k=b.n()).done){e.n=6;break}return e.d(c(w()),5);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,A=e.v,b.e(A);case 8:return e.p=8,b.f(),e.f(8);case 9:t.of("/socket/blackjack").emit("table",{table:le(be[i])}),o({success:!0,user:y[0]}),ge[Math.floor(a.table).toString()]=ge[Math.floor(a.table).toString()]-1,S(n._id),e.n=11;break;case 10:e.p=10,x=e.v,S(r.decoded._id),ge[Math.floor(a.table).toString()]=ge[Math.floor(a.table).toString()]-1,o({success:!1,error:{type:"error",message:x.message}});case 11:e.n=13;break;case 12:e.p=12,_=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:_.message}});case 13:return e.a(2)}}),e,null,[[3,7,8,9],[1,10],[0,12]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),xe=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,d,l,p,m,h,y,b,g,k,w;return f().w((function(e){for(;;)switch(e.n){case 0:e.p=0,N(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),F(a,n,be[i]),s=be[i].players.filter((function(e){return e.user._id.toString()===n._id.toString()})),d=0,l=u(s);try{for(l.s();!(p=l.n()).done;)m=p.value,L(be[i],m),d=Math.floor(d+m.bet.amount.main/2)}catch(e){l.e(e)}finally{l.f()}if($(a,n,d),!0!==a.insurance){e.n=2;break}return e.n=1,v.findByIdAndUpdate(n._id,{$inc:{balance:-d,"stats.bet":d},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean();case 1:h=e.v,t.of("/socket/general").to(n._id.toString()).emit("user",{user:h});case 2:y=u(s),e.p=3,g=f().m((function e(){var t;return f().w((function(e){for(;;)switch(e.n){case 0:(t=b.value).bet.actions.push(!0===a.insurance?"insurance":"noinsurance"),be[i].players.splice(be[i].players.findIndex((function(e){return e.seat===t.seat})),1,t);case 1:return e.a(2)}}),e)})),y.s();case 4:if((b=y.n()).done){e.n=6;break}return e.d(c(g()),5);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,k=e.v,y.e(k);case 8:return e.p=8,y.f(),e.f(8);case 9:t.of("/socket/blackjack").emit("table",{table:le(be[i])}),o({success:!0}),S(n._id),e.n=11;break;case 10:e.p=10,w=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:w.message}});case 11:return e.a(2)}}),e,null,[[3,7,8,9],[0,10]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),_e=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s;return f().w((function(e){for(;;)switch(e.n){case 0:try{q(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),J(a,n,be[i]),s=be[i].players[be[i].players.findIndex((function(e){return e.seat===a.seat}))],K(n,be[i],s),!1===s.bet.actions.includes("split")?s.bet.cards.push(be[i].game.deck.pop()):!0===s.bet.actions.includes("stand")||se(s.bet.cardsRight)>=21?s.bet.cardsLeft.push(be[i].game.deck.pop()):s.bet.cardsRight.push(be[i].game.deck.pop()),s.bet.actions.push("hit"),be[i].players.splice(be[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),be[i].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:le(be[i])}),o({success:!0}),S(n._id)}catch(e){S(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Oe=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s;return f().w((function(e){for(;;)switch(e.n){case 0:try{W(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),V(a,n,be[i]),s=be[i].players[be[i].players.findIndex((function(e){return e.seat===a.seat}))],H(n,be[i],s),s.bet.actions.push("stand"),be[i].players.splice(be[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),be[i].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:le(be[i])}),o({success:!0}),S(n._id)}catch(e){S(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),je=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c,u;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,z(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),Q(a,n,be[i]),s=be[i].players[be[i].players.findIndex((function(e){return e.seat===a.seat}))],X(n,be[i],s),Z(n,s),e.n=1,Promise.all([v.findByIdAndUpdate(n._id,{$inc:{balance:-s.bet.amount.main,"stats.bet":s.bet.amount.main},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()]);case 1:c=e.v,t.of("/socket/general").to(n._id.toString()).emit("user",{user:c[0]}),s.bet.cardsLeft=[s.bet.cards[0]],s.bet.cardsRight=[s.bet.cards[1]],delete s.bet.cards,s.bet.cardsLeft.push(be[i].game.deck.pop()),s.bet.cardsRight.push(be[i].game.deck.pop()),s.bet.actions.push("split"),be[i].players.splice(be[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),be[i].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:le(be[i])}),o({success:!0}),S(n._id),e.n=3;break;case 2:e.p=2,u=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Te=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c,u;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,ee(a),i=be.findIndex((function(e){return e.table===Math.floor(a.table)})),te(a,n,be[i]),s=be[i].players[be[i].players.findIndex((function(e){return e.seat===a.seat}))],re(n,be[i],s),ne(n,s),e.n=1,Promise.all([v.findByIdAndUpdate(n._id,{$inc:{balance:-s.bet.amount.main,"stats.bet":s.bet.amount.main},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),g.findByIdAndUpdate(s.bet._id,{"amount.main":Math.floor(2*s.bet.amount.main)},{})]);case 1:c=e.v,t.of("/socket/general").to(n._id.toString()).emit("user",{user:c[0]}),s.bet.amount.main=Math.floor(2*s.bet.amount.main),s.bet.cards.push(be[i].game.deck.pop()),s.bet.actions.push("double"),be[i].players.splice(be[i].players.findIndex((function(e){return e.seat===s.seat})),1,s),t.of("/socket/blackjack").emit("table",{table:le(be[i])}),o({success:!0}),S(n._id),e.n=3;break;case 2:e.p=2,u=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Pe=function(e,t){try{var r=be.findIndex((function(e){return e.table===t.table}));be[r].game.state="countdown",be[r].game.updatedAt=(new Date).getTime(),e.of("/socket/blackjack").emit("table",{table:le(be[r])}),setTimeout((function(){be[r].game.state="pending",be[r].game.updatedAt=(new Date).getTime(),e.of("/socket/blackjack").emit("table",{table:le(be[r])}),Ce(e,be[r])}),1e4)}catch(e){console.error(e)}},Ce=function(e,t){try{if(ge[t.table.toString()]<=0){var r=be.findIndex((function(e){return e.table===t.table}));be[r].players=be[r].players.filter((function(e){return null!==e.bet})),be[r].game.state=be[r].players.length>=1?"pending":"created",be[r].game.updatedAt=(new Date).getTime(),e.of("/socket/blackjack").emit("table",{table:le(be[r])}),be[r].players.length>=1&&Ie(e,be[r])}else setTimeout((function(){Ce(e,t)}),500)}catch(e){console.error(e)}},Ie=function(){var e=h(f().m((function e(t,r){var n,a,o,i,s,c,u,d,l;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,n=be.findIndex((function(e){return e.table===r.table})),e.n=1,j();case 1:a=e.v,be[n].game.fair.seedPublic=a.data.head_block_id,be[n].game.fair.blockId=a.data.head_block_num,o="".concat(be[n].game._id,"-").concat(be[n].game.fair.seedServer,"-").concat(be[n].game.fair.seedPublic),i=y.createHash("sha256").update(o).digest("hex"),s=oe(),s=ie(s,i),ke[n]=JSON.parse(JSON.stringify(pe[Math.floor(100*Math.random())])),(c=A()).games.ctotal.enabled&&c.games.cblackjack.enabled&&(2===(u=c.games.cblackjack.value)&&(ke[n]=JSON.parse(JSON.stringify(ye[Math.floor(100*Math.random())]))),4===u&&4==(Math.random()<.5?3:4)&&(ke[n]=JSON.parse(JSON.stringify(he[Math.floor(100*Math.random())]))),5===u&&(4===(d=Math.floor(3*Math.random())+3)&&(ke[n]=JSON.parse(JSON.stringify(he[Math.floor(100*Math.random())]))),5===d&&(ke[n]=JSON.parse(JSON.stringify(me[Math.floor(100*Math.random())]))))),be[n].game.deck=s,be[n].game.state="running",be[n].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:le(be[n])}),Ee(t,be[n]),e.n=3;break;case 2:e.p=2,l=e.v,console.error(l),setTimeout((function(){duelsGameValidate(t,duelsGame)}),15e3);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r){return e.apply(this,arguments)}}(),Ee=function(){var e=h(f().m((function e(t,r){var n,a,o,i,s,u;return f().w((function(e){for(;;)switch(e.n){case 0:e.p=0,n=be.findIndex((function(e){return e.table===r.table})),a=be[n].players.length,o=0;case 1:if(!(o<2)){e.n=5;break}i=f().m((function e(r){return f().w((function(e){for(;;)switch(e.n){case 0:setTimeout((function(){if(r<a)void 0===be[n].players[a-1-r].bet.cards&&(be[n].players[a-1-r].bet.cards=[]),be[n].players[a-1-r].bet.cards.push(be[n].game.deck.pop());else{void 0===be[n].game.dealerCards&&(be[n].game.dealerCards=[]);var e=A();e.games.ctotal.enabled&&e.games.cblackjack.enabled?be[n].game.dealerCards.push(ke[n].pop()):be[n].game.dealerCards.push(be[n].game.deck.pop())}be[n].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:le(be[n])})}),1e3*(o*(a+1)+r));case 1:return e.a(2)}}),e)})),s=0;case 2:if(!(s<a+1)){e.n=4;break}return e.d(c(i(s)),3);case 3:s++,e.n=2;break;case 4:o++,e.n=1;break;case 5:setTimeout((function(){"A"!==be[n].game.dealerCards[0].rank&&21===se(be[n].game.dealerCards)?Me(t,be[n]):"A"===be[n].game.dealerCards[0].rank?De(t,be[n]):Ge(t,be[n],4)}),2e3*(a+1)),e.n=7;break;case 6:e.p=6,u=e.v,console.error(u);case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),De=function(e,t){try{t.playersPos="all",t.game.updatedAt=(new Date).getTime(),be.splice(be.findIndex((function(e){return e.table===t.table})),1,t),e.of("/socket/blackjack").emit("table",{table:le(t)});var r=setInterval((function(){if((t=be[be.findIndex((function(e){return e.table===t.table}))]).players.length===t.players.filter((function(e){return 2===e.bet.actions.length})).length||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4+500){clearInterval(r);for(var n=0;n<t.players.length;n++)t.players[n].bet.actions.length<2&&t.players[n].bet.actions.push("noinsurance");21===se(t.game.dealerCards)&&(t.game.state="completed"),t.game.updatedAt=(new Date).getTime(),t.playersPos=null,be.splice(be.findIndex((function(e){return e.table===t.table})),1,t),e.of("/socket/blackjack").emit("table",{table:le(t)}),21===se(t.game.dealerCards)?Me(e,t):Ge(e,t,4)}}),500)}catch(e){console.error(e)}},Ge=function(){var e=h(f().m((function e(t,r,n){var a,o,i,u,d,l,p;return f().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,r=be[be.findIndex((function(e){return e.table===r.table}))],a=be.findIndex((function(e){return e.table===r.table})),-1!==n){e.n=4;break}for(r.playersPos=null,o=s(r.game.dealerCards);se(o)<17||17===se(o)&&!0===ue(o);)(i=A()).games.ctotal.enabled&&i.games.cblackjack.enabled?o.push(ke[a].pop()):o.push(r.game.deck.pop());u=f().m((function e(n){return f().w((function(e){for(;;)switch(e.n){case 0:setTimeout((function(){r.game.dealerCards[n]=o[n],r.game.updatedAt=(new Date).getTime(),be.splice(be.findIndex((function(e){return e.table===r.table})),1,r),t.of("/socket/blackjack").emit("table",{table:r})}),1e3*(n-1));case 1:return e.a(2)}}),e)})),d=1;case 1:if(!(d<o.length)){e.n=3;break}return e.d(c(u(d)),2);case 2:d++,e.n=1;break;case 3:setTimeout((function(){Me(t,r)}),1e3*(o.length-1)),e.n=5;break;case 4:void 0===r.players[n]||se(r.players[n].bet.cards)>=21?Ge(t,r,n-1):(r.playersPos=r.players[n].seat,r.game.updatedAt=(new Date).getTime(),be.splice(be.findIndex((function(e){return e.table===r.table})),1,r),t.of("/socket/blackjack").emit("table",{table:le(r)}),l=setInterval((function(){!0===(r=be[be.findIndex((function(e){return e.table===r.table}))]).players[n].bet.actions.includes("double")||!1===r.players[n].bet.actions.includes("split")&&(!0===r.players[n].bet.actions.includes("stand")||se(r.players[n].bet.cards)>=21)||!0===r.players[n].bet.actions.includes("split")&&(r.players[n].bet.actions.filter((function(e){return"stand"===e})).length>=2||!0===r.players[n].bet.actions.includes("stand")&&(se(r.players[n].bet.cardsLeft)>=21||se(r.players[n].bet.cardsRight)>=21)||se(r.players[n].bet.cardsLeft)>=21&&se(r.players[n].bet.cardsRight)>=21)?(clearInterval(l),Ge(t,r,n-1)):(new Date).getTime()>=new Date(r.game.updatedAt).getTime()+1e4+500&&(r.players[n].bet.actions.push("stand"),r.game.updatedAt=(new Date).getTime(),be.splice(be.findIndex((function(e){return e.table===r.table})),1,r),t.of("/socket/blackjack").emit("table",{table:le(r)}))}),500));case 5:e.n=7;break;case 6:e.p=6,p=e.v,console.error(p);case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Me=function(){var e=h(f().m((function e(t,r){var n,a,i,s,d,l,p,m,y,S,x,_,j,T,P,C,I;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,n=be.findIndex((function(e){return e.table===r.table})),a=se(be[n].game.dealerCards),e.n=1,k.findOne({state:"running"}).select("state").lean();case 1:i=e.v,s=[],d=[],l=u(be[n].players),e.p=2,m=f().m((function e(){var t,r,o,c,u,l,m,h,y,b,k,S;return f().w((function(e){for(;;)switch(e.n){case 0:return t=p.value,r=0,!0===t.bet.actions.includes("split")?(o=se(t.bet.cardsLeft),c=se(t.bet.cardsRight),o<=21&&o===a?r=t.bet.amount.main:o<=21&&(o>a||a>21)&&(r=Math.floor(2*t.bet.amount.main)),c<=21&&c===a?r=Math.floor(r+t.bet.amount.main):c<=21&&(c>a||a>21)&&(r=Math.floor(r+2*t.bet.amount.main))):(u=se(t.bet.cards),2===be[n].game.dealerCards.length&&21===a?2===t.bet.cards.length&&21===u?r=t.bet.amount.main:!0===t.bet.actions.includes("insurance")&&(r=Math.floor(1.5*t.bet.amount.main)):2===t.bet.cards.length&&21===u?r=Math.floor(2.5*t.bet.amount.main):u<=21&&u===a?r=t.bet.amount.main:u<=21&&(u>a||a>21)&&(r=Math.floor(2*t.bet.amount.main))),l=t.bet.actions.includes("split")?[t.bet.cardsLeft[0],t.bet.cardsRight[0]]:t.bet.cards.slice(0,2),m=ce(be[n].game.dealerCards,l),t.bet.amount.sideLeft>0&&(r+=Math.floor(t.bet.amount.sideLeft*m.left)),t.bet.amount.sideRight>0&&(r+=Math.floor(t.bet.amount.sideRight*m.right)),h=t.bet.amount.main+t.bet.amount.sideLeft+t.bet.amount.sideRight,!0===t.bet.actions.includes("insurance")&&(h+=Math.floor(t.bet.amount.main/2)),!0===t.bet.actions.includes("split")&&(h+=t.bet.amount.main),y=A(),b=!0!==t.user.limits.blockSponsor?Math.floor(h*t.user.rakeback.percentage*y.general.reward.multiplier):0,e.n=1,w.find({enabled:"true"}).select("creators").lean();case 1:k=e.v,S=k.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),s.push(v.findByIdAndUpdate(t.user._id,{$inc:{balance:r,xp:!0!==t.user.limits.blockSponsor?Math.floor(h*process.env.XP_RATE*y.general.reward.multiplier):0,"stats.won":r,"limits.betToWithdraw":t.user.limits.betToWithdraw<=h<=0?-t.user.limits.betToWithdraw:-h,"limits.betToRain":t.user.limits.betToRain<=h<=0?-t.user.limits.betToRain:-h,"leaderboard.points":null!==i&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?h:0,"affiliates.leaderboardpoints":S&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?h:0,"rakeback.earned":b,"rakeback.available":b},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),d.push(g.findByIdAndUpdate(t.bet._id,{payout:r,multiplier:Math.floor(r/h*100),cards:t.bet.cards,cardsLeft:t.bet.cardsLeft,cardsRight:t.bet.cardsRight,actions:t.bet.actions,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean());case 2:return e.a(2)}}),e)})),l.s();case 3:if((p=l.n()).done){e.n=5;break}return e.d(c(m()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,C=e.v,l.e(C);case 7:return e.p=7,l.f(),e.f(7);case 8:return be[n].game.state="completed",be[n].game.updatedAt=(new Date).getTime(),t.of("/socket/blackjack").emit("table",{table:le(be[n])}),e.n=9,Promise.all([b.findByIdAndUpdate(be[n].game._id,{deck:be[n].game.deck,dealerCards:be[n].game.dealerCards,fair:be[n].game.fair,state:"completed",updatedAt:(new Date).getTime()})].concat(s,d));case 9:y=e.v,S=u(y.slice(1,s.length+1));try{for(S.s();!(x=S.n()).done;)_=x.value,t.of("/socket/general").to(_._id.toString()).emit("user",{user:_})}catch(e){S.e(e)}finally{S.f()}j=u(y.slice(s.length+1));try{for(j.s();!(T=j.n()).done;)P=T.value,ve(t,o(o({},P),{},{user:O(P.user),method:"blackjack"}))}catch(e){j.e(e)}finally{j.f()}setTimeout(h(f().m((function e(){return f().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,ae(be[n].table,be[n].game.type);case 1:be[n].game=e.v,be[n].playersPos=null,be[n].players=be[n].players.map((function(e){return o(o({},e),{},{bet:null})})),Pe(t,be[n]);case 2:return e.a(2)}}),e)}))),3e3),e.n=11;break;case 10:e.p=10,I=e.v,console.error(I);case 11:return e.a(2)}}),e,null,[[2,6,7,8],[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),Re=function(){var e=h(f().m((function e(t,r){var n,a,o,i,c,d;return f().w((function(e){for(;;)switch(e.n){case 0:e.p=0,n=[],a=u(r.bets);try{for(a.s();!(o=a.n()).done;)i=o.value,c=Math.floor(i.amount.main+i.amount.sideLeft+i.amount.sideRight),n=[].concat(s(n),[g.findByIdAndUpdate(i._id,{payout:c,multiplier:100,updatedAt:(new Date).getTime()}),v.findByIdAndUpdate(i.user,{$inc:{balance:c,"stats.bet":-c},updatedAt:(new Date).getTime()})])}catch(e){a.e(e)}finally{a.f()}return e.n=1,Promise.all([b.findByIdAndUpdate(r._id,{state:"canceled",updatedAt:(new Date).getTime()})].concat(s(n)));case 1:e.n=3;break;case 2:e.p=2,d=e.v,console.error(d);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r){return e.apply(this,arguments)}}(),Be=function(){var e=h(f().m((function e(t){var r,n,a,o,i,s,c,d;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,b.find({$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("state").populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank"}}).lean();case 1:r=e.v,n=u(r);try{for(n.s();!(a=n.n()).done;)o=a.value,Re(t,o)}catch(e){n.e(e)}finally{n.f()}i=0;case 2:if(!(i<Number(process.env.BLACKJACK_TABLES_STANDARD)+Number(process.env.BLACKJACK_TABLES_WHALE))){e.n=5;break}return s=i<Number(process.env.BLACKJACK_TABLES_STANDARD)?"standard":"whale",e.n=3,ae(i,s);case 3:c=e.v,be.push({table:i,game:c,players:[],playersPos:null}),ge[i.toString()]=0;case 4:i++,e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,d=e.v,console.error(d);case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();e.exports={blackjackSendJoinSocket:we,blackjackSendBetSocket:Se,blackjackSendClearSocket:Ae,blackjackSendInsuranceSocket:xe,blackjackSendHitSocket:_e,blackjackSendStandSocket:Oe,blackjackSendSplitSocket:je,blackjackSendDoubleSocket:Te,blackjackGetData:function(){return{tables:de(be)}},blackjackInit:Be}},1204:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}r(2789);var s=r(6533),c=r(7908).socketRemoveAntiSpam,u=r(1567),d=u.adminCheckGetFilterListData,l=u.adminCheckSendFilterCreateData,f=u.adminCheckSendFilterCreateFilter,p=u.adminCheckSendFilterRemoveData,m=u.adminCheckSendFilterRemoveFilter,h=r(7089),y=h.generalChatAddFilter,v=h.generalChatRemoveFilter,b=function(){var e=i(n().m((function e(t,r,a,o,i){var c,u,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,d(o),c=12*(o.page-1),e.n=1,Promise.all([s.countDocuments({phrase:{$regex:o.search,$options:"i"}}),s.find({phrase:{$regex:o.search,$options:"i"}}).limit(12).skip(c).select("phrase createdAt").lean()]);case 1:u=e.v,i({success:!0,count:u[0],filters:u[1]}),e.n=3;break;case 2:e.p=2,l=e.v,i({success:!1,error:{type:"error",message:l.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),g=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,p;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(o),u=o.phrase.toLowerCase(),e.n=1,s.findOne({phrase:u}).select("phrase").lean();case 1:return d=e.v,f(d),e.n=2,s.create({phrase:u});case 2:d=e.v,y(d.phrase),i({success:!0,filter:d}),c(a._id),e.n=4;break;case 3:e.p=3,p=e.v,c(a._id),i({success:!1,error:{type:"error",message:p.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),k=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,p(o),e.n=1,s.findById(o.filterId).select("phrase").lean();case 1:return u=e.v,m(u),e.n=2,s.findByIdAndDelete(o.filterId);case 2:u=e.v,v(u.phrase),i({success:!0,filter:u}),c(a._id),e.n=4;break;case 3:e.p=3,d=e.v,c(a._id),i({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetFilterListSocket:b,adminSendFilterCreateSocket:g,adminSendFilterRemoveSocket:k}},1275:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(2789),s=r(5734).rateLimiter,c=r(7908),u=c.socketCheckUserData,d=c.socketCheckAntiSpam,l=c.socketRemoveAntiSpam,f=r(8461).settingCheck,p=r(6998).cashierSendGiftRedeemSocket;e.exports=function(e,t){t.on("sendGiftRedeem",function(){var r,a=(r=n().m((function r(a,o){var c,m,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,c=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,s.consume(c);case 3:return r.n=4,d(t.decoded._id);case 4:return r.p=4,r.n=5,i.findById(t.decoded._id).select("username avatar rank affiliates mute ban").lean();case 5:m=r.v,u(m,!0),f(m,"gift.deposit.enabled"),p(e,t,m,a,o),r.n=7;break;case 6:r.p=6,h=r.v,l(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())}},1325:e=>{e.exports=[[{rank:"A",suit:"diamond"},{rank:"6",suit:"diamond"},{rank:"A",suit:"club"},{rank:"10",suit:"club"},{rank:"3",suit:"club"}],[{rank:"3",suit:"club"},{rank:"A",suit:"diamond"},{rank:"J",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"6",suit:"heart"},{rank:"7",suit:"club"},{rank:"5",suit:"spade"}],[{rank:"6",suit:"club"},{rank:"5",suit:"heart"},{rank:"4",suit:"club"},{rank:"4",suit:"diamond"},{rank:"2",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"A",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"A",suit:"heart"},{rank:"8",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"6",suit:"club"},{rank:"3",suit:"club"},{rank:"A",suit:"heart"},{rank:"4",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"7",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"5",suit:"club"},{rank:"3",suit:"diamond"},{rank:"2",suit:"club"},{rank:"Q",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"3",suit:"diamond"},{rank:"4",suit:"heart"},{rank:"Q",suit:"spade"},{rank:"2",suit:"spade"}],[{rank:"3",suit:"spade"},{rank:"A",suit:"heart"},{rank:"4",suit:"club"},{rank:"8",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"9",suit:"club"},{rank:"4",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"3",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"7",suit:"club"},{rank:"2",suit:"club"},{rank:"A",suit:"diamond"},{rank:"8",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"spade"},{rank:"4",suit:"club"},{rank:"3",suit:"club"},{rank:"3",suit:"heart"}],[{rank:"3",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"2",suit:"club"},{rank:"4",suit:"spade"},{rank:"10",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"2",suit:"club"},{rank:"9",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"5",suit:"spade"}],[{rank:"4",suit:"club"},{rank:"6",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"3",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"5",suit:"heart"},{rank:"3",suit:"spade"},{rank:"5",suit:"spade"},{rank:"7",suit:"club"}],[{rank:"7",suit:"spade"},{rank:"A",suit:"club"},{rank:"5",suit:"spade"},{rank:"7",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"8",suit:"heart"},{rank:"3",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"5",suit:"club"},{rank:"2",suit:"heart"}],[{rank:"4",suit:"diamond"},{rank:"5",suit:"spade"},{rank:"6",suit:"heart"},{rank:"5",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"3",suit:"club"},{rank:"A",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"8",suit:"diamond"},{rank:"2",suit:"heart"}],[{rank:"J",suit:"diamond"},{rank:"2",suit:"club"},{rank:"A",suit:"club"},{rank:"6",suit:"diamond"},{rank:"2",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"3",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"A",suit:"spade"},{rank:"5",suit:"heart"},{rank:"4",suit:"spade"},{rank:"10",suit:"heart"}],[{rank:"3",suit:"heart"},{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"4",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"A",suit:"heart"},{rank:"5",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"10",suit:"spade"}],[{rank:"J",suit:"club"},{rank:"A",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"5",suit:"club"},{rank:"3",suit:"heart"},{rank:"5",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"Q",suit:"spade"}],[{rank:"7",suit:"diamond"},{rank:"K",suit:"club"},{rank:"A",suit:"diamond"},{rank:"A",suit:"club"},{rank:"2",suit:"heart"}],[{rank:"5",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"K",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"9",suit:"club"},{rank:"3",suit:"spade"},{rank:"4",suit:"club"},{rank:"A",suit:"heart"},{rank:"4",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"2",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"6",suit:"heart"},{rank:"A",suit:"spade"},{rank:"9",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"4",suit:"heart"},{rank:"7",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"5",suit:"diamond"},{rank:"7",suit:"club"},{rank:"4",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"4",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"2",suit:"heart"},{rank:"6",suit:"club"}],[{rank:"3",suit:"heart"},{rank:"A",suit:"spade"},{rank:"6",suit:"spade"},{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"3",suit:"heart"},{rank:"8",suit:"heart"},{rank:"6",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"4",suit:"club"},{rank:"A",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"4",suit:"spade"},{rank:"4",suit:"heart"},{rank:"A",suit:"club"},{rank:"J",suit:"diamond"}],[{rank:"3",suit:"diamond"},{rank:"5",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"A",suit:"club"},{rank:"4",suit:"heart"}],[{rank:"4",suit:"club"},{rank:"5",suit:"club"},{rank:"6",suit:"heart"},{rank:"A",suit:"club"},{rank:"5",suit:"spade"}],[{rank:"2",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"J",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"Q",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"A",suit:"heart"},{rank:"3",suit:"spade"},{rank:"6",suit:"spade"},{rank:"Q",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"spade"},{rank:"A",suit:"heart"},{rank:"2",suit:"spade"},{rank:"10",suit:"heart"}],[{rank:"K",suit:"heart"},{rank:"5",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"3",suit:"heart"}],[{rank:"4",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"3",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"Q",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"4",suit:"heart"},{rank:"3",suit:"diamond"}],[{rank:"3",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"9",suit:"club"},{rank:"A",suit:"heart"},{rank:"2",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"3",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"8",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"A",suit:"club"},{rank:"9",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"8",suit:"spade"},{rank:"5",suit:"club"},{rank:"A",suit:"heart"},{rank:"4",suit:"spade"},{rank:"3",suit:"spade"}],[{rank:"7",suit:"club"},{rank:"3",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"6",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"6",suit:"club"},{rank:"8",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"5",suit:"spade"},{rank:"A",suit:"spade"},{rank:"Q",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"K",suit:"heart"},{rank:"2",suit:"spade"},{rank:"5",suit:"club"},{rank:"3",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"diamond"},{rank:"2",suit:"club"},{rank:"4",suit:"club"},{rank:"A",suit:"diamond"},{rank:"10",suit:"diamond"}],[{rank:"6",suit:"heart"},{rank:"A",suit:"spade"},{rank:"9",suit:"spade"},{rank:"3",suit:"spade"},{rank:"2",suit:"club"}],[{rank:"10",suit:"spade"},{rank:"7",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"heart"},{rank:"5",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"6",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"A",suit:"club"},{rank:"J",suit:"club"},{rank:"7",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"5",suit:"club"},{rank:"4",suit:"club"},{rank:"6",suit:"club"},{rank:"A",suit:"spade"},{rank:"5",suit:"diamond"}],[{rank:"5",suit:"club"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"},{rank:"J",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"7",suit:"heart"},{rank:"Q",suit:"heart"},{rank:"2",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"2",suit:"club"},{rank:"6",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"2",suit:"heart"},{rank:"8",suit:"club"},{rank:"A",suit:"spade"},{rank:"A",suit:"club"},{rank:"9",suit:"diamond"}],[{rank:"10",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"A",suit:"spade"},{rank:"5",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"3",suit:"spade"}],[{rank:"2",suit:"heart"},{rank:"4",suit:"club"},{rank:"J",suit:"spade"},{rank:"3",suit:"spade"},{rank:"2",suit:"diamond"}],[{rank:"2",suit:"spade"},{rank:"6",suit:"spade"},{rank:"Q",suit:"club"},{rank:"A",suit:"club"},{rank:"2",suit:"club"}],[{rank:"7",suit:"heart"},{rank:"2",suit:"club"},{rank:"2",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"J",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"},{rank:"3",suit:"heart"}],[{rank:"4",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"10",suit:"spade"},{rank:"4",suit:"heart"}],[{rank:"6",suit:"spade"},{rank:"A",suit:"heart"},{rank:"9",suit:"heart"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"5",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"10",suit:"spade"},{rank:"2",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"3",suit:"club"},{rank:"6",suit:"diamond"},{rank:"A",suit:"club"},{rank:"A",suit:"heart"},{rank:"10",suit:"heart"}],[{rank:"2",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"10",suit:"club"},{rank:"3",suit:"heart"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"5",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"Q",suit:"diamond"},{rank:"3",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"A",suit:"club"},{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"2",suit:"heart"}],[{rank:"6",suit:"club"},{rank:"2",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"2",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"5",suit:"club"},{rank:"2",suit:"club"},{rank:"4",suit:"heart"},{rank:"A",suit:"heart"},{rank:"9",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"7",suit:"club"},{rank:"A",suit:"diamond"},{rank:"7",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"4",suit:"heart"},{rank:"6",suit:"heart"},{rank:"8",suit:"club"},{rank:"A",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"4",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"7",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"5",suit:"heart"},{rank:"6",suit:"spade"},{rank:"2",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"2",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"4",suit:"heart"},{rank:"9",suit:"spade"},{rank:"2",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"3",suit:"heart"}],[{rank:"7",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"5",suit:"club"},{rank:"4",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"A",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"5",suit:"club"},{rank:"10",suit:"spade"},{rank:"2",suit:"diamond"}],[{rank:"9",suit:"spade"},{rank:"2",suit:"club"},{rank:"2",suit:"spade"},{rank:"3",suit:"heart"},{rank:"5",suit:"diamond"}],[{rank:"3",suit:"spade"},{rank:"4",suit:"spade"},{rank:"8",suit:"spade"},{rank:"5",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"},{rank:"5",suit:"club"},{rank:"2",suit:"club"},{rank:"3",suit:"diamond"}],[{rank:"2",suit:"heart"},{rank:"J",suit:"diamond"},{rank:"5",suit:"heart"},{rank:"A",suit:"club"},{rank:"3",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"9",suit:"club"},{rank:"A",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"3",suit:"diamond"},{rank:"A",suit:"club"},{rank:"5",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"7",suit:"club"},{rank:"A",suit:"club"},{rank:"7",suit:"diamond"},{rank:"4",suit:"diamond"}]]},1373:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},playerCount:{type:Number},winner:{type:n.Schema.ObjectId,ref:"DuelsBet"},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockId:{type:String}},state:{type:String},btype:{type:Number,default:0},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});a.virtual("bets",{ref:"DuelsBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("DuelsGame",a)},1388:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(2789),s=r(5734).rateLimiter,c=r(7908),u=c.socketCheckUserData,d=c.socketCheckAntiSpam,l=c.socketRemoveAntiSpam,f=r(8461).settingCheck,p=r(1889).cashierSendCreditDepositSocket;e.exports=function(e,t){t.on("sendCreditDeposit",function(){var r,a=(r=n().m((function r(a,o){var c,m,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,c=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,s.consume(c);case 3:return r.n=4,d(t.decoded._id);case 4:return r.p=4,r.n=5,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:m=r.v,u(m,!0),f(m,"credit.deposit.enabled"),p(e,t,m,a,o),r.n=7;break;case 6:r.p=6,h=r.v,l(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())}},1418:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(1169),g=b.battlesGetData,k=b.battlesGetGameDataSocket,w=b.battlesSendCreateSocket,S=b.battlesSendBotSocket,A=b.battlesSendJoinSocket,x=b.battlesSendCancelSocket,_=b.battlesInit;e.exports=function(e){e.of("/socket/battles").use(function(){var e=i(n().m((function e(t,r){var a,o,i,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,f("battles",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:return e.n=6,g(t.decoded);case 6:i=e.v,t.emit("init",{boxes:i.boxes,games:i.games,history:i.history}),r(),e.n=8;break;case 7:return e.p=7,c=e.v,e.a(2,r({success:!1,error:{type:"error",message:c.message}}));case 8:return e.a(2)}}),e,null,[[2,4],[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/battles").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("battles",r),t.on("getGameData",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,u.consume(i);case 2:if(r.p=2,s=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,c.findById(t.decoded._id).select("username avatar rank mute ban");case 3:s=r.v;case 4:l(s,!1),v(s),k(e,t,s,a,o),r.n=6;break;case 5:r.p=5,d=r.v,o({success:!1,error:{type:"error",message:d.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCreate",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.battles.enabled"),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBot",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.battles.enabled"),S(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendJoin",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.battles.enabled"),A(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCancel",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar btype rank limits anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.battles.enabled"),x(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("battles",r);case 1:return e.a(2)}}),e)}))))})),_(e)}},1454:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var s=r(7906),c=function(e){var t=Math.floor((new Date(e).getTime()-(new Date).getTime())/1e3);return t>60?"".concat(Math.floor(t/60)," minutes"):"".concat(t," seconds")};e.exports={generalCheckGetChatMessagesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.room||null===e.room||"string"!=typeof e.room||!1===["en","tr","de","es","beg","whale"].includes(e.room))throw new Error("Your entered chat room is invalid.")},generalCheckSendChatMessageData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.message||null===e.message||"string"!=typeof e.message||""===e.message.trim())throw new Error("Your entered chat message is invalid.");if(e.message.length>300)throw new Error("Your entered chat message is to long.")},generalCheckSendChatMessageRoom:function(e,t,r){if(null==r)throw new Error("Your entered chat room is invalid.");if(!1===["admin","mod"].includes(e.rank)&&!0!==t.chat.rooms[r].enabled)throw new Error("Your entered chat room is currently locked.");if("whale"===r&&e.stats.bet<1e9)throw new Error("Your need to have a minimum wager of 1,000,000 to use the whale chat.")},generalCheckSendChatMessageUser:function(e,t,r){if(void 0===e||void 0===t||void 0===r)throw new Error("Something went wrong. Please try again in a few seconds.");if(0>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of 1 to use the chat.");if(void 0!==e.mute&&void 0!==e.mute.expire&&new Date(e.mute.expire).getTime()>Date.now())throw new Error("You are still muted for another ".concat(c(e.mute.expire),"."));if("normal"===t.chat.mode&&"user"===e.rank&&void 0!==r[e._id.toString()]&&r[e._id.toString()]>Math.floor((new Date).getTime()-3e3))throw new Error("You can only send 1 message every 3 seconds.");if("slow"===t.chat.mode&&"user"===e.rank&&void 0!==r[e._id.toString()]&&r[e._id.toString()]>Math.floor((new Date).getTime()-6e3))throw new Error("You can only send 1 message every 6 seconds because the chat is in slow mode.")},generalCheckSendChatRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.messageId||null===e.messageId||"string"!=typeof e.messageId||!0!==s.isMongoId(e.messageId))throw new Error("Your entered chat message is invalid.")},generalCheckSendChatRemoveRoom:function(e){if(null==e)throw new Error("Your entered chat room is invalid.")},generalCheckSendChatRemoveMessage:function(e,t){if(!0!==t.some((function(t){return t._id.toString()===e.messageId.toString()})))throw new Error("Your entered chat message is not available.")},generalCheckSendChatClearRoom:function(e){if(null==e)throw new Error("Your entered chat room is invalid.")},generalCheckSendChatLockData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.value||null===e.value||"boolean"!=typeof e.value)throw new Error("Your entered chat lock value is invalid.")},generalCheckSendChatLockRoom:function(e,t,r){if(null==r)throw new Error("Your entered chat room is invalid.");if(e.value===t.chat.rooms[r].enabled)throw new Error("Your entered chat room is already ".concat(!0===e.value?"unlocked":"locked","."))},generalGetChatOnlineCount:function(e){return new Promise(function(){var t,r=(t=a().m((function t(r,n){var o;return a().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,Promise.all([e.of("/socket/general").in("en").allSockets(),e.of("/socket/general").in("tr").allSockets(),e.of("/socket/general").in("de").allSockets(),e.of("/socket/general").in("es").allSockets(),e.of("/socket/general").in("beg").allSockets(),e.of("/socket/general").in("whale").allSockets()]);case 1:o=t.v,r({en:Math.floor(1.6*o[0].size),tr:Math.floor(1.6*o[1].size),de:Math.floor(1.6*o[2].size),es:Math.floor(1.6*o[3].size),beg:Math.floor(1.6*o[4].size),whale:Math.floor(1.6*o[5].size)}),t.n=3;break;case 2:t.p=2,t.v,r({en:0,tr:0,de:0,es:0,beg:0,whale:0});case 3:return t.a(2)}}),t,null,[[0,2]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())},generalChatGetMuteTime:c,generalFilterMessage:function(e,t){var r,a=s.escape(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{for(o.s();!(r=o.n()).done;)for(var i=r.value,c=a.toLowerCase();!0===c.includes(i);){var u=c.indexOf(i);c=c.substring(0,u)+"*".repeat(i.length)+c.substring(u+i.length),a=a.substring(0,u)+"*".repeat(i.length)+a.substring(u+i.length)}}catch(e){o.e(e)}finally{o.f()}return a}}},1545:(e,t,r)=>{var n=r(6037),a=new n.Schema({items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}],user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UserInventory",a)},1550:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetPromoListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendPromoCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:" -#$"}))throw new Error("Your entered code is invalid.");if(void 0===e.reward||null===e.reward||!0===isNaN(e.reward)||Math.floor(e.reward)<10)throw new Error("Your entered code reward is invalid.");if(void 0===e.redeemptions||null===e.redeemptions||!0===isNaN(e.redeemptions)||Math.floor(e.redeemptions)<=0)throw new Error("Your entered code redeemptions is invalid.");if(void 0===e.level||null===e.level||!0===isNaN(e.level)||Math.floor(e.level)<0||Math.floor(e.level)>100)throw new Error("Your entered min level is invalid.");if(void 0===e.allowlevel||null===e.allowlevel||!0===isNaN(e.allowlevel)||0!=Math.floor(e.allowlevel)&&1!=Math.floor(e.allowlevel))throw new Error("Your entered allow level level is invalid.");if(void 0===e.ipallow||null===e.ipallow||!0===isNaN(e.ipallow)||0!=Math.floor(e.ipallow)&&1!=Math.floor(e.ipallow))throw new Error("Your entered allow level level is invalid.")},adminCheckSendPromoCreateCode:function(e){if(null!==e)throw new Error("Your entered code is already existing.")},adminCheckSendPromoRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.promoId||null===e.promoId||"string"!=typeof e.promoId||!0!==n.isMongoId(e.promoId))throw new Error("Your entered promo id is invalid.")},adminCheckSendPromoRemoveCode:function(e){if(null===e)throw new Error("Your entered code is not existing.")}}},1567:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetFilterListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendFilterCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.phrase||null===e.phrase||"string"!=typeof e.phrase||""===e.phrase.trim())throw new Error("Your entered filter phrase is invalid.")},adminCheckSendFilterCreateFilter:function(e){if(null!==e)throw new Error("Your entered filter prase is already existing.")},adminCheckSendFilterRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.filterId||null===e.filterId||"string"!=typeof e.filterId||!0!==n.isMongoId(e.filterId))throw new Error("Your entered filter id is invalid.")},adminCheckSendFilterRemoveFilter:function(e){if(null===e)throw new Error("Your entered filter id is not available.")}}},1572:e=>{"use strict";e.exports=require("nodemailer")},1590:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports={adminCheckGetStatsListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminFormatStats:function(e){var r,n={daily:{start:new Date,profit:0},weekly:{start:new Date((new Date).getTime()-6048e5),end:new Date,profit:0},monthly:{start:new Date((new Date).getTime()-2592e6),end:new Date,profit:0},total:{start:e.length>0?new Date(e[e.length-1].createdAt):new Date,end:new Date,profit:0}},a=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;n.total.profit=n.total.profit+Math.floor(o.stats.total.deposit-o.stats.total.withdraw),new Date(o.createdAt).getTime()>new Date((new Date).toISOString().slice(0,10)).getTime()-2592e6&&(n.monthly.profit=n.monthly.profit+Math.floor(o.stats.total.deposit-o.stats.total.withdraw),new Date(o.createdAt).getTime()>new Date((new Date).toISOString().slice(0,10)).getTime()-6048e5&&(n.weekly.profit=n.weekly.profit+Math.floor(o.stats.total.deposit-o.stats.total.withdraw),new Date(o.createdAt).toISOString().slice(0,10)===(new Date).toISOString().slice(0,10)&&(n.daily.profit=Math.floor(o.stats.total.deposit-o.stats.total.withdraw))))}}catch(e){a.e(e)}finally{a.f()}return n}}},1681:(e,t,r)=>{var n=r(7906);e.exports={generalCheckSendPromoClaimData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your entered captcha token is invalid.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:" -#$"}))throw new Error("Your entered promo code is invalid.")},generalCheckSendPromoClaimCode:function(e,t,r){if(null===t)throw new Error("Your entered promo code is not available.");if(t.redeemptionsTotal>=t.redeemptionsMax||r.filter((function(e){return e===t._id.toString()}))>=t.redeemptionsMax-t.redeemptionsTotal)throw new Error("Your entered promo code is not available.");if(!0===t.redeemers.some((function(t){return t.user.toString()===e._id.toString()})))throw new Error("Your have already claimed this promo code.");if(null==t.allowLevel||0==t.allowLevel){if(t.levelMin>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("Your need to have a minimum level of ".concat(t.levelMin," to use this promo code."))}else{if(1!=t.allowLevel)throw new Error("Something went wrong.");if(t.levelMin!=Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("Your need to have a level of ".concat(t.levelMin," to use this promo code."))}}}},1703:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(7252).Router(),c=r(5734).rateLimiterStrictMiddleware,u=r(9472).requestGetProxy,d=r(7587).captchaGetDataRoblox;e.exports=function(){return s.get("/iframe",function(){var e=i(n().m((function e(t,r){return n().w((function(e){for(;;)switch(e.n){case 0:try{r.render("captcha",{frontendUrl:process.env.SERVER_FRONTEND_URL.split(",")[0]})}catch(e){r.status(500).json({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),s.post("/api/arkose/fc/gt2/public_key/476068BF-9607-4799-B53D-966BE98E2B81",c,function(){var e=i(n().m((function e(t,r){var a,o,i,s,c,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.headers["x-forwarded-for"]||t.socket.remoteAddress,o=t.headers["cf-ipcountry"]||"XX",e.n=1,u(a,o);case 1:return i=e.v,s="http://".concat(i.username,":").concat(i.password,"@").concat(i.proxy_address,":").concat(i.port),t.body.data.blob=t.body.data.blob.replaceAll(" ","+"),t.body.site="https://www.roblox.com",e.n=2,d(s,t,t.body);case 2:c=e.v,r.send(c),e.n=4;break;case 3:e.p=3,l=e.v,r.status(500).json({success:!1,error:{type:"error",message:l.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r){return e.apply(this,arguments)}}()),s}},1814:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var c=r(2789),u=r(5182),d=r(286),l=r(7908).socketRemoveAntiSpam,f=r(7587),p=f.captchaCheckData,m=f.captchaGetData,h=r(1681),y=h.generalCheckSendPromoClaimData,v=h.generalCheckSendPromoClaimCode,b=[],g=function(){var e,t=(e=n().m((function e(t,r,a,i,s){var f,h,g,k,w,S,A,x,_;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,y(i),e.n=1,m(i.captcha);case 1:return f=e.v,p(f),e.n=2,u.findOne({code:i.code.toLowerCase()}).select("code reward levelMin redeemers redeemptionsTotal redeemptionsMax allowLevel ipRestricktLevel").populate({path:"redeemers",populate:{path:"user",select:"balance xp stats rakeback ips mute ban"}}).lean();case 2:if(h=e.v,v(a,h,b),0!==h.ipRestricktLevel){e.n=3;break}g=[],k=o(h.redeemers);try{for(k.s();!(w=k.n()).done;)S=w.value,g.push(S.user.ips[0].address)}catch(e){k.e(e)}finally{k.f()}if(!g.includes(a.ips[0].address)){e.n=3;break}throw new Error("You are detected to use more than 2 accounts");case 3:return e.p=3,b.push(h._id.toString()),e.n=4,Promise.all([c.findByIdAndUpdate(a._id,{$inc:{balance:h.reward,"limits.betToWithdraw":Math.floor(h.reward/2)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),u.findByIdAndUpdate(h._id,{$push:{redeemers:{user:a._id}},$inc:{redeemptionsTotal:1},updatedAt:(new Date).getTime()}),d.create({amount:h.reward,type:"promoCodeClaim",user:a._id,state:"completed"})]);case 4:A=e.v,t.of("/socket/general").to(a._id.toString()).emit("user",{user:A[0]}),s({success:!0}),b.splice(b.indexOf(h._id.toString()),1),l(a._id),e.n=6;break;case 5:e.p=5,x=e.v,b.splice(b.indexOf(h._id.toString()),1),l(r.decoded._id),s({success:!1,error:{type:"error",message:x.message}});case 6:e.n=8;break;case 7:e.p=7,_=e.v,l(r.decoded._id),s({success:!1,error:{type:"error",message:_.message}});case 8:return e.a(2)}}),e,null,[[3,5],[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e,r,n,a,o){return t.apply(this,arguments)}}();e.exports={generalSendPromoClaimSocket:g}},1889:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}r(2789);var i=r(6363),s=(r(3304),r(7908).socketRemoveAntiSpam),c=r(3534),u=c.cashierCheckSendCreditDepositData,d=c.cashierCreditCreateSignature,l=c.cashierCreditCreateTransaction,f=c.cashierCreditCreateUrl,p=function(){var e,t=(e=n().m((function e(t,r,a,o,c){var p,m,h,y,v,b;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,u(o),e.n=1,i.findOne({type:"deposit",user:a._id,state:"created"}).select("data type user state").lean();case 1:if(null!==(p=e.v)){e.n=4;break}return(m={userId:a._id.toString()}).signature=d(m),e.n=2,l(m);case 2:return h=e.v,e.n=3,i.create({data:{providerId:h.orderId,providerUrl:h.url},type:"deposit",user:a._id,state:"created"});case 3:p=(p=e.v).toObject();case 4:return y=String(Math.floor(o.amount)/1e3*3/1e3),e.n=5,f(p.data.providerUrl,y);case 5:v=e.v,c({success:!0,url:v}),s(a._id),e.n=7;break;case 6:e.p=6,b=e.v,s(r.decoded._id),c({success:!1,error:{type:"error",message:b.message}});case 7:return e.a(2)}}),e,null,[[0,6]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,r,n,a,o){return t.apply(this,arguments)}}();e.exports={cashierSendCreditDepositSocket:p}},1950:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckUserFullRank),f=u.socketCheckAntiSpam,p=u.socketRemoveAntiSpam,m=r(2997),h=m.adminGetLeaderboardListSocket,y=m.adminSendLeaderboardCreateSocket,v=m.adminSendLeaderboardStopSocket;e.exports=function(e,t){t.on("getLeaderboardList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["fulladmin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardCreate",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardStop",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},2003:e=>{"use strict";e.exports=require("path")},2054:e=>{e.exports={generalCheckSendVaultDepositData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid deposit amount.")},generalCheckSendVaultDepositUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(new Date(t.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t deposit because your vault is locked.")},generalCheckSendVaultWithdrawData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid withdraw amount.")},generalCheckSendVaultWithdrawUser:function(e,t){if(t.vault.amount<Math.floor(e.amount))throw new Error("You don’t have enough balance in the vault for this action.");if(new Date(t.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t withdraw because your vault is locked.")},generalCheckSendVaultLockData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<=0)throw new Error("You’ve entered an invalid lock time.")},generalCheckSendVaultLockUser:function(e){if(new Date(e.vault.expireAt).getTime()>=(new Date).getTime())throw new Error("You can’t lock because your vault is already locked.")}}},2057:e=>{"use strict";e.exports=require("https")},2226:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckAntiSpam,f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(2681),h=m.generalSendVaultDepositSocket,y=m.generalSendVaultWithdrawSocket,v=m.generalSendVaultLockSocket;e.exports=function(e,t){t.on("sendVaultDeposit",function(){var r=i(n().m((function r(a,o){var i,u,m,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 5:u=r.v,d(u,!0),p(u),h(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendVaultWithdraw",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 5:u=r.v,d(u,!0),p(u),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendVaultLock",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank balance vault mute ban").lean();case 5:u=r.v,d(u,!0),p(u),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},2256:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},outcomes:[{type:Number}],slot:{type:Number},game:{type:n.Schema.ObjectId,ref:"BattlesGame"},user:{type:n.Schema.ObjectId,ref:"User"},bot:{type:Boolean},btype:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BattlesBet",a)},2298:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},amountProcessed:{type:Number,default:0},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RobuxOffer",a)},2299:(e,t,r)=>{var n=r(6037),a=new n.Schema({outcome:{type:Number},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockNum:{type:String}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});a.virtual("bets",{ref:"RouletteBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("RouletteGame",a)},2328:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckAntiSpam),f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(9381),h=m.generalSendRainCreateSocket,y=m.generalSendRainTipSocket,v=m.generalSendRainJoinSocket;m.generalRainInit,e.exports=function(e,t){t.on("sendRainCreate",function(){var r=i(n().m((function r(a,o){var i,u,m,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank balance limits mute ban").lean();case 5:u=r.v,d(u,!0),p(u),h(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainTip",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank balance limits mute ban").lean();case 5:u=r.v,d(u,!0),p(u),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainJoin",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank xp stats limits mute ban").lean();case 5:u=r.v,d(u,!0),p(u),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},2396:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return d(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(d(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,d(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=l,d(p,"constructor",l),d(l,"constructor",c),c.displayName="GeneratorFunction",d(l,a,"GeneratorFunction"),d(p),d(p,a,"Generator"),d(p,n,(function(){return this})),d(p,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:o,m}})()}function d(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){d(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},d(e,t,r,n)}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var p=r(8749),m=r(2789),h=r(5632),y=r(3844),v=r(6232),b=r(5958),g=r(4823),k=r(827),w=r(6930),S=r(6363),A=r(5329),x=r(286),_=r(988),O=r(6966),j=r(6769),T=r(5964),P=r(8702),C=r(4946),I=r(3702),E=r(2256),D=r(2974),G=r(5241),M=r(8455),R=r(7908).socketRemoveAntiSpam,B=r(836),U=B.generalCheckGetUserInfoData,Y=B.generalCheckGetUserInfoUser,N=B.generalCheckGetUserBetsData,F=B.generalCheckGetUserTransactionsData,L=B.generalCheckSendUserAnonymousData,$=B.generalCheckSendUserDiscordData,q=B.generalCheckSendUserDiscordUser,J=B.generalCheckSendUserSeedData,K=B.generalCheckSendUserSeedGames,W=B.generalCheckSendUserTipData,V=B.generalCheckSendUserTipUser,H=B.generalCheckSendUserTipReceiver,z=B.userGetDiscordUserData,Q=B.generalUserGetFormated,X=B.generalSanitizeBets,Z=B.generalSanitizeUserSeed,ee=B.generalCheckSendUserBalanceModeData,te=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,U(a),e.n=1,m.findById(a.userId).select("roblox.id username avatar rank xp stats createdAt").lean();case 1:i=e.v,Y(i),i=Q(i),o({success:!0,user:i}),e.n=3;break;case 2:e.p=2,s=e.v,o({success:!1,error:{type:"error",message:s.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),re=function(){var e=f(u().m((function e(t,r,n,a,i){var c,d,l,f,p,m;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,N(a),e.n=1,Promise.all([_.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),O.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),j.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),T.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),P.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),C.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),I.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),E.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),D.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),G.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),M.countDocuments({payout:{$exists:!0,$ne:null},user:n._id}),_.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair.seed",select:"seedServer hash seedPublic"}}).lean(),O.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair.seed",select:"seedServer hash seedPublic"}}).lean(),j.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair"}).lean(),T.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair"}).lean(),P.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout deck revealed fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),C.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout deck revealed fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),I.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout outcome fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),E.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout outcomes fair user createdAt").populate({path:"game",select:"fair"}).lean(),D.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout outcome items fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),G.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout fair user createdAt").populate({path:"fair.seed",select:"seedClient seedServer hash state"}).lean(),M.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({createdAt:-1}).limit(8*a.page).select("amount payout actions game user createdAt").populate({path:"game",select:"fair state",populate:{path:"fair",select:"seedServer hash seedPublic"}}).lean()]);case 1:c=e.v,d=c.slice(0,10).reduce((function(e,t){return e+t}),0),(l=[].concat(s(c[11].map((function(e){return o(o({},e),{},{method:"crash"})}))),s(c[12].map((function(e){return o(o({},e),{},{method:"roll"})}))),s(c[13].map((function(e){return o(o({},e),{},{method:"blackjack"})}))),s(c[14].map((function(e){return o(o({},e),{},{method:"duels"})}))),s(c[15].map((function(e){return o(o({},e),{},{method:"mines"})}))),s(c[16].map((function(e){return o(o({},e),{},{method:"towers"})}))),s(c[17].map((function(e){return o(o({},e),{},{method:"unbox"})}))),s(c[18].map((function(e){return o(o({},e),{},{method:"battles"})}))),s(c[19].map((function(e){return o(o({},e),{},{method:"upgrader"})}))),s(c[20].map((function(e){return o(o({},e),{},{method:"plinko"})}))),s(c[21].map((function(e){return o(o({},e),{},{method:"roulette"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=8*(a.page-1),p=8*a.page,l=l.slice(f,p),l=X(l),i({success:!0,count:d,bets:l}),e.n=3;break;case 2:e.p=2,m=e.v,i({success:!1,error:{type:"error",message:m.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ne=function(){var e=f(u().m((function e(t,r,n,a,i){var c,d,l,f,p,m;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,F(a),e.n=1,Promise.all([y.countDocuments({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}),v.countDocuments({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}),b.countDocuments({user:n._id,state:"completed"}),g.countDocuments({user:n._id,state:"completed"}),k.countDocuments({user:n._id,state:"completed"}),w.countDocuments({user:n._id,state:"completed"}),S.countDocuments({user:n._id,state:"completed"}),A.countDocuments({$or:[{"sender.user":n._id},{"receiver.user":n._id}],state:"completed"}),x.countDocuments({user:n._id,state:"completed"}),y.find({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount data deposit withdraw state createdAt").lean(),v.find({$or:[{"deposit.user":n._id},{"withdraw.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount data deposit withdraw state createdAt").lean(),b.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount data type user state createdAt").lean(),g.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount data type user state createdAt").lean(),k.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount type user state createdAt").lean(),w.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount data type user state createdAt").lean(),S.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount data type user state createdAt").lean(),A.find({$or:[{"sender.user":n._id},{"receiver.user":n._id}],state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount sender receiver state createdAt").lean(),x.find({user:n._id,state:"completed"}).sort({createdAt:-1}).limit(8*a.page).select("amount type user state createdAt").lean()]);case 1:c=e.v,d=c.slice(0,9).reduce((function(e,t){return e+t}),0),(l=[].concat(s(c[9].map((function(e){return o(o({},e),{},{method:"robux"})}))),s(c[10].map((function(e){return o(o({},e),{},{method:"limited"})}))),s(c[11].map((function(e){return o(o({},e),{},{method:"steam"})}))),s(c[12].map((function(e){return o(o({},e),{},{method:"crypto"})}))),s(c[13].map((function(e){return o(o({},e),{},{method:"depositBonus"})}))),s(c[14].map((function(e){return o(o({},e),{},{method:"gift"})}))),s(c[15].map((function(e){return o(o({},e),{},{method:"credit"})}))),s(c[16].map((function(e){return o(o({},e),{},{method:"tip"})}))),s(c[17].map((function(e){return o(o({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=8*(a.page-1),p=8*a.page,l=l.slice(f,p),i({success:!0,count:d,transactions:l}),e.n=3;break;case 2:e.p=2,m=e.v,i({success:!1,error:{type:"error",message:m.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ae=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([h.findOne({user:n._id,state:"active"}).select("seedClient seedServer hash nonce user state").lean(),h.findOne({user:n._id,state:"created"}).select("seedClient seedServer hash nonce user state").lean()]);case 1:i=e.v,o({success:!0,seed:Z(i[0])}),e.n=3;break;case 2:e.p=2,s=e.v,o({success:!1,error:{type:"error",message:s.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),oe=function(){var e=f(u().m((function e(t,r,n,a,o){var i;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,L(a),e.n=1,m.findByIdAndUpdate(n._id,{anonymous:a.anonymous});case 1:o({success:!0,anonymous:a.anonymous}),R(n._id),e.n=3;break;case 2:e.p=2,i=e.v,R(r.decoded._id),o({success:!1,error:{type:"error",message:i.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ie=function(){var e=f(u().m((function e(t,r,n,a,o){var i;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,ee(a),e.n=1,m.findByIdAndUpdate(n._id,{btype:a.btype});case 1:o({success:!0,btype:a.btype}),R(n._id),e.n=3;break;case 2:e.p=2,i=e.v,R(r.decoded._id),o({success:!1,error:{type:"error",message:i.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),se=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s,c,d;return u().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,$(a),q(a,n),i=null,"link"!==a.method){e.n=2;break}return e.n=1,z(a.tokenDiscord);case 1:s=e.v,i={discordId:s.id,updatedAt:(new Date).getTime()},e.n=3;break;case 2:i={$unset:{discordId:1},updatedAt:(new Date).getTime()};case 3:return e.n=4,m.findByIdAndUpdate(n._id,i,{new:!0}).select("roblox.id discordId username rank balance stats rakeback fair anonymous agreed mute ban updatedAt createdAt").lean();case 4:c=e.v,o({success:!0,user:c}),R(n._id),e.n=6;break;case 5:e.p=5,d=e.v,R(r.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ce=function(){var e=f(u().m((function e(t,r,n,a,o){var i,c,d;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,J(a),e.n=1,Promise.all([h.findOne({user:n._id,state:"created"}).select("user state").lean(),h.findOne({user:n._id,state:"active"}).select("user state").lean(),P.find({user:n._id,state:{$ne:"completed"}}).select("state").lean(),C.find({user:n._id,state:{$ne:"completed"}}).select("state").lean()]);case 1:return i=e.v,K([].concat(s(i[2]),s(i[3]))),e.n=2,Promise.all([h.findByIdAndUpdate(i[1]._id,{seedClient:a.seedClient.trim(),updatedAt:new Date},{new:!0}).select("seedClient seedServer hash nonce").lean()]);case 2:c=e.v,o({success:!0,seed:Z(c[0])}),R(n._id),e.n=4;break;case 3:e.p=3,d=e.v,R(r.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ue=function(){var e=f(u().m((function e(t,r,n,a,o){var i,c,d,l,f;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([h.findOne({user:n._id,state:"created"}).select("user state").lean(),h.findOne({user:n._id,state:"active"}).select("user state").lean(),P.find({user:n._id,state:{$ne:"completed"}}).select("state").lean(),C.find({user:n._id,state:{$ne:"completed"}}).select("state").lean()]);case 1:return i=e.v,K([].concat(s(i[2]),s(i[3]))),c=p.randomBytes(24).toString("hex"),d=p.createHash("sha256").update(c).digest("hex"),e.n=2,Promise.all([h.findByIdAndUpdate(i[1]._id,{seedServer:c,hash:d,updatedAt:new Date},{new:!0}).select("seedClient seedServer hash nonce").lean()]);case 2:l=e.v,o({success:!0,seed:Z(l[0])}),R(n._id),e.n=4;break;case 3:e.p=3,f=e.v,R(r.decoded._id),o({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),de=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s,c,d;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,W(a),V(a,n),e.n=1,m.findById(a.receiverId).select("balance ban");case 1:return i=e.v,H(n,i),s=Math.floor(a.amount),e.n=2,Promise.all([m.findByIdAndUpdate(n._id,{$inc:{balance:-s,"limits.limitTip":n.limits.limitTip>s?-s:-n.limits.limitTip},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),m.findByIdAndUpdate(i._id,{$inc:{balance:s,"limits.betToWithdraw":s},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),A.create({amount:s,sender:{user:n._id},receiver:{user:i._id},user:n._id,state:"completed"})]);case 2:(c=e.v)[2]=c[2].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:c[0]}),t.of("/socket/general").to(c[1]._id.toString()).emit("user",{user:c[1]}),t.of("/socket/general").to(c[1]._id.toString()).emit("userTip",{transaction:c[2]}),o({success:!0,transaction:c[2]}),R(n._id),e.n=4;break;case 3:e.p=3,d=e.v,R(r.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={generalGetUserInfoSocket:te,generalGetUserBetsSocket:re,generalGetUserTransactionsSocket:ne,generalGetUserSeedSocket:ae,generalSendUserAnonymousSocket:oe,generalSendUserDiscordSocket:se,generalSendUserClientSeedSocket:ce,generalSendUserServerSeedSocket:ue,generalSendUserTipSocket:de,generalSendUserBalanceModeSocket:ie}},2507:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(4229);e.exports={fairGetData:function(){return new Promise(function(){var e=i(n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,s("https://eos.greymass.com/",{headers:{"Content-Type":"application/json"}});case 1:if(void 0===(a=e.v)||200!==a.status){e.n=3;break}return e.n=2,a.json();case 2:o=e.v,t({success:!0,data:o}),e.n=4;break;case 3:r();case 4:e.n=6;break;case 5:e.p=5,i=e.v,r(i);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}())},fairGetBlockData:function(e){return new Promise(function(){var t=i(n().m((function t(r,a){var o,i,c;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,s("https://eos.greymass.com/v1/chain/get_block",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({block_num_or_id:e})});case 1:if(void 0===(o=t.v)||200!==o.status){t.n=3;break}return t.n=2,o.json();case 2:i=t.v,r({success:!0,data:i}),t.n=4;break;case 3:a(new Error("Failed to fetch block data"));case 4:t.n=6;break;case 5:t.p=5,c=t.v,a(c);case 6:return t.a(2)}}),t,null,[[0,5]])})));return function(e,r){return t.apply(this,arguments)}}())}}},2541:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return c(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,c(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,c(p,"constructor",l),c(l,"constructor",d),d.displayName="GeneratorFunction",c(l,a,"GeneratorFunction"),c(p),c(p,a,"Generator"),c(p,n,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},c(e,t,r,n)}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var p=r(7906),m=r(2789),h=r(3844),y=r(6232),v=r(5958),b=r(4823),g=r(827),k=r(6930),w=r(6363),S=r(5329),A=r(286),x=r(988),_=r(6966),O=r(8455),j=r(6769),T=r(5964),P=r(8702),C=r(4946),I=r(3702),E=r(2256),D=r(2974),G=r(5241),M=r(7908).socketRemoveAntiSpam,R=r(7986),B=R.adminCheckGetUserListData,U=R.adminCheckGetUserDataData,Y=R.adminCheckGetUserDataUser,N=R.adminCheckGetUserTransactionsData,F=R.adminCheckGetUserGamesData,L=R.adminCheckSendUserValueData,$=R.adminCheckSendUserBalanceData,q=R.adminCheckSendUserBalanceUser,J=R.adminCheckSendUserMuteData,K=R.adminCheckSendUserBanData,W=R.adminFormatUserSort,V=function(){var e=f(s().m((function e(t,r,n,a,o){var i,c,d,l,f,h;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,B(a),i=12*(a.page-1),c=W(a.sort),d=n.fullrank,l={$or:[{"roblox.id":{$regex:a.search,$options:"i"}},{username:{$regex:a.search,$options:"i"}},{"ips.address":{$regex:a.search,$options:"i"}}]},"fulladmin"!==d&&(l={$and:[{$or:[{"roblox.id":{$regex:a.search,$options:"i"}},{username:{$regex:a.search,$options:"i"}},{"ips.address":{$regex:a.search,$options:"i"}}]},{rank:"partner"}]}),!0===p.isMongoId(a.search)&&(l.$or=[].concat(u(l.$or),[{_id:a.search}])),e.n=1,Promise.all([m.countDocuments(l),m.find(l).sort(c).limit(12).skip(i).select("local.email local.emailVerified roblox.id discord.id username avatar balance fbalance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt affiliates").populate({path:"affiliates.referrer",select:"username"}).lean()]);case 1:f=e.v,o({success:!0,count:f[0],users:f[1]}),e.n=3;break;case 2:e.p=2,h=e.v,o({success:!1,error:{type:"error",message:h.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),H=function(){var e=f(s().m((function e(t,r,n,a,o){var i,c;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,U(a),e.n=1,m.findById(a.userId).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 1:i=e.v,Y(i),o({success:!0,data:i}),e.n=3;break;case 2:e.p=2,c=e.v,o({success:!1,error:{type:"error",message:c.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),z=function(){var e=f(s().m((function e(t,r,n,a,i){var c,d,l,f,p,m;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,N(a),e.n=1,Promise.all([h.countDocuments({$or:[{"deposit.user":a.userId},{"withdraw.user":a.userId}],state:{$in:["canceled","completed"]}}),y.countDocuments({$or:[{"deposit.user":a.userId},{"withdraw.user":a.userId}],state:{$in:["sent","canceled","completed"]}}),v.countDocuments({user:a.userId,state:"completed"}),b.countDocuments({user:a.userId,state:"completed"}),g.countDocuments({state:"completed"}),k.countDocuments({user:a.userId,state:"completed"}),w.countDocuments({user:a.userId,state:"completed"}),S.countDocuments({$or:[{"sender.user":a.userId},{"receiver.user":a.userId}],state:"completed"}),A.countDocuments({user:a.userId,state:"completed"}),h.find({$or:[{"deposit.user":a.userId},{"withdraw.user":a.userId}],state:{$in:["canceled","completed"]}}).sort({createdAt:-1}).limit(14*a.page).select("amount data deposit withdraw state createdAt").lean(),y.find({$or:[{"deposit.user":a.userId},{"withdraw.user":a.userId}],state:{$in:["sent","canceled","completed"]}}).sort({createdAt:-1}).limit(14*a.page).select("amount data deposit withdraw state createdAt").lean(),v.find({user:a.userId,state:"completed"}).sort({createdAt:-1}).limit(14*a.page).select("amount data type user state createdAt").lean(),b.find({user:a.userId,state:"completed"}).sort({createdAt:-1}).limit(14*a.page).select("amount data type user state createdAt").lean(),g.find({user:a.userId,state:"completed"}).sort({createdAt:-1}).limit(14*a.page).select("amount type user state createdAt").lean(),k.find({user:a.userId,state:"completed"}).sort({createdAt:-1}).limit(14*a.page).select("amount data type user state createdAt").lean(),w.find({user:a.userId,state:"completed"}).sort({createdAt:-1}).limit(14*a.page).select("amount data type user state createdAt").lean(),S.find({$or:[{"sender.user":a.userId},{"receiver.user":a.userId}],state:"completed"}).sort({createdAt:-1}).limit(14*a.page).select("amount sender receiver state createdAt").populate({path:"sender.user",select:"username"}).populate({path:"receiver.user",select:"username"}).lean(),A.find({user:a.userId,state:"completed"}).sort({createdAt:-1}).limit(14*a.page).select("amount type user state createdAt").lean()]);case 1:c=e.v,d=c.slice(0,9).reduce((function(e,t){return e+t}),0),(l=[].concat(u(c[9].map((function(e){return o(o({},e),{},{method:"robux"})}))),u(c[10].map((function(e){return o(o({},e),{},{method:"limited"})}))),u(c[11].map((function(e){return o(o({},e),{},{method:"steam"})}))),u(c[12].map((function(e){return o(o({},e),{},{method:"crypto"})}))),u(c[13].map((function(e){return o(o({},e),{},{method:"depositBonus"})}))),u(c[14].map((function(e){return o(o({},e),{},{method:"gift"})}))),u(c[15].map((function(e){return o(o({},e),{},{method:"credit"})}))),u(c[16].map((function(e){return o(o({},e),{},{method:"tip"})}))),u(c[17].map((function(e){return o(o({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=14*(a.page-1),p=14*a.page,l=l.slice(f,p),i({success:!0,count:d,transactions:l}),e.n=3;break;case 2:e.p=2,m=e.v,i({success:!1,error:{type:"error",message:m.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Q=function(){var e=f(s().m((function e(t,r,n,a,i){var c,d,l,f,p,m;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,F(a),e.n=1,Promise.all([x.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),_.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),j.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),T.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),P.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),C.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),I.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),E.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),D.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),G.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),O.countDocuments({payout:{$exists:!0,$ne:null},user:a.userId}),x.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout multiplier user game createdAt").lean(),_.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user game multiplier createdAt").lean(),j.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout multiplier actions user game createdAt").lean(),T.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user game multiplier createdAt").lean(),P.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user multiplier createdAt").lean(),C.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user multiplier createdAt").lean(),I.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user multiplier createdAt").lean(),E.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user game multiplier createdAt").lean(),D.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user game multiplier createdAt").lean(),G.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout user game multiplier createdAt").lean(),O.find({payout:{$exists:!0,$ne:null},user:a.userId}).sort({createdAt:-1}).limit(14*a.page).select("amount payout multiplier user game createdAt").lean()]);case 1:c=e.v,d=c.slice(0,9).reduce((function(e,t){return e+t}),0),(l=[].concat(u(c[11].map((function(e){return o(o({},e),{},{method:"crash"})}))),u(c[12].map((function(e){return o(o({},e),{},{method:"roll"})}))),u(c[13].map((function(e){return o(o({},e),{},{method:"blackjack"})}))),u(c[14].map((function(e){return o(o({},e),{},{method:"duels"})}))),u(c[15].map((function(e){return o(o({},e),{},{method:"mines"})}))),u(c[16].map((function(e){return o(o({},e),{},{method:"towers"})}))),u(c[17].map((function(e){return o(o({},e),{},{method:"unbox"})}))),u(c[18].map((function(e){return o(o({},e),{},{method:"battles"})}))),u(c[19].map((function(e){return o(o({},e),{},{method:"upgrader"})}))),u(c[20].map((function(e){return o(o({},e),{},{method:"plinko"})}))),u(c[21].map((function(e){return o(o({},e),{},{method:"roulette"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=14*(a.page-1),p=14*a.page,l=l.slice(f,p),i({success:!0,count:d,games:l}),e.n=3;break;case 2:e.p=2,m=e.v,i({success:!1,error:{type:"error",message:m.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),X=function(){var e=f(s().m((function e(t,r,n,a,o){var c,u;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,L(a),e.n=1,m.findByIdAndUpdate(a.userId,i({},a.setting,a.value),{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 1:c=e.v,o({success:!0,user:c}),M(n._id),e.n=3;break;case 2:e.p=2,u=e.v,M(n._id),o({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Z=function(){var e=f(s().m((function e(t,r,n,a,o){var i,c,u,d;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,$(a),e.n=1,m.findById(a.userId).select("balance").lean();case 1:return i=e.v,q(i),c=Math.floor(a.balance),e.n=2,Promise.all([m.findByIdAndUpdate(i._id,{balance:c},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance fbalance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),A.create({amount:Math.floor(c-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 2:u=e.v,t.of("/socket/general").to(i._id.toString()).emit("user",{user:u[0]}),o({success:!0,user:u[0]}),M(n._id),e.n=4;break;case 3:e.p=3,d=e.v,M(n._id),o({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ee=function(){var e=f(s().m((function e(t,r,n,a,o){var i,c,u,d;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,$(a),e.n=1,m.findById(a.userId).select("balance").lean();case 1:return i=e.v,q(i),c=Math.floor(a.balance),e.n=2,Promise.all([m.findByIdAndUpdate(i._id,{fbalance:c},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance fbalance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),A.create({amount:Math.floor(c-i.balance),type:"adminFreebalance",user:i._id,state:"completed"})]);case 2:u=e.v,t.of("/socket/general").to(i._id.toString()).emit("user",{user:u[0]}),o({success:!0,user:u[0]}),M(n._id),e.n=4;break;case 3:e.p=3,d=e.v,M(n._id),o({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),te=function(){var e=f(s().m((function e(t,r,n,a,o){var i,c,u,d;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,$(a),e.n=1,m.findById(a.userId).select("balance").lean();case 1:return i=e.v,q(i),c=a.balance,e.n=2,Promise.all([m.findByIdAndUpdate(i._id,{"affiliates.depobonus":c},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean(),A.create({amount:Math.floor(c-i.balance),type:"adminAdjust",user:i._id,state:"completed"})]);case 2:u=e.v,t.of("/socket/general").to(i._id.toString()).emit("user",{user:u[0]}),o({success:!0,user:u[0]}),M(n._id),e.n=4;break;case 3:e.p=3,d=e.v,M(n._id),o({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),re=function(){var e=f(s().m((function e(t,r,n,a,o){var i,c,u;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,J(a),i=(new Date).getTime()+1e3*Math.floor(a.time),e.n=1,m.findByIdAndUpdate(a.userId,{mute:{expire:i,reason:a.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 1:c=e.v,o({success:!0,user:c}),M(n._id),e.n=3;break;case 2:e.p=2,u=e.v,M(r.decoded._id),o({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ne=function(){var e=f(s().m((function e(t,r,n,a,o){var i,c,u;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,K(a),i=(new Date).getTime()+1e3*Math.floor(a.time),e.n=1,m.findByIdAndUpdate(a.userId,{ban:{expire:i,reason:a.reason}},{new:!0}).select("local.email local.emailVerified roblox.id discord.id username avatar balance xp vault rank stats leaderboard limits ips mute ban updatedAt createdAt").lean();case 1:c=e.v,o({success:!0,user:c}),M(n._id),e.n=3;break;case 2:e.p=2,u=e.v,M(r.decoded._id),o({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetUserListSocket:V,adminGetUserDataSocket:H,adminGetUserTransactionListSocket:z,adminGetUserGameListSocket:Q,adminSendUserValueSocket:X,adminSendUserBalanceSocket:Z,adminSendAffiliateBonusSocket:te,adminSendUserMuteSocket:re,adminSendUserBanSocket:ne,adminSendUserFreeBalanceSocket:ee}},2566:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckUserRank,f=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),p=u.socketRemoveAntiSpam,m=r(6245),h=m.adminGetAffiliateListSocket,y=m.adminSendAffiliateBlockSocket,v=m.adminSendAffiliateClearSocket,b=m.adminSendAffiliateCodeSocket,g=m.adminSendAffiliateAvailableSocket,k=m.adminGetAffiliateItemSocket,w=m.adminSendAffiliateCashSocket;e.exports=function(e,t){t.on("getAffiliateList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getAffiliateItem",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),k(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateBlock",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClear",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCode",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateAvailable",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),g(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCash",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),w(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},2577:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckAntiSpam),f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(9974),h=m.cashierGetRobuxDataSocket,y=m.cashierSendRobuxDepositSocket,v=m.cashierSendRobuxWithdrawSocket,b=m.cashierSendRobuxCancelSocket;e.exports=function(e,t){t.on("getRobuxData",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("roblox.id username avatar rank proxy mute ban");case 3:u=r.v;case 4:d(u,!0),p(u),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxDeposit",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban stats").lean();case 5:u=r.v,d(u,!0),p(u,"robux.deposit.enabled"),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxWithdraw",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank balance limits proxy mute ban stats").lean();case 5:u=r.v,d(u,!0),p(u,"robux.withdraw.enabled"),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRobuxCancel",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),p(u),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},2622:(e,t,r)=>{var n=r(7252).Router();e.exports=function(e){return n.get("/",(function(e,t){t.status(200).json({success:!0})})),n.use("/captcha",r(1703)()),n.use("/auth",r(585)()),n.use("/leaderboard",r(7558)()),n.use("/callback",r(1160)(e)),n}},2681:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=(r(286),r(7908).socketRemoveAntiSpam),u=r(2054),d=u.generalCheckSendVaultDepositData,l=u.generalCheckSendVaultDepositUser,f=u.generalCheckSendVaultWithdrawData,p=u.generalCheckSendVaultWithdrawUser,m=u.generalCheckSendVaultLockData,h=u.generalCheckSendVaultLockUser,y=function(){var e=i(n().m((function e(t,r,a,o,i){var u,f,p;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,d(o),l(o,a),u=Math.floor(o.amount),e.n=1,s.findByIdAndUpdate(a._id,{$inc:{balance:-u,"vault.amount":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 1:f=e.v,i({success:!0,user:f}),c(a._id),e.n=3;break;case 2:e.p=2,p=e.v,c(r.decoded._id),i({success:!1,error:{type:"error",message:p.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),v=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,f(o),p(o,a),u=Math.floor(o.amount),e.n=1,s.findByIdAndUpdate(a._id,{$inc:{balance:u,"vault.amount":-u},updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 1:d=e.v,i({success:!0,user:d}),c(a._id),e.n=3;break;case 2:e.p=2,l=e.v,c(r.decoded._id),i({success:!1,error:{type:"error",message:l.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),b=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,m(o),h(a),u=Math.floor(o.time),e.n=1,s.findByIdAndUpdate(a._id,{"vault.expireAt":(new Date).getTime()+u,updatedAt:(new Date).getTime()},{new:!0}).select("balance vault").lean();case 1:d=e.v,i({success:!0,user:d}),c(a._id),e.n=3;break;case 2:e.p=2,l=e.v,c(r.decoded._id),i({success:!1,error:{type:"error",message:l.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={generalSendVaultDepositSocket:y,generalSendVaultWithdrawSocket:v,generalSendVaultLockSocket:b}},2724:(e,t,r)=>{function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(i(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,i(p,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,n,(function(){return this})),i(p,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:s,m}})()}function i(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){i(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},i(e,t,r,n)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}var u=r(7906),d=r(7252).Router(),l=r(2789),f=r(4276).authorizeUser,p=r(5734).rateLimiterStrictMiddleware,m=r(9472).requestGetProxy,h=r(84).authGenerateJwtToken,y=r(168),v=y.authCheckPostRobloxData,b=y.authCheckPostRobloxUser,g=y.authCheckPostRobloxTwoStepData,k=y.authCheckPostRobloxTwoStepUser,w=y.authCheckPostRobloxCookieData,S=y.authCheckPostRobloxCookieUser,A=y.authSetUser,x=y.authRobloxGetIntent,_=y.authRobloxGetToken,O=y.authRobloxGetUser,j=y.authRobloxGetUserAge,T=y.authRobloxGetAvatar,P=y.authRobloxGetServerNonce,C=y.authGetRobloxSecurityQuestion,I=y.authGetRobloxGamesData,E=y.authSendRobloxChallengeContinue,D=y.authSendRobloxSecurityAnswer,G=y.authSendRobloxTwoStepVerify,M=y.authSendRobloxLogin,R=y.authSendRobloxTwoStepLogin;y.authRobloxGetUserDefault,e.exports=function(){return d.post("/",[p,f(!1)],function(){var e=c(o().m((function e(t,r){var n,a,i,s,c,d,f,p,y,g,k,w,S,G,R,B,U;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,v(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,a=t.headers["cf-ipcountry"]||"XX",e.n=1,m(n,a);case 1:return i=e.v,s="http://".concat(i.username,":").concat(i.password,"@").concat(i.proxy_address,":").concat(i.port),e.n=2,_(s);case 2:if(c=e.v,d={ctype:"Username",cvalue:t.body.username,password:t.body.password},"captcha"!==t.body.step&&"security"!==t.body.step){e.n=4;break}return d.captchaProvider="PROVIDER_ARKOSE_LABS",d.captchaId=t.body.captchaId,d.captchaToken=t.body.captchaToken,d.challengeId=t.body.challengeId,d.challengeType="captcha",d.challengeMetadata=JSON.stringify({unifiedCaptchaId:d.captchaId,captchaToken:d.captchaToken,actionType:"Login"}),e.n=3,E(s,c,null,d);case 3:e.n=7;break;case 4:return e.n=5,P(s);case 5:return f=e.v,e.n=6,x(f);case 6:d.secureAuthenticationIntent=e.v;case 7:if("security"!==t.body.step){e.n=9;break}return e.n=8,D(c,s,{answer:t.body.answer,userId:t.userId,sessionId:t.body.sessionId});case 8:p=e.v,d.securityQuestionSessionId=t.body.sessionId,d.securityQuestionRedemptionToken=p.securityQuestionRedemptionToken;case 9:return e.n=10,M(t,c,s,d);case 10:if(void 0===(y=e.v).captchaId){e.n=11;break}r.status(200).json({success:!0,step:"captcha",challengeId:y.challengeId,captchaId:y.captchaId,captchaBlob:y.captchaBlob,secureAuthenticationIntent:y.secureAuthenticationIntent}),e.n=22;break;case 11:if(void 0===y.sessionId){e.n=14;break}return e.n=12,C(c,s,y.userId,y.sessionId);case 12:return g=e.v,e.n=13,I(c,s,g.answerChoices);case 13:k=(k=e.v).map((function(e){return{id:e.id,name:e.name,description:e.description}})),r.status(200).json({success:!0,step:"security",challengeId:t.body.challengeId,captchaId:t.body.captchaId,captchaToken:t.body.captchaToken,sessionId:y.sessionId,userId:y.userId,answers:k}),e.n=22;break;case 14:if(void 0===y.twoStepVerificationData){e.n=15;break}r.status(200).json({success:!0,step:"twostep",type:y.twoStepVerificationData.mediaType,ticket:y.twoStepVerificationData.ticket,robloxId:y.user.id}),e.n=22;break;case 15:return console.log("1111"),e.n=16,O(s,y.cookie);case 16:return w=e.v,e.n=17,Promise.all([j(s,w.id),T(s,w.id)]);case 17:if(S=e.v,null===t.user){e.n=20;break}return e.n=18,Promise.all([l.findById(t.user._id).select("roblox.id").lean(),l.findOne({"roblox.id":w.id}).select("roblox.id").lean()]);case 18:return G=e.v,b(G[0],G[1]),e.n=19,l.findByIdAndUpdate(t.user._id,{roblox:{id:w.id,cookie:y.cookie,createdAt:new Date(S[0]).getTime()},username:u.escape(w.name),avatar:S[1],proxy:s,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 19:G=e.v,r.status(200).json({success:!0,user:G}),e.n=22;break;case 20:return e.n=21,A(s,n,y.cookie,w,S[0],S[1]);case 21:R=e.v,B=h(R._id),r.status(200).json({success:!0,token:B,user:R});case 22:e.n=24;break;case 23:e.p=23,U=e.v,r.status(500).json({success:!1,error:{type:"error",message:U.message}});case 24:return e.a(2)}}),e,null,[[0,23]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/twostep",[p,f(!1)],function(){var e=c(o().m((function e(t,r){var n,a,i,s,c,d,f,p,y,v,b,w,S,x;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,g(t.body),n=t.headers["x-forwarded-for"]||t.socket.remoteAddress,a=t.headers["cf-ipcountry"]||"XX",e.n=1,m(n,a);case 1:return i=e.v,s="http://".concat(i.username,":").concat(i.password,"@").concat(i.proxy_address,":").concat(i.port),e.n=2,_(s);case 2:return c=e.v,d={actionType:"Login",challengeId:t.body.ticket,code:t.body.code},e.n=3,G(s,c,null,t.body.robloxId,t.body.type,d);case 3:return f=e.v,d={challengeId:d.challengeId,verificationToken:f.verificationToken,rememberDevice:!0},e.n=4,R(c,s,t.body.robloxId,d);case 4:return p=e.v,e.n=5,O(s,p.cookie);case 5:return y=e.v,e.n=6,Promise.all([j(s,y.id),T(s,y.id)]);case 6:if(v=e.v,null===t.user){e.n=9;break}return e.n=7,Promise.all([l.findById(t.user._id).select("roblox.id").lean(),l.findOne({"roblox.id":y.id}).select("roblox.id").lean()]);case 7:return b=e.v,k(b[0],b[1]),e.n=8,l.findByIdAndUpdate(t.user._id,{roblox:{id:y.id,cookie:p.cookie,createdAt:new Date(v[0]).getTime()},username:u.escape(y.name),avatar:v[1],proxy:s,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 8:b=e.v,r.status(200).json({success:!0,user:b}),e.n=11;break;case 9:return e.n=10,A(s,n,p.cookie,y,v[0],v[1]);case 10:w=e.v,S=h(w._id),r.status(200).json({success:!0,token:S,user:w});case 11:e.n=13;break;case 12:e.p=12,x=e.v,r.status(500).json({success:!1,error:{type:"error",message:x.message}});case 13:return e.a(2)}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}()),d.post("/cookie",[p,f(!1)],function(){var e=c(o().m((function e(t,r){var a,i,s,c,d,f,p,y,v,b,g,k,x,_;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,w(t.body),a=t.headers["x-forwarded-for"]||t.socket.remoteAddress,i=t.headers["cf-ipcountry"]||"XX",e.n=1,m(a,i);case 1:return s=e.v,console.log("user proxy: ",s),c="http://".concat(s.username,":").concat(s.password,"@").concat(s.proxy_address,":").concat(s.port),d=t.body.cookie.replace(".ROBLOSECURITY=_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_",""),e.n=2,O(c,d);case 2:return f=e.v,p=n(f,2),y=p[0],v=p[1],console.log("roblox user: ",y),t.body.cookie=v,e.n=3,Promise.all([j(c,y.id),T(c,y.id)]);case 3:if(b=e.v,null===t.user){e.n=6;break}return e.n=4,Promise.all([l.findById(t.user._id).select("roblox.id").lean(),l.findOne({"roblox.id":y.id}).select("roblox.id").lean()]);case 4:return g=e.v,S(g[0],g[1]),e.n=5,l.findByIdAndUpdate(t.user._id,{roblox:{id:y.id,cookie:t.body.cookie,createdAt:new Date(b[0]).getTime()},username:u.escape(y.name),avatar:b[1],proxy:c,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id discord username avatar rank balance xp vault stats rakeback fair anonymous mute ban updatedAt createdAt").lean();case 5:g=e.v,r.status(200).json({success:!0,user:g}),e.n=8;break;case 6:return e.n=7,A(c,a,t.body.cookie,y,b[0],b[1]);case 7:k=e.v,x=h(k._id),r.status(200).json({success:!0,token:x,user:k});case 8:e.n=10;break;case 9:e.p=9,_=e.v,r.status(500).json({success:!1,error:{type:"error",message:_.message}});case 10:return e.a(2)}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}()),d}},2725:(e,t,r)=>{var n=r(6037),a=new n.Schema({name:{type:String},slug:{type:String},amount:{type:Number},levelMin:{type:Number},items:[{item:{type:n.Schema.ObjectId,ref:"LimitedItem"},tickets:{type:Number},tickets1:{type:Number},tickets2:{type:Number}}],categories:[{type:String}],type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Box",a)},2745:(e,t,r)=>{var n=r(7906);e.exports={cashierCheckSendGiftRedeemData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||!0!==n.isAlphanumeric(e.code,"en-US"))throw new Error("Your provided gift code is invalid.")},cashierCheckSendGiftRedeemCode:function(e,t){if(null===e||void 0!==e.redeemer||!0===t.includes(e._id.toString()))throw new Error("Your provided gift code is not available.")}}},2773:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckAntiSpam),f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(7046),h=m.generalGetAffiliateDataSocket,y=m.generalSendAffiliateCodeSocket,v=m.generalSendAffiliateClaimCodeSocket,b=m.generalSendAffiliateClaimEarningsSocket;e.exports=function(e,t){t.on("getAffiliateData",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank affiliates agreed mute ban").lean();case 3:u=r.v;case 4:d(u,!0),p(u),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateCode",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),p(u),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClaimCode",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank affiliates mute ban").lean();case 5:u=r.v,d(u,!0),p(u,"general.affiliate.enabled"),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateClaimEarnings",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank affiliates mute ban").lean();case 5:u=r.v,d(u,!0),p(u),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},2789:(e,t,r)=>{var n=r(6037),a=new n.Schema({local:{email:{type:String},emailVerified:{type:Boolean},password:{type:String}},roblox:{id:{type:String},cookie:{type:String},createdAt:{type:Date}},google:{id:{type:String},email:{type:String}},discord:{id:{type:String},email:{type:String},username:{type:String}},username:{type:String},avatar:{type:String},rank:{type:String,default:"user"},fullrank:{type:String,default:"user"},balance:{type:Number,default:0},fbalance:{type:Number,default:0},xp:{type:Number,default:0},btype:{type:Number,default:0},vault:{amount:{type:Number,default:0},expireAt:{type:Date}},stats:{bet:{type:Number,default:0},won:{type:Number,default:0},deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},leaderboard:{points:{type:Number,default:0}},limits:{betToWithdraw:{type:Number,default:0},betToRain:{type:Number,default:0},blockAffiliate:{type:Boolean,default:!1},blockRain:{type:Boolean,default:!1},blockTip:{type:Boolean,default:!1},limitTip:{type:Number,default:0},blockSponsor:{type:Boolean,default:!1},blockLeaderboard:{type:Boolean,default:!1}},rakeback:{earned:{type:Number,default:0},available:{type:Number,default:0}},affiliates:{code:{type:String},leaderboardpoints:{type:Number,default:0},referred:{type:Number,default:0},bet:{type:Number,default:0},deposit:{type:Number,default:0},earned:{type:Number,default:0},available:{type:Number,default:0},generated:{type:Number,default:0},referrer:{type:n.Schema.ObjectId,ref:"User"},referredAddress:{type:String},referredAt:{type:Date},redeemedCode:{type:String},depobonus:{type:Number,default:0},cashOut:{type:Number,default:0},cashOutAt:{type:Date}},fair:{clientSeed:{type:String}},anonymous:{type:Boolean,default:!1},proxy:{type:String},ips:[{address:{type:String},createdAt:{type:Date,default:Date.now}}],mute:{expire:{type:Date},reason:{type:String}},ban:{expire:{type:Date},reason:{type:String}},verifiedAt:{type:Date},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("User",a)},2848:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(5734),u=(c.rateLimiter,c.rateLimiterStrict,r(7908)),d=u.socketCheckConnectionLimit,l=u.socketAddConnectionLimit,f=u.socketRemoveConnectionLimit,p=r(9974).cashierRobuxInit,m=(r(4330).cashierLimitedInit,r(485).cashierCryptoInit);e.exports=function(e){e.of("/socket/cashier").use(function(){var e=i(n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,d("cashier",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:r(),e.n=7;break;case 6:return e.p=6,i=e.v,e.a(2,r({success:!1,error:{type:"error",message:i.message}}));case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/cashier").on("connection",(function(t){var a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;l("cashier",a),r(2577)(e,t),r(9109)(e,t),r(7711)(e,t),r(6888)(e,t),r(1275)(e,t),r(1388)(e,t),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,f("cashier",r);case 1:return e.a(2)}}),e)}))))})),p(e),m(e)}},2934:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=(r(2789),r(5734)),u=(c.rateLimiter,c.rateLimiterStrict,r(7908)),d=u.socketCheckConnectionLimit,l=u.socketAddConnectionLimit,f=u.socketRemoveConnectionLimit;r(8461).settingGet,e.exports=function(e){e.of("/socket/admin").use(function(){var e=i(n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,d("admin",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=6;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:r(),e.n=7;break;case 6:r(new Error("You need to sign in to perform this action."));case 7:e.n=9;break;case 8:return e.p=8,i=e.v,e.a(2,r({success:!1,error:{type:"error",message:i.message}}));case 9:return e.a(2)}}),e,null,[[2,4],[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/admin").on("connection",(function(t){var a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;l("admin",a),r(8629)(e,t),r(3260)(e,t),r(2566)(e,t),r(7078)(e,t),r(3425)(e,t),r(9420)(e,t),r(6040)(e,t),r(9544)(e,t),r(8725)(e,t),r(1950)(e,t),r(7526)(e,t),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,f("admin",r);case 1:return e.a(2)}}),e)}))))}))}},2974:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},mode:{type:String},items:[{assetid:{type:String},name:{type:String},image:{type:String},amount:{type:Number},price:{type:Number},count:{type:Number}}],percentage:{type:Number},outcome:{type:Number},transaction:{type:n.Schema.ObjectId,ref:"SteamTransaction"},fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number},publicSeed:{type:String},clientSeed:{type:String}},user:{type:n.Schema.ObjectId,ref:"User",index:!0},stats:{balanceBefore:{type:Number,default:0}},btype:{type:Number,default:0},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UpgraderGame",a)},2997:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(8744),u=r(7908).socketRemoveAntiSpam,d=r(8610),l=d.adminCheckGetLeaderboardListData,f=d.adminCheckSendLeaderboardCreateData,p=d.adminCheckSendLeaderboardStopData,m=d.adminCheckSendLeaderboardStopLeaderboard,h=r(8078),y=h.generalLeaderboardStart,v=h.generalLeaderboardStop,b=function(){var e=i(n().m((function e(t,r,a,o,i){var s,u,d;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(o),s=12*(o.page-1),e.n=1,Promise.all([c.countDocuments({type:{$regex:o.search,$options:"i"}}),c.find({type:{$regex:o.search,$options:"i"}}).sort({createdAt:-1}).limit(12).skip(s).select("winners duration type state createdAt").lean()]);case 1:u=e.v,i({success:!0,count:u[0],leaderboards:u[1]}),e.n=3;break;case 2:e.p=2,d=e.v,i({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),g=function(){var e=i(n().m((function e(t,r,a,o,i){var d,l,p,m,h,v;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,f(o),e.n=1,c.findOne({state:"running"}).select("state").lean();case 1:return d=e.v,l=Math.floor(o.duration),p=o.prizes.map((function(e){return{prize:e.amount}})),m=[],m=[c.create({winners:p,duration:l,type:o.type,state:null===d?"running":"created"})],null===d&&m.push(s.updateMany({},{"leaderboard.points":0},{})),e.n=2,Promise.all(m);case 2:(h=e.v)[0]=h[0].toObject(),"running"===h[0].state&&y(t,h[0]),i({success:!0,leaderboard:h[0]}),u(a._id),e.n=4;break;case 3:e.p=3,v=e.v,u(a._id),i({success:!1,error:{type:"error",message:v.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),k=function(){var e=i(n().m((function e(t,r,a,o,i){var s,d;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,p(o),e.n=1,Promise.all([c.findById(o.leaderboardId).select("state").lean()]);case 1:if(s=e.v,m(s[0]),"created"!==s[0].state){e.n=3;break}return e.n=2,c.findByIdAndDelete(o.leaderboardId);case 2:s[0]=e.v,e.n=5;break;case 3:return v(t,s[0]),e.n=4,c.findByIdAndUpdate(o.leaderboardId,{state:"canceled"},{new:!0});case 4:s[0]=e.v;case 5:i({success:!0,leaderboard:s[0]}),u(a._id),e.n=7;break;case 6:e.p=6,d=e.v,u(a._id),i({success:!1,error:{type:"error",message:d.message}});case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetLeaderboardListSocket:b,adminSendLeaderboardCreateSocket:g,adminSendLeaderboardStopSocket:k}},3170:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(5949),g=b.duelsGetData,k=b.duelsGetGameDataSocket,w=b.duelsSendCreateSocket,S=b.duelsSendBotSocket,A=b.duelsSendJoinSocket,x=b.duelsSendCancelSocket,_=b.duelsInit;e.exports=function(e){e.of("/socket/duels").use(function(){var e=i(n().m((function e(t,r){var a,o,i,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,f("duels",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:i=g(),t.emit("init",i),r(),e.n=7;break;case 6:return e.p=6,c=e.v,e.a(2,r({success:!1,error:{type:"error",message:c.message}}));case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/duels").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("duels",r),t.on("getGameData",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,u.consume(i);case 2:if(r.p=2,s=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,c.findById(t.decoded._id).select("username avatar rank mute ban");case 3:s=r.v;case 4:l(s,!1),v(s),k(e,t,s,a,o),r.n=6;break;case 5:r.p=5,d=r.v,o({success:!1,error:{type:"error",message:d.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCreate",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance btype fbalance xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.duels.enabled"),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,console.error(f),o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBot",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.duels.enabled"),S(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,console.error(f),o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendJoin",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.duels.enabled"),A(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,console.error(f),o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCancel",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:s=r.v,l(s,!0),v(s,"games.duels.enabled"),x(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,console.error(f),o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("duels",r);case 1:return e.a(2)}}),e)}))))})),_(e)}},3184:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)}))}}var l=r(8749),f=r(1024),p=r(2789),m=r(5632),h=r(8921),y=r(2974),v=r(8744),b=r(3304),g=r(7908).socketRemoveAntiSpam,k=r(8747),w=k.upgraderCheckGetItemsDataData,S=k.upgraderCheckSendCreateData,A=k.upgraderCheckSendCreateUser,x=k.upgraderCheckSendCreateSeed,_=k.upgraderCheckSendCreateMultiplier,O=k.upgraderSanitizeGame,j=k.upgraderFormatItemSelect,T=r(836),P=T.generalUserGetRakeback,C=T.generalUserGetFormated,I=r(5507).generalAddBetsList,E=function(){var e=d(a().m((function e(t,r,n,o,i){var c,u,d,l,f;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,w(o),c=90*(o.page-1),u="descending"===o.sort?{amount:-1}:{amount:1},d=j(o.select),e.n=1,Promise.all([h.countDocuments(s({name:{$regex:o.search,$options:"i"}},d)),h.find(s({name:{$regex:o.search,$options:"i"}},d)).sort(u).limit(90).skip(c).select("name image amount").lean()]);case 1:l=e.v,i({success:!0,count:l[0],items:l[1]}),e.n=3;break;case 2:e.p=2,f=e.v,i({success:!1,error:{type:"error",message:f.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),D=function(){var e=d(a().m((function e(t,r,n,o,i){var c,u,h,k,w,j,T,E,D,G,M,R,B,U,Y;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,S(o),A(o,n),e.n=1,Promise.all([m.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state"),v.findOne({state:"running"}).select("state").lean()]);case 1:return c=e.v,x(c[0]),u=Math.floor(o.amount),h=Math.floor(Math.floor(o.amountPayout)/u*100),_(h),k=P(n),w=null!==c[1]&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?u:0,j=!0!==n.limits.blockSponsor?Math.floor(u*k.percentage):0,T=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor?Math.floor(.0025*u):0,E="".concat(c[0].serverSeed,"-").concat(c[0].nonce,"-").concat(c[0].seedClient),D=l.createHash("sha256").update(E).digest("hex"),G=new f(D),M=G.floating({min:0,max:100,fixed:2}),R=0,("under"===o.mode&&Number(9e3/h).toFixed(2)>=M||"over"===o.mode&&Number(100-9e3/h).toFixed(2)<=M)&&(R=Math.floor(o.amountPayout)),B=[],U=0===n.btype?{balance:Math.floor(R-u),xp:!0!==n.limits.blockSponsor?u*process.env.XP_RATE:0,"stats.bet":u,"stats.won":R,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-u)<=0?-n.limits.betToWithdraw:-u,"limits.betToRain":Math.floor(n.limits.betToRain-u)<=0?-n.limits.betToRain:-u,"leaderboard.points":w,"affiliates.generated":T,"rakeback.earned":j,"rakeback.available":j}:{fbalance:Math.floor(R-u)},B=[p.findByIdAndUpdate(n._id,{$inc:U,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance xp stats rakeback mute ban updatedAt").lean(),m.findByIdAndUpdate(c[0]._id,{$inc:{nonce:1}},{}),y.create({amount:u,payout:R,multiplier:h,mode:o.mode,outcome:M,fair:{seed:c[0]._id,nonce:c[0].nonce,clientSeed:c[0].seedClient},user:n._id,stats:{balanceBefore:n.balance},btype:n.btype,state:"completed"})],T>0&&0===n.btype&&B.push(p.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":T,"affiliates.available":T},updatedAt:(new Date).getTime()},{})),"admin"!==n.rank&&0===n.btype&&B.push(b.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.bet":u,"stats.total.won":R,"stats.upgrader.bet":u,"stats.upgrader.won":R}},{upsert:!0})),e.n=2,Promise.all(B);case 2:(c=e.v)[2]=c[2].toObject(),i({success:!0,user:s(s({},c[0]),{},{balance:0===n.btype?Math.floor(n.balance-u):Math.floor(n.balance),fbalance:1===n.btype?Math.floor(n.fbalance-u):Math.floor(n.fbalance)}),game:O(c[2])}),setTimeout(d(a().m((function e(){return a().w((function(e){for(;;)switch(e.n){case 0:t.of("/general").to(n._id.toString()).emit("user",{user:c[0]}),I(t,s(s({},c[2]),{},{user:C(n),method:"upgrader"}));case 1:return e.a(2)}}),e)}))),5e3),g(n._id),e.n=4;break;case 3:e.p=3,Y=e.v,g(n._id),i({success:!1,error:{type:"error",message:Y.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={upgraderGetItemsDataSocket:E,upgraderSendCreateSocket:D}},3239:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var p=r(8749),m=r(4229),h=r(2789),y=r(2298),v=r(4823),b=r(4825),g=r(3304),k=r(7908).socketRemoveAntiSpam,w=r(8521),S=w.cashierRobuxGetBlockOffer,A=w.cashierRobuxAddBlockOffer,x=w.cashierRobuxRemoveBlockOffer,_=r(9716),O=_.adminCheckGetCashierListData,j=_.adminCheckSendCashierCryptoActionData,T=_.adminCheckSendCashierCryptoActionTransaction,P=_.adminCheckSendCashierRobuxCancelData,C=_.adminCheckSendCashierRobuxCancelOffer,I=_.adminCheckSendCashierCreateData,E=_.adminCheckSendCashierCryptoActionDataByOxapay,D=[],G=function(){var e=f(a().m((function e(t,r,n,o,i){var c,d,l,f,p,m;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,O(o),e.n=1,Promise.all([y.countDocuments({$or:[{state:"created"},{state:"pending"}]}),v.countDocuments({type:"withdraw",state:"pending"}),y.find({$or:[{state:"created"},{state:"pending"}]}).sort({createdAt:1}).limit(12*o.page).select("amount amountProcessed type user state").populate({path:"user",select:"username avatar rank"}).lean(),v.find({type:"withdraw",state:"pending"}).sort({createdAt:1}).limit(12*o.page).select("amount data type user state").populate({path:"user",select:"username avatar rank"}).lean()]);case 1:c=e.v,d=c.slice(0,2).reduce((function(e,t){return e+t}),0),(l=[].concat(u(c[2].map((function(e){return s(s({},e),{},{method:"robux"})}))),u(c[3].map((function(e){return s(s({},e),{},{method:"crypto"})}))))).sort((function(e,t){return t.amount-e.amount})),f=12*(o.page-1),p=12*o.page,l=l.slice(f,p),i({success:!0,count:d,transactions:l}),e.n=3;break;case 2:e.p=2,m=e.v,i({success:!1,error:{type:"error",message:m.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),M=function(){var e=f(a().m((function e(t,r,n,o,i){var s,c,u,d,l,f;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,j(o),e.n=1,v.findById(o.transactionId).select("amount data type user state").lean();case 1:return s=e.v,T(s,D),e.p=2,D.push(s._id.toString()),c=[],"approve"===o.action?(c=[v.findByIdAndUpdate(s._id,{"data.transaction":o.transactionHash,state:"completed"},{new:!0}).select("state").lean()],u=Math.floor(s.amount/1e3*process.env.COIN_RATE),g.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.withdraw":u,"stats.crypto.withdraw":u}},{upsert:!0})):c=[v.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("state").lean(),h.findByIdAndUpdate(s.user,{$inc:{balance:s.amount,"stats.total.withdraw":-s.amount,"stats.crypto.withdraw":-s.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()],e.n=3,Promise.all(c);case 3:d=e.v,"cancel"===o.action&&t.of("/socket/general").to(d[1]._id.toString()).emit("user",{user:d[1]}),i({success:!0,transaction:d[0]}),D.splice(D.indexOf(s._id.toString()),1),k(n._id),e.n=5;break;case 4:e.p=4,l=e.v,k(r.decoded._id),D.splice(D.indexOf(s._id.toString()),1),i({success:!1,error:{type:"error",message:l.message}});case 5:e.n=7;break;case 6:e.p=6,f=e.v,k(n._id),i({success:!1,error:{type:"error",message:f.message}});case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),R=function(){var e=f(a().m((function e(t,r,n,o,i){var s,c,u,d,l;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,P(o),e.n=1,y.findById(o.offerId).select("amount amountProcessed type user state").lean();case 1:return s=e.v,C(s,S()),e.p=2,A(s._id.toString()),c=[],c=[y.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()],"withdraw"===s.type&&c.push(h.findByIdAndUpdate(s.user,{$inc:{balance:Math.floor(s.amount-s.amountProcessed),"stats.withdraw":-Math.floor(s.amount-s.amountProcessed)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.n=3,Promise.all(c);case 3:u=e.v,"withdraw"===s.type&&t.of("/socket/general").to(u[1]._id.toString()).emit("user",{user:u[1]}),t.of("/socket/cashier").to(u[0].user.toString()).emit("robuxOffer",{offer:u[0]}),i({success:!0,offer:u[0]}),x(s._id.toString()),k(n._id),e.n=5;break;case 4:e.p=4,d=e.v,k(r.decoded._id),x(s._id.toString()),i({success:!1,error:{type:"error",message:d.message}});case 5:e.n=7;break;case 6:e.p=6,l=e.v,k(n._id),i({success:!1,error:{type:"error",message:l.message}});case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),B=function(){var e=f(a().m((function e(t,r,n,o,i){var s,c,u,d,l,f,m;return a().w((function(e){for(;;)switch(e.n){case 0:for(e.p=0,I(o),s=Math.floor(o.reward),c=Math.floor(o.count),u=[],d=0;d<c;d++)l=p.randomBytes(16).toString("hex").substring(0,16).toUpperCase(),u.push(b.create({code:l,reward:s}));return e.n=1,Promise.all(u);case 1:f=(f=e.v).map((function(e){return e.toObject()})),i({success:!0,codes:f}),k(n._id),e.n=3;break;case 2:e.p=2,m=e.v,k(n._id),i({success:!1,error:{type:"error",message:m.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),U=function(){var e=f(a().m((function e(t,r,n,o,i){var s,c,u,d,l,f,p,y,b,g;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,E(o),e.n=1,v.findById(o.transactionId).select("amount data type user state").lean();case 1:if(s=e.v,console.log("payout trx: ",s),T(s,D),e.p=2,D.push(s._id.toString()),c=[],"approve"!==o.action){e.n=5;break}return u=null,d=s.data.currency,"usdt_erc20"===s.data.currency?(u="ERC20",d="usdt"):"usdt_trc20"===s.data.currency?(u="TRC20",d="usdt"):"eth"===s.data.currency&&(u="eth"),l=null!==u?{address:s.data.receiver,amount:(s.data.cryptoAmount/1e8).toFixed(8),currency:d.toUpperCase(),network:u,callback_url:"https://pigino.bet/api/callback/goon-oxapay-payout"}:{address:s.data.receiver,amount:(s.data.cryptoAmount/1e8).toFixed(8),currency:d.toUpperCase(),callback_url:"https://pigino.bet/api/callback/goon-oxapay-payout"},f={payout_api_key:process.env.PAYOUT_API_KEY,"content-type":"application/json"},e.n=3,m("https://api.oxapay.com/v1/payout",{method:"POST",headers:f,body:JSON.stringify(l)});case 3:return p=e.v,console.log("request body: ",l),e.n=4,p.json();case 4:p=e.v,console.log("payoutresponse: ",p),200===p.status?i({success:!0,transaction:s}):400===p.status?p.error.message?i({success:!1,error:{type:"error",message:p.error.message}}):i({success:!1,error:{type:"error",message:"Hey! The hotwallet is currently being filled for your withdrawal if this happens in 10 minutes again please report to the staff in our discord server."}}):i({success:!1,error:{type:"error",message:p.message}}),e.n=7;break;case 5:return c=[v.findByIdAndUpdate(s._id,{state:"canceled"},{new:!0}).select("state").lean(),h.findByIdAndUpdate(s.user,{$inc:{balance:s.amount,"stats.withdraw":-s.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()],e.n=6,Promise.all(c);case 6:y=e.v,t.of("/socket/general").to(y[1]._id.toString()).emit("user",{user:y[1]}),i({success:!0,transaction:y[0]});case 7:D.splice(D.indexOf(s._id.toString()),1),k(n._id),e.n=9;break;case 8:e.p=8,b=e.v,k(r.decoded._id),D.splice(D.indexOf(s._id.toString()),1),i({success:!1,error:{type:"error",message:b.message}});case 9:e.n=11;break;case 10:e.p=10,g=e.v,k(n._id),i({success:!1,error:{type:"error",message:g.message}});case 11:return e.a(2)}}),e,null,[[2,8],[0,10]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetCashierListSocket:G,adminSendCashierCryptoActionSocket:M,adminSendCashierRobuxCancelSocket:R,adminSendCashierCreateSocket:B,adminAproveWithdrawCryptoByOxapay:U}},3260:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckUserRank,f=u.socketCheckUserFullRank,p=u.socketCheckAntiSpam,m=u.socketRemoveAntiSpam,h=r(2541),y=h.adminGetUserListSocket,v=h.adminGetUserDataSocket,b=h.adminGetUserTransactionListSocket,g=h.adminGetUserGameListSocket,k=h.adminSendUserValueSocket,w=h.adminSendUserBalanceSocket,S=h.adminSendAffiliateBonusSocket,A=h.adminSendUserMuteSocket,x=h.adminSendUserBanSocket,_=h.adminSendUserFreeBalanceSocket;e.exports=function(e,t){t.on("getUserList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),y(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,console.log(f),o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserData",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),v(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactionList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),b(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserGameList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),g(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserValue",function(){var r=i(n().m((function r(a,o){var i,u,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,p(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),"limits.limitTip"===a.setting||"limits.blockTip"===a.setting?l(u,["admin"]):f(u,["fulladmin"]),k(e,t,u,a,o),r.n=7;break;case 6:r.p=6,h=r.v,m(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBalance",function(){var r=i(n().m((function r(a,o){var i,u,f,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,p(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),w(e,t,u,a,o),r.n=7;break;case 6:r.p=6,f=r.v,m(t.decoded._id),o({success:!1,error:{type:"error",message:f.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserFreeBalance",function(){var r=i(n().m((function r(a,o){var i,u,f,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,p(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),_(e,t,u,a,o),r.n=7;break;case 6:r.p=6,f=r.v,m(t.decoded._id),o({success:!1,error:{type:"error",message:f.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendAffiliateBonus",function(){var r=i(n().m((function r(a,o){var i,u,f,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,p(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),S(e,t,u,a,o),r.n=7;break;case 6:r.p=6,f=r.v,m(t.decoded._id),o({success:!1,error:{type:"error",message:f.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserMute",function(){var r=i(n().m((function r(a,o){var i,u,f,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,p(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin","mod"]),A(e,t,u,a,o),r.n=7;break;case 6:r.p=6,f=r.v,m(t.decoded._id),o({success:!1,error:{type:"error",message:f.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBan",function(){var r=i(n().m((function r(a,o){var i,u,l,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,p(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),f(u,["fulladmin"]),x(e,t,u,a,o),r.n=7;break;case 6:r.p=6,l=r.v,m(t.decoded._id),o({success:!1,error:{type:"error",message:l.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},3298:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return d(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(d(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,d(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=l,d(p,"constructor",l),d(l,"constructor",c),c.displayName="GeneratorFunction",d(l,a,"GeneratorFunction"),d(p),d(p,a,"Generator"),d(p,n,(function(){return this})),d(p,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:o,m}})()}function d(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){d(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},d(e,t,r,n)}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var p=r(8749),m=r(2789),h=r(5632),y=r(8702),v=r(8744),b=r(6112),g=r(8875),k=r(7908).socketRemoveAntiSpam,w=r(8461),S=w.settingGet,A=(w.getMinimumValue,w.getMaximumValue,w.findPercent),x=w.findCountPercent,_=r(9949),O=_.minesCheckSendBetData,j=_.minesCheckSendBetUser,T=_.minesCheckSendBetGame,P=_.minesCheckSendBetSeed,C=_.minesCheckSendRevealData,I=_.minesCheckSendRevealGame,E=_.minesCheckSendCashoutGame,D=_.minesGetGamePayout,G=_.minesGetGameDeck,M=_.minesSanitizeGame,R=r(836),B=R.generalUserGetRakeback,U=R.generalUserGetFormated,Y=r(5507).generalAddBetsList,N=[],F=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s,c,d,l,f,b,w,A,x,_,C,I,E,D,R,U,Y;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,O(a),j(a,n),i=N.find((function(e){return e.user._id.toString()===n._id.toString()})),T(i),e.n=1,h.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 1:return s=e.v,P(s),e.n=2,v.findOne({state:"running"}).select("state").lean();case 2:return c=e.v,d=Math.floor(a.amount),l=Math.floor(a.minesCount),f=S(),b=B(n),w=!0!==n.limits.blockSponsor?Math.floor(d*b.percentage*f.general.reward.multiplier):0,A=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*d):0,x="".concat(s.seedServer,"-").concat(s.nonce,"-").concat(s.seedClient),_=p.createHash("sha256").update(x).digest("hex"),C=G(l,_),I=[],e.n=3,g.find({enabled:"true"}).select("creators").lean();case 3:return E=e.v,D=E.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates.referrer)||void 0===t?void 0:t.toString())})),R=0===n.btype?{balance:-d,xp:!0!==n.limits.blockSponsor?Math.floor(d*process.env.XP_RATE*f.general.reward.multiplier):0,"stats.bet":d,"leaderboard.points":null!==c&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?d:0,"affiliates.generated":A,"affiliates.leaderboardpoints":D&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?d:0,"rakeback.earned":w,"rakeback.available":w}:{fbalance:-d},I=[m.findByIdAndUpdate(n._id,{$inc:R,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.findByIdAndUpdate(s._id,{$inc:{nonce:1}},{}),y.create({amount:d,minesCount:l,deck:C,fair:{seed:s._id,nonce:s.nonce},user:n._id,btype:n.btype,state:"created"})],void 0!==n.affiliates.referrer&&A>0&&0===n.btype&&I.push(m.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":A,"affiliates.available":A},updatedAt:(new Date).getTime()},{})),e.n=4,Promise.all(I);case 4:(U=e.v)[2]=U[2].toObject(),N.push(U[2]),o({success:!0,user:U[0],game:M(U[2])}),k(n._id),e.n=6;break;case 5:e.p=5,Y=e.v,k(r.decoded._id),o({success:!1,error:{type:"error",message:Y.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),L=function(){var e=f(u().m((function e(t,r,n,a,i){var c,d,l,f,p,h,v,g,w,_,O,j,T,P,E;return u().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,C(a),c=N.find((function(e){return e.user._id.toString()===n._id.toString()})),I(c,a),d=Math.floor(a.tile),l=c.revealed.length+1,"coin"===c.deck[d]&&S().games.ctotal.enabled&&0===n.btype&&("user"===n.rank&&(f=A(c.amount,n.balance,S().games.cmines),Math.floor(100*Math.random())+1<f&&(c.deck=$(c.deck,d)),0===f&&(p=x(c.amount,c.minesCount,l,S().games.csmines),Math.floor(100*Math.random())+1<p&&(c.deck=$(c.deck,d)))),"mod"!==n.rank&&"partner"!==n.rank||(h=A(c.amount,n.balance,S().games.mcmines),Math.floor(100*Math.random())+1<h&&(c.deck=$(c.deck,d)),0===h&&(v=x(c.amount,c.minesCount,l,S().games.mcsmines),Math.floor(100*Math.random())+1<v&&(c.deck=$(c.deck,d))))),c.revealed.push({tile:d,value:c.deck[d]}),!("mine"===c.deck[d]||25-c.minesCount<=c.revealed.length)){e.n=2;break}return g="mine"!==c.deck[d]?D(c):0,w=Math.floor(g/c.amount*100),_=0===g||w>=125?c.amount:g,O=!0!==n.limits.blockSponsor?c.amount:0,j=[],T=0===n.btype?{balance:g,"stats.won":g,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-_)<=0?-n.limits.betToWithdraw:-_,"limits.betToRain":Math.floor(n.limits.betToRain-_)<=0?-n.limits.betToRain:-_}:{fbalance:g},j=[m.findByIdAndUpdate(n._id,{$inc:T,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance xp stats rakeback mute ban verifiedAt updatedAt").lean(),y.findByIdAndUpdate(c._id,{payout:g,multiplier:w,revealed:c.revealed,deck:c.deck,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout btype multiplier minesCount deck revealed user state updatedAt").lean()],g>0&&0===n.btype&&(j=[].concat(s(j),[b.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*O)}},{new:!0}).select("amount participants type state updatedAt").lean()])),e.n=1,Promise.all(j);case 1:P=e.v,N.splice(N.findIndex((function(e){return e._id.toString()===P[1]._id.toString()})),1),t.of("/socket/general").to(n._id.toString()).emit("user",{user:P[0]}),g>0&&t.of("/socket/general").emit("rain",{rain:P[2]}),Y(t,o(o({},P[1]),{},{user:U(n),method:"mines"})),c=P[1],e.n=4;break;case 2:return e.n=3,y.findByIdAndUpdate(c._id,{revealed:c.revealed,updatedAt:(new Date).getTime()},{new:!0}).select("amount minesCount deck revealed user state").lean();case 3:c=e.v,N.splice(N.findIndex((function(e){return e._id.toString()===c._id.toString()})),1,c);case 4:i({success:!0,game:M(c)}),k(n._id),e.n=6;break;case 5:e.p=5,E=e.v,k(r.decoded._id),i({success:!1,error:{type:"error",message:E.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),$=function(e,t){var r=s(e);if("mine"===r[t])return r;r[t]="mine";for(var n=0;n<r.length;n++)if("mine"===r[n]&&t!==n){r[n]="coin";break}return r},q=function(){var e=f(u().m((function e(t,r,n,a,i){var s,c,d,l,f,p,h,v;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,s=N.find((function(e){return e.user._id.toString()===n._id.toString()})),E(s),c=D(s),d=Math.floor(c/s.amount*100),l=d>=125?s.amount:c,f=!0!==n.limits.blockSponsor?s.amount:0,p=0===n.btype?{balance:c,"stats.won":c,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-l)<=0?-n.limits.betToWithdraw:-l,"limits.betToRain":Math.floor(n.limits.betToRain-l)<=0?-n.limits.betToRain:-l}:{fbalance:c},e.n=1,Promise.all([m.findByIdAndUpdate(n._id,{$inc:p,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance xp stats rakeback mute ban verifiedAt updatedAt").lean(),y.findByIdAndUpdate(s._id,{payout:c,multiplier:d,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount payout btype multiplier minesCount deck revealed user state updatedAt").lean(),b.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:0===n.btype?Math.floor(.001*f):0}},{new:!0}).select("amount participants type state updatedAt").lean()]);case 1:h=e.v,N.splice(N.findIndex((function(e){return e._id.toString()===h[1]._id.toString()})),1),t.of("/socket/general").emit("rain",{rain:h[2]}),Y(t,o(o({},h[1]),{},{user:U(n),method:"mines"})),i({success:!0,user:h[0],game:M(h[1])}),k(n._id),e.n=3;break;case 2:e.p=2,v=e.v,k(r.decoded._id),i({success:!1,error:{type:"error",message:v.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),J=function(){var e=f(u().m((function e(t){var r;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,y.find({state:"created"}).select("amount minesCount deck revealed user state").lean();case 1:N=e.v,e.n=3;break;case 2:e.p=2,r=e.v,console.error(r);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}();e.exports={minesGetGame:function(e){var t=N.findIndex((function(t){return t.user.toString()===e._id.toString()}));return-1!==t?M(N[t]):null},minesSendBetSocket:F,minesSendRevealSocket:L,minesSendCashoutSocket:q,minesInit:J}},3304:(e,t,r)=>{var n=r(6037),a=new n.Schema({stats:{total:{user:{type:Number,default:0},deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},limited:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},robux:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},steam:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},crypto:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},gift:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}},credit:{deposit:{type:Number,default:0},withdraw:{type:Number,default:0}}},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Report",a)},3425:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckUserFullRank),f=u.socketCheckAntiSpam,p=u.socketRemoveAntiSpam,m=r(1204),h=m.adminGetFilterListSocket,y=m.adminSendFilterCreateSocket,v=m.adminSendFilterRemoveSocket;e.exports=function(e,t){t.on("getFilterList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["fulladmin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendFilterCreate",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendFilterRemove",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},3534:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=r(8749),d=r(4229),l=r(758);e.exports={cashierCheckSendCreditDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<10)throw new Error("Your provided deposit amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.CREDIT_MIN_AMOUNT))throw new Error("You can only deposit a min amount of ".concat(parseFloat(process.env.CREDIT_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin."))},cashierCreditCreateSignature:function(e){var t,r="",n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var a=t.value;"signature"!==a&&"object"!==s(e[a])&&(r+=e[a])}}catch(e){n.e(e)}finally{n.f()}return u.createHash("sha256").update("".concat(r).concat(process.env.ZEBRASMARKET_API_KEY)).digest("hex")},cashierCreditCreateTransaction:function(e){return new Promise(function(){var t=i(n().m((function t(r,a){var o,i,s;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,o={"content-type":"application/json;charset=UTF-8"},t.n=1,d("https://api.zebrasmarket.com/partner/".concat(process.env.ZEBRASMARKET_PARTNER,"/trade_url"),{method:"POST",headers:o,body:JSON.stringify(e)});case 1:if(200!==(i=t.v).status){t.n=3;break}return t.n=2,i.json();case 2:i=t.v,r(i.data),t.n=4;break;case 3:a(new Error("ERROR: ".concat(i.statusText)));case 4:t.n=6;break;case 5:t.p=5,s=t.v,a(s);case 6:return t.a(2)}}),t,null,[[0,5]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCreditCreateUrl:function(e,t){return new Promise(function(){var r=i(n().m((function r(a,o){var s,c,u,d;return n().w((function(r){for(;;)switch(r.n){case 0:return r.n=1,l.launch({headless:"new"});case 1:return s=r.v,r.n=2,s.newPage();case 2:return c=r.v,r.p=3,r.n=4,c.goto(e,{waitUntil:"networkidle0"});case 4:return r.n=5,c.click('input[type="number"]',{clickCount:3});case 5:return r.n=6,c.keyboard.press("Backspace");case 6:return r.n=7,c.type('input[type="number"]',t);case 7:return r.n=8,c.click("div.bg-pink-e6.hover");case 8:return s.on("targetcreated",function(){var e=i(n().m((function e(t){return n().w((function(e){for(;;)switch(e.n){case 0:if("page"!==t.type()){e.n=2;break}return e.n=1,s.close();case 1:a(t.url());case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=new Promise((function(t,r){setTimeout((function(){a(e)}),1e4)})),r.n=9,Promise.race([u,new Promise((function(){}))]);case 9:r.n=12;break;case 10:return r.p=10,d=r.v,r.n=11,s.close();case 11:o(d);case 12:return r.a(2)}}),r,null,[[3,10]])})));return function(e,t){return r.apply(this,arguments)}}())}}},3602:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports={generalCheckSendRainCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered rain amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.RAIN_MIN_HOST_AMOUNT))throw new Error("You can only host a rain with a minmum amount of $".concat(parseFloat(process.env.RAIN_MIN_HOST_AMOUNT).toFixed(2),"."))},generalCheckSendRainCreateRain:function(e,t){if(null!==e)throw new Error("You need to wait for the current hosted rain to complete.");if(0!==t.length)throw new Error("You need to wait for the current hosted rain to complete.")},generalCheckSendRainCreateUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===t.limits.blockSponsor)throw new Error("You aren't allowed to create a rain at the moment.");if(Math.floor(e.amount)<25e4)throw new Error("Minimum rain host is 250R$.")},generalCheckSendRainTipData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered tip amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.RAIN_MIN_TIP_AMOUNT))throw new Error("You can only tip a minmum amount of ".concat(parseFloat(process.env.RAIN_MIN_TIP_AMOUNT).toFixed(2)," Coin to the rain."))},generalCheckSendRainTipRain:function(e){if(null===e)throw new Error("Your entered rain is not available.");if("created"!==e.state&&"pending"!==e.state&&"running"!==e.state)throw new Error("Your entered rain is already completed")},generalCheckSendRainTipUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===t.limits.blockSponsor)throw new Error("You aren't allowed to tip the rain at the moment.")},generalCheckSendRainJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.captcha||null===e.captcha||"string"!=typeof e.captcha)throw new Error("Your provided captcha token is invalid.")},generalCheckSendRainJoinRain:function(e,t,r){if(null===t)throw new Error("Your entered rain is not available.");if(new Date(t.updatedAt).getTime()+12e4<=(new Date).getTime())throw new Error("Your entered rain is already completed");if(!0===t.participants.some((function(t){return t.user.toString()===e._id.toString()})))throw new Error("You can only join the rain once.");if("site"===t.type&&!0!==r.general.rain.enabled)throw new Error("The rain is currently unavailable at this time.")},generalCheckSendRainJoinUser:function(e,t,r){if(!0===e.limits.blockRain)throw new Error("You aren't allowed to join the rain at the moment.");if("site"===t.type&&3>Math.floor(Math.pow(e.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of 3 to join the rain.");if("site"===t.type&&r.filter((function(e){return"site"===e.type})).length>=10)throw new Error("You aren't allowed to join the rain more then 10 times per 24 hours.")},generalCheckSendRainJoinTransactions:function(e){var r,n=0,a=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;n=Math.floor(n+o.amount)}}catch(e){a.e(e)}finally{a.f()}if(n<5e3)throw new Error("You need to have aleast 5 coin deposited in the past one week.")}}},3688:e=>{"use strict";e.exports=require("https-proxy-agent")},3702:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},outcome:{type:Number},box:{type:n.Schema.ObjectId,ref:"Box"},fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},btype:{type:Number,default:0},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UnboxGame",a)},3818:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}var u=r(7906),d=r(4229),l=r(8749);r(8938),e.exports={cashierCheckSendCryptoWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.currency||"string"!=typeof e.currency||!0!==["btc","eth","ltc","doge","trx","usdt","usdt_erc20","usdt_trc20","sol"].includes(e.currency))throw new Error("You’ve entered an invalid withdraw currency.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid withdraw amount.");if(Math.floor(e.amount)<Math.floor(process.env.MIN_WITHDRAWAL_AMOUNT/process.env.COIN_RATE*1e3))throw new Error("Please try a minimum withdrawal of $5.");if(void 0===e.address||"string"!=typeof e.address||"btc"===e.currency&&!0!==u.isBtcAddress(e.address)||"eth"===e.currency&&!0!==u.isEthereumAddress(e.address)||"ltc"===e.currency&&!0!==/^([LM3]{1}[a-km-zA-HJ-NP-Z1-9]{26,33}||ltc1[a-z0-9]{39,59})$/.test(e.address))throw new Error("You’ve entered an invalid ".concat(e.currency," withdraw address."))},cashierCheckSendCryptoWithdrawUser:function(e,t){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(t.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(t.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===t.limits.blockSponsor)throw new Error("You aren`t allowed to withdraw at the moment. Please contact the support for more information.");if(t.stats.deposit<5e3)throw new Error("You need to deposit 5 coin to request withdraw.")},cashierCheckSendCryptoWithdrawTransactions:function(e){if(e.length>=2)throw new Error("You aren`t allowed to have more then 2 pending crypto withdraws.")},cashierCryptoGetPrices:function(){return new Promise(function(){var e=c(n().m((function e(t,r){var a,i,s,c,u;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a={cmd:"rates",short:1,accepted:2,key:process.env.COINPAYMENTS_API_KEY,version:1,format:"json"},i=Object.entries(a).map((function(e){var t=o(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join("&"),s={"content-type":"application/x-www-form-urlencoded",hmac:l.createHmac("sha512",process.env.COINPAYMENTS_PRIVATE_KEY).update(i).digest("hex")},e.n=1,d("https://www.coinpayments.net/api.php",{method:"POST",headers:s,body:new URLSearchParams(a)});case 1:if(!(c=e.v).ok){e.n=3;break}return e.n=2,c.json();case 2:c=e.v,t(c.result),e.n=4;break;case 3:r(new Error(c.statusText));case 4:e.n=6;break;case 5:e.p=5,u=e.v,r(u);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierCryptoGenerateAddress:function(e){return new Promise(function(){var t=c(n().m((function t(r,a){var i,s,c,u,f,p,m;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,i={cmd:"get_callback_address",currency:e,key:process.env.COINPAYMENTS_API_KEY,version:1,format:"json"},s=Object.entries(i).map((function(e){var t=o(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join("&"),c={"content-type":"application/x-www-form-urlencoded",hmac:l.createHmac("sha512",process.env.COINPAYMENTS_PRIVATE_KEY).update(s).digest("hex")},u=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Request timed out"))}),1e4)})),t.n=1,d("https://www.coinpayments.net/api.php",{method:"POST",headers:c,body:new URLSearchParams(i)});case 1:return f=t.v,t.n=2,Promise.race([f,u]);case 2:if(!(p=t.v).ok){t.n=4;break}return t.n=3,p.json();case 3:"ok"===(p=t.v).error&&p.result?r(p.result):(console.log("unkonw coinpay error: ",p.error),a(new Error("The network is busy while creating the coin account."))),t.n=5;break;case 4:a(new Error(p.statusText));case 5:t.n=7;break;case 6:t.p=6,m=t.v,a(m);case 7:return t.a(2)}}),t,null,[[0,6]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCryptoGetPricesByOxapay:function(){return new Promise(function(){var e=c(n().m((function e(t,r){var a,o;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,d("https://api.oxapay.com/v1/common/prices",{method:"GET"});case 1:return a=e.v,e.n=2,a.json();case 2:200===(a=e.v).status?t(a.data):r(new Error(a.message)),e.n=4;break;case 3:e.p=3,o=e.v,r(o);case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r){return e.apply(this,arguments)}}())},cashierCryptoGenerateAddressByOxapay:function(e){return new Promise(function(){var t=c(n().m((function t(r,a){var o,i,s,c,u,l;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,o={network:e,auto_withdrawal:!1,email:"expertleeyang@gmail.com",callback_url:"https://pigino.bet/api/callback/goon-oxapay"},i={merchant_api_key:process.env.OXAPAY_MERCHANT_API_KEY,"content-type":"application/json"},s=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Request timed out"))}),1e4)})),t.n=1,d("https://api.oxapay.com/v1/payment/static-address",{method:"POST",headers:i,body:JSON.stringify(o)});case 1:return c=t.v,t.n=2,Promise.race([c,s]);case 2:if(!(u=t.v).ok){t.n=4;break}return t.n=3,u.json();case 3:200===(u=t.v).status&&u.data.address?r(u.data):a(new Error("The network is busy while creating the coin account.")),t.n=5;break;case 4:a(new Error(u.statusText));case 5:t.n=7;break;case 6:t.p=6,l=t.v,a(l);case 7:return t.a(2)}}),t,null,[[0,6]])})));return function(e,r){return t.apply(this,arguments)}}())},cashierCryptoGetStableCurrencyName:function(e,t){var r=e;return"usdc"===r&&"ethereum network"===t?r="usdc_erc20":"usdt"===r&&"ethereum network"===t?r="usdt_erc20":"usdt"===r&&"tron network"===t&&(r="usdt_trc20"),r}}},3844:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},data:{productId:{type:String}},deposit:{user:{type:n.Schema.ObjectId,ref:"User"},offer:{type:n.Schema.ObjectId,ref:"RobuxOffer"}},withdraw:{user:{type:n.Schema.ObjectId,ref:"User"},offer:{type:n.Schema.ObjectId,ref:"RobuxOffer"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RobuxTransaction",a)},3932:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734),d=u.rateLimiter,l=(u.rateLimiterStrict,r(7908)),f=l.socketCheckUserData,p=l.socketCheckConnectionLimit,m=l.socketAddConnectionLimit,h=l.socketRemoveConnectionLimit,y=l.socketCheckAntiSpam,v=l.socketRemoveAntiSpam,b=r(8461).settingCheck,g=r(8117),k=g.rollGetData,w=g.rollSendBetSocket,S=g.rollInit;e.exports=function(e){e.of("/socket/roll").use(function(){var e=i(n().m((function e(t,r){var a,o,i,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,p("roll",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:i=k(),t.emit("init",i),r(),e.n=7;break;case 6:return e.p=6,c=e.v,e.a(2,r({success:!1,error:{type:"error",message:c.message}}));case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/roll").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;m("roll",r),t.on("sendBet",function(){var r=i(n().m((function r(a,o){var i,s,u,l;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,d.consume(i);case 3:return r.n=4,y(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,f(s,!0),b(s,"games.roll.enabled"),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,u=r.v,v(t.decoded._id),o({success:!1,error:{type:"error",message:u.message}});case 7:r.n=9;break;case 8:r.p=8,l=r.v,o({success:!1,error:{type:"error",message:void 0!==l.message?l.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,h("roll",r);case 1:return e.a(2)}}),e)}))))})),S(e)}},4040:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=r(7906),u=r(573);e.exports={adminCheckGetBoxListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendBoxCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.name||null===e.name||"string"!=typeof e.name||""===e.name.trim())throw new Error("Your entered name is invalid.");if(void 0===e.image||null===e.image||"string"!=typeof e.image)throw new Error("Your entered image is invalid.");if(void 0===e.categories||null===e.categories||!0!==Array.isArray(e.categories)||!0===e.categories.some((function(e){return!0!==["popular","low risk","50-50","high risk"].includes(e)})))throw new Error("Your entered categories are invalid.");if(void 0===e.items||null===e.items||!0!==Array.isArray(e.items)||e.items.length<=0)throw new Error("Your entered items are invalid.")},adminCheckSendBoxCreateItems:function(e,t){var r,n=i(e.items);try{var a=function(){var e=r.value;if(void 0===e.item||null===e.item||"string"!=typeof e.item||!0!==c.isMongoId(e.item))throw new Error("Your entered item id is invalid.");if(void 0===e.tickets||null===e.tickets||!0===isNaN(e.tickets))throw new Error("Your entered item tickets is invalid.");if(void 0===e.tickets1||null===e.tickets1||!0===isNaN(e.tickets1))throw new Error("Your entered item tickets1 is invalid.");if(void 0===e.tickets2||null===e.tickets2||!0===isNaN(e.tickets2))throw new Error("Your entered item tickets2 is invalid.");if(!0!==t.some((function(t){return t._id.toString()===e.item.toString()})))throw new Error("Your entered item is invalid.")};for(n.s();!(r=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}},adminCheckSendBoxRemoveData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.")},adminCheckSendBoxRemoveBox:function(e){if(null===e)throw new Error("Your entered box was not found.");if("created"!==e.state)throw new Error("Your entered box is still active.")},adminSaveImage:function(e,t){return new Promise(function(){var r,a=(r=n().m((function r(a,o){return n().w((function(r){for(;;)switch(r.n){case 0:try{u.img(e,"./bin/public/img",t,(function(e,t){if(e)throw Error(e.message);a()}))}catch(e){o(e)}case 1:return r.a(2)}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())},adminGetAmountBox:function(e,t){var r,n=0,a=i(e.items);try{var o=function(){var e=r.value,a=t.findIndex((function(t){return t._id.toString()===e.item.toString()}));-1!==a&&(n+=Math.floor(t[a].amountFixed*(e.tickets/1e5)*1.08))};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}return n},adminCheckSendItemCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.name||null===e.name||"string"!=typeof e.name||""===e.name.trim())throw new Error("Your entered name is invalid.");if(void 0===e.image||null===e.image||"string"!=typeof e.image)throw new Error("Your entered image is invalid.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount))throw new Error("Your entered amount are invalid.")},adminFormatItemSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"name"===e?t={name:1}:"amountdec"===e?t={amount:-1}:"amountasc"===e&&(t={amount:1}),t},adminCheckSendItemNameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.name||null===e.name||""===e.name)throw new Error("Your entered Name is invalid.")},adminCheckSendItemName:function(e){if(null===e)throw new Error("Your entered item is not available.")},adminCheckSendItemAmountData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.amount||null===e.amount||isNaN(e.amount)||e.amount<0)throw new Error("Your entered Name is invalid.")},adminCheckSendItemTitleData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.title||null===e.title||""===e.title)throw new Error("Your entered Title is invalid.")},adminCheckSendBoxNameData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.name||null===e.name||""===e.name)throw new Error("Your entered Name is invalid.")},adminCheckSendBoxName:function(e){if(null===e)throw new Error("Your entered box is not available.")},adminCheckSendBoxStateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.state||null===e.state||""===e.state||"active"!==e.state&&"inactive"!==e.state)throw new Error("Your entered state is invalid.")},adminCheckSendBoxCategoriesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.categories||null===e.categories||!0!==Array.isArray(e.categories)||!0===e.categories.some((function(e){return!0!==["popular","low risk","50-50","high risk"].includes(e)})))throw new Error("Your entered categories are invalid.")},adminCheckSendBoxImageData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.image||null===e.image||""===e.state)throw new Error("Your entered box image is invalid.")},adminCheckSendBoxItemsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.boxId||null===e.boxId||"string"!=typeof e.boxId||!0!==c.isMongoId(e.boxId))throw new Error("Your entered box id is invalid.");if(void 0===e.items||null===e.items)throw new Error("Your entered box items is invalid.")}}},4145:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,d=Object.create(c.prototype);return u(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function s(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(u(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,u(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,u(p,"constructor",l),u(l,"constructor",d),d.displayName="GeneratorFunction",u(l,a,"GeneratorFunction"),u(p),u(p,a,"Generator"),u(p,n,(function(){return this})),u(p,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:o,m}})()}function u(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){u(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},u(e,t,r,n)}function d(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var l=r(8749),f=r(2299);r(9472).SERVICE_PROXY_TIME,e.exports={rouletteCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.color||"string"!=typeof e.color||!1===["red","black","green","bait"].includes(e.color))throw new Error("Your provided bet color is invalid.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided bet amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROULETTE_MIN_AMOUNT))throw new Error("You can only bet a min amount of $".concat(parseFloat(process.env.ROULETTE_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," per bet."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.ROULETTE_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.ROULETTE_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per bet."))},rouletteCheckSendBetUser:function(e,t,r){if(0===t.btype){if(Math.floor(e.amount)>t.balance)throw new Error("You don’t have enough balance for this action.");if(r.filter((function(e){return e.user._id.toString()===t._id.toString()})).length>=process.env.ROULETTE_MAX_COUNT)throw new Error("You can only bet ".concat(process.env.ROULETTE_MAX_COUNT," times per game."));if("black"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"red"===e.color}))||"red"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"black"===e.color})))throw new Error("You can’t bet on red and black in the same game.")}else{if(Math.floor(e.amount)>t.fbalance)throw new Error("You don’t have enough balance for this action.");if(r.filter((function(e){return e.user._id.toString()===t._id.toString()})).length>=process.env.ROULETTE_MAX_COUNT)throw new Error("You can only bet ".concat(process.env.ROULETTE_MAX_COUNT," times per game."));if("black"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"red"===e.color}))||"red"===e.color&&!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&"black"===e.color})))throw new Error("You can’t bet on red and black in the same game.")}},rouletteCheckSendBetGame:function(e){if("created"!==e.state||(new Date).getTime()-13e3>=new Date(e.createdAt).getTime())throw new Error("You need to wait for the next round before you can bet.")},rouletteGetOutcome:function(e){var t="".concat(e._id,"-").concat(e.fair.seedServer,"-").concat(e.fair.seedPublic),r=l.createHash("sha256").update(t).digest("hex");return Math.abs(parseInt(r.substr(0,8),16))%15},rouletteGenerateGame:function(){return new Promise(function(){var e,t=(e=c().m((function e(t,r){var n,a,o;return c().w((function(e){for(;;)switch(e.n){case 0:return n=l.randomBytes(24).toString("hex"),a=l.createHash("sha256").update(n).digest("hex"),e.n=1,f.create({fair:{seedServer:n,hash:a},state:"created"});case 1:o=(o=e.v).toObject(),t(o);case 2:return e.a(2)}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){d(o,n,a,i,s,"next",e)}function s(e){d(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},rouletteSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return!1===["fairness","rolling","completed"].includes(t.state)&&(t.fair={hash:t.fair.hash}),t},rouletteSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push(o(o({},a),{},{user:{_id:a.user._id,username:a.user.username,avatar:a.user.avatar,rank:a.user.rank}}))}}catch(e){n.e(e)}finally{n.f()}return r},rouletteSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank},t}}},4162:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return c(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,c(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,c(p,"constructor",l),c(l,"constructor",d),d.displayName="GeneratorFunction",c(l,a,"GeneratorFunction"),c(p),c(p,a,"Generator"),c(p,n,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},c(e,t,r,n)}function u(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=r(8749),p=r(7067),m=r(9940);e.exports={rollCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.multiplier||null===e.multiplier||!0===isNaN(e.multiplier)||Math.floor(e.multiplier)<=100)throw new Error("Your entered bet multiplier is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROLL_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.ROLL_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."))},rollCheckSendBetUser:function(e,t,r){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(0===t.btype){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(Math.floor(e.amount+r.bet)>Math.floor(1e3*process.env.ROLL_MAX_AMOUNT))throw new Error("You can only bet a total max amount of ".concat(parseFloat(process.env.ROLL_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," coin per game."));if(Math.floor(e.amount*(e.multiplier/100)+r.winnings)>Math.floor(1e3*process.env.ROLL_MAX_PROFIT))throw new Error("You can only have a total max win amount of ".concat(parseFloat(process.env.ROLL_MAX_PROFIT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," coin per game."))}else{if(t.fbalance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(Math.floor(e.amount+r.freebet)>Math.floor(1e3*process.env.ROLL_MAX_AMOUNT))throw new Error("You can only bet a total max amount of ".concat(parseFloat(process.env.ROLL_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Lunar coin per game."));if(Math.floor(e.amount*(e.multiplier/100)+r.freewinnings)>Math.floor(1e3*process.env.ROLL_MAX_PROFIT))throw new Error("You can only have a total max win amount of ".concat(parseFloat(process.env.ROLL_MAX_PROFIT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Lunar coin per game."))}},rollCheckSendBetGame:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("created"!==e.state)throw new Error("You need to wait for the next round before you can bet.")},rollGetUserGameStats:function(e,t){var r,n={bet:0,winnings:0,freebet:0,freewinnings:0},a=d(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.user._id.toString()===e._id.toString()&&(0===o.user.btype?(n.bet=Math.floor(n.bet+o.amount),n.winnings=Math.floor(n.winnings+o.amount*(o.multiplier/100))):(n.freebet=Math.floor(n.freebet+o.amount),n.freewinnings=Math.floor(n.freewinnings+o.amount*(o.multiplier/100))))}}catch(e){a.e(e)}finally{a.f()}return n},rollGenerateGame:function(){return new Promise(function(){var e,t=(e=s().m((function e(t,r){var n,a,o,i,c,u;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,n=f.randomBytes(8).toString("hex"),a=f.randomBytes(24).toString("hex"),o=f.createHash("sha256").update(a).digest("hex"),e.n=1,m.findOne({state:"created"}).sort({_id:-1}).lean();case 1:if(i=e.v){e.n=2;break}return i=new m({seedServer:n,hash:o,seedPublic:a,state:"created"}),e.n=2,i.save();case 2:return e.n=3,Promise.all([p.create({fair:{seed:i._id},state:"created"}),m.findByIdAndUpdate(i._id,{state:"completed"},{}),m.create({seedPublic:n,seedServer:a,hash:o,state:"created"})]);case 3:return c=e.v,e.n=4,c[0].populate({path:"fair.seed",select:"seedServer hash"});case 4:c[0]=e.v,c[0]=c[0].toObject(),t(c[0]),e.n=6;break;case 5:e.p=5,u=e.v,r(u);case 6:return e.a(2)}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},rollGetOutcome:function(e){if(!0===function(e,t){for(var r=0,n=e.length%4,a=n>0?n-4:0;a<e.length;a+=4)r=((r<<16)+parseInt(e.substring(a,a+4),16))%t;return 0===r}(e,parseInt(20)))return 100;var t=parseInt(e.slice(0,13),16),r=Math.pow(2,52);return Math.floor((100*r-t)/(r-t))},rollSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"rolling"!==t.state&&"completed"!==t.state&&(delete t.outcome,delete t.fair),t},rollSanitizeBets:function(e){var t,r=[],n=d(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push(o(o({},a),{},{user:{_id:a.user._id,roblox:a.user.roblox,username:a.user.username,avatar:a.user.avatar,rank:a.user.rank,level:a.user.level,rakeback:a.user.rakeback.name,stats:a.user.stats,btype:a.user.btype,createdAt:a.user.createdAt}}))}}catch(e){n.e(e)}finally{n.f()}return r},rollSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,roblox:t.user.roblox,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank,level:t.user.level,rakeback:t.user.rakeback.name,stats:t.user.stats,btype:t.user.btype,createdAt:t.user.createdAt},t}}},4214:e=>{e.exports={generalCheckSendRakebackClaimUser:function(e){if(e.rakeback.available<.1)throw new Error("You’ll need a minimum of 0.1 coin in rakeback earnings to claim.")}}},4217:e=>{"use strict";e.exports=require("cheerio")},4229:e=>{"use strict";e.exports=require("node-fetch")},4269:(e,t,r)=>{var n=r(6037),a=new n.Schema({token:{type:String},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Token",a)},4276:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(829);r(2789),e.exports={authorizeUser:function(e){return function(){var t,r=(t=n().m((function t(r,a,o){var s;return n().w((function(t){for(;;)switch(t.n){case 0:if("string"==typeof(s=r.header("x-auth-token"))||!1!==e){t.n=1;break}return r.user=null,t.a(2,o());case 1:if("string"==typeof s){t.n=2;break}return t.a(2,a.status(401).json({success:!1,message:"Authorization denied."}));case 2:return t.p=2,t.n=3,i.verify(s,process.env.TOKEN_SECRET);case 3:r.user=t.v,o(),t.n=5;break;case 4:return t.p=4,t.v,t.a(2,a.status(401).json({success:!1,error:{type:"error",message:"Authorization denied."}}));case 5:return t.a(2)}}),t,null,[[2,4]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t,n){return r.apply(this,arguments)}}()},authorizeAdmin:function(e,t,r){try{if("admin"!==e.user.rank)return t.status(403).json({success:!1,message:"You are not authorized to access this route."});r()}catch(e){return t.status(403).json({success:!1,error:{type:"error",message:"You are not authorized to access this route."}})}}}},4330:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return c(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,c(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,c(p,"constructor",l),c(l,"constructor",d),d.displayName="GeneratorFunction",c(l,a,"GeneratorFunction"),c(p),c(p,a,"Generator"),c(p,n,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},c(e,t,r,n)}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){f(o,n,a,i,s,"next",e)}function s(e){f(o,n,a,i,s,"throw",e)}i(void 0)}))}}r(8749);var m=r(2789),h=r(1545),y=r(8921),v=r(6232),b=r(3304),g=r(7908).socketRemoveAntiSpam,k=r(168),w=k.authRobloxGetToken,S=k.authSendRobloxChallengeContinue,A=k.authSendRobloxTwoStepVerify,x=k.authRobloxSendSecurityEnable,_=r(901),O=_.cashierCheckSendLimitedEnableRoblox,j=(_.cashierCheckSendLimitedGenerateType,_.cashierCheckSendLimitedVerifyData),T=_.cashierCheckSendLimitedVerifyRoblox,P=_.cashierCheckSendLimitedDepositData,C=_.cashierCheckSendLimitedDepositRoblox,I=_.cashierCheckSendLimitedDepositItems,E=_.cashierCheckSendLimitedDepositUser,D=_.cashierCheckSendLimitedWithdrawData,G=_.cashierCheckSendLimitedWithdrawRoblox,M=_.cashierCheckSendLimitedWithdrawTransaction,R=_.cashierCheckSendLimitedWithdrawUser,B=_.cashierLimitedGetDummyItem,U=_.cashierLimitedGetInventory,Y=_.cashierLimitedGetItems,N=_.cashierLimitedGetItemImages,F=_.cashierGetUserCanTrade,L=(_.cashierSendLimitedTwoStepRedeem,_.cashierLimitedSendTrade),$=_.cashierLimitedSendTradeAccept,q=_.cashierLimitedSendTradeDecline,J=_.cashierLimitedFormatItems,K=_.cashierLimitedFormatDepositItems,W=_.cashierLimitedFormatTransactions,V=_.cashierLimitedFormatTransaction,H=[],z=function(){var e=p(s().m((function e(t,r,n,a,o){var i,c,d,l,f;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,i=[],i=[v.find({state:"created"}).select("amount deposit state").lean()],void 0!==n.roblox&&(i=[].concat(u(i),[h.findOne({user:n._id}).select("items updatedAt").lean(),y.find({accepted:!0}).select("assetId image amount accepted").lean()])),e.n=1,Promise.all(i);case 1:if(c=e.v,void 0!==n.roblox){e.n=2;break}c[1]=[],e.n=5;break;case 2:if(!(null===c[1]||new Date(c[1].updatedAt).getTime()+6e4<(new Date).getTime())){e.n=5;break}return e.n=3,U(n.proxy,n.roblox.id);case 3:return d=e.v,l=J(d,c[2]),e.n=4,h.findOneAndUpdate({user:n._id},{items:l,updatedAt:(new Date).getTime()},{new:!0,upsert:!0}).select("items").lean();case 4:c[1]=e.v;case 5:o({success:!0,deposit:c[1].items,withdraw:W(c[0])}),e.n=7;break;case 6:e.p=6,f=e.v,o({success:!1,error:{type:"error",message:f.message}});case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Q=function(){var e=p(s().m((function e(t,r,n,a,o){var i,c,u,d,l;return s().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,O(n),i=null,c={},void 0===a.challengeId){e.n=3;break}return e.n=1,w(n.proxy);case 1:return i=e.v,c={actionType:"Generic",challengeId:a.twoStepId,code:a.twoStepCode},e.n=2,A(n.proxy,i,n.roblox.cookie,n.roblox.id,"Authenticator",c);case 2:return u=e.v,c={challengeType:"twostepverification",challengeId:a.challengeId,twoStepId:a.twoStepId,challengeMetadata:JSON.stringify({actionType:"Generic",challengeId:a.twoStepId,verificationToken:u.verificationToken,rememberDevice:!1})},e.n=3,S(n.proxy,i,n.roblox.cookie,c);case 3:return e.n=4,w(n.proxy,n.roblox.cookie);case 4:return i=e.v,e.n=5,x(n.proxy,i,n.roblox.cookie,n.roblox.id,c);case 5:void 0!==(d=e.v).sessionId?o({success:!0}):o({success:!0,challengeId:d.challengeId,twoStepId:d.twoStepId}),g(n._id),e.n=7;break;case 6:e.p=6,l=e.v,g(r.decoded._id),o({success:!1,error:{type:"error",message:void 0===l.relogin?l.message:"Your roblox session has been expired. Please login again."}});case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),X=function(){var e=p(s().m((function e(t,r,n,a,o){var i,c,u,d;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,j(a),T(n),e.n=1,w(n.proxy);case 1:return i=e.v,c={actionType:"Generic",challengeId:a.challengeId,code:a.twoStepCode},e.n=2,A(i,n.proxy,n.roblox.cookie,n.roblox.id,"Authenticator",c);case 2:return u=e.v,e.n=3,x(i,n.proxy,n.roblox.cookie,n.roblox.id,a.challengeId,u.verificationToken);case 3:e.v,o({success:!0,user:userDatabase}),g(n._id),e.n=5;break;case 4:e.p=4,d=e.v,g(r.decoded._id),o({success:!1,error:{type:"error",message:void 0===d.relogin?d.message:"Your roblox session has been expired. Please login again."}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Z=function(){var e=p(s().m((function e(t,r,n,a,o){var i,c,u,d,l;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,P(a),C(n),e.n=1,Promise.all([h.findOne({user:n._id}).select("items").lean(),v.find({"deposit.user":n._id,state:"created"}).select("deposit state").lean(),v.find({"deposit.user":n._id,state:"canceled",updatedAt:{$gte:new Date((new Date).getTime()-36e5)}}).select("deposit state updatedAt").lean()]);case 1:return i=e.v,I(a,i[0].items,i[1]),c=K(a,i[0].items),e.n=2,F(n.proxy,n.roblox.cookie,"4586404680");case 2:return u=e.v,E(n,i[1],i[2],u),d=c.reduce((function(e,t){return e+t.amount}),0),e.n=3,v.create({amount:d,deposit:{user:n._id,items:c},state:"created"});case 3:i=(i=e.v).toObject(),t.of("/socket/cashier").emit("limitedTransaction",{transaction:V(i)}),o({success:!0,transaction:i}),g(n._id),e.n=5;break;case 4:e.p=4,l=e.v,g(r.decoded._id),o({success:!1,error:{type:"error",message:void 0===l.relogin?l.message:"Your roblox session has been expired. Please login again."}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ee=function(){var e=p(s().m((function e(t,r,n,a,o){var i,c,u,d,l,f,p,y,k,S;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,D(a),G(n),e.n=1,Promise.all([v.findById(a.transactionId).select("amount deposit state").populate({path:"deposit.user",select:"roblox affiliates proxy"}).lean(),v.find({"deposit.user":n._id,state:"created"}).select("deposit state").lean(),h.findOne({user:n._id}).select("items").lean()]);case 1:return i=e.v,M(n,i[0],H),e.p=2,H.push(i[0]._id.toString()),c=B(i[2].items,i[1]),u=Math.floor(i[0].amount-c.amount)>0?Math.floor(i[0].amount-c.amount):0,d=Math.floor(u/1e3*3),e.n=3,F(n.proxy,n.roblox.cookie,i[0].deposit.user.roblox.id);case 3:return l=e.v,R(n,u,l),e.n=4,Promise.all([w(n.proxy,n.roblox.cookie),w(i[0].deposit.user.proxy,i[0].deposit.user.roblox.cookie)]);case 4:return f=e.v,body={offers:[{userId:i[0].deposit.user.roblox.id,userAssetIds:i[0].deposit.items.map((function(e){return e.uniqueId})),robux:0},{userId:n.roblox.id,userAssetIds:[c.uniqueId],robux:0}]},e.n=5,L(f[1],i[0].deposit.user.proxy,i[0].deposit.user.roblox.cookie,body);case 5:if(!0!==(p=e.v).success){e.n=7;break}return e.n=6,$(f[0],n.proxy,n.roblox.cookie,p.tradeId);case 6:p=e.v;case 7:if(y=[],!0!==p.success){e.n=9;break}return y=[v.findByIdAndUpdate(i[0]._id,{amount:u,data:{tradeId:p.tradeId},withdraw:{user:n._id,items:[c]},state:"completed"},{new:!0}).select("amount deposit state").lean(),m.findByIdAndUpdate(n._id,{$inc:{balance:-u,"stats.withdraw":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),m.findByIdAndUpdate(i[0].deposit.user._id,{$inc:{balance:u,"stats.deposit":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),b.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":d,"stats.total.withdraw":d,"stats.limited.deposit":d,"stats.limited.withdraw":d}},{upsert:!0})],void 0!==i[0].deposit.user.affiliates.referrer&&y.push(m.findByIdAndUpdate(i[0].deposit.user.affiliates.referrer,{$inc:{"affiliates.deposit":u},updatedAt:(new Date).getTime()},{})),e.n=8,Promise.all(y);case 8:i=e.v,t.of("/socket/general").to(i[2]._id.toString()).emit("user",{user:i[2]}),e.n=14;break;case 9:if(void 0===p.tradeId){e.n=12;break}return e.n=10,q(f[1],i[0].deposit.user.proxy,i[0].deposit.user.roblox.cookie,p.tradeId);case 10:return p=e.v,y=[v.findByIdAndUpdate(i[0]._id,{amount:u,data:{tradeId:p.tradeId},withdraw:{user:n._id,items:[c]},state:!0===p.success?"canceled":"sent"},{new:!0}).select("amount deposit state").lean()],!0!==p.success&&y.push(m.findByIdAndUpdate(n._id,{$inc:{balance:-u,"stats.withdraw":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.n=11,Promise.all(y);case 11:i=e.v,!0!==p.success&&te(t,i[0]),e.n=14;break;case 12:return y=[v.findByIdAndUpdate(i[0]._id,{amount:u,state:"canceled"},{new:!0}).select("amount deposit state").lean()],e.n=13,Promise.all(y);case 13:i=e.v;case 14:t.of("/socket/cashier").emit("limitedTransaction",{transaction:V(i[0])}),o({success:!0,transaction:i[0],user:i[1]}),H.splice(H.indexOf(i[0]._id.toString()),1),g(n._id),e.n=16;break;case 15:e.p=15,k=e.v,g(r.decoded._id),H.splice(H.indexOf(i[0]._id.toString()),1),o({success:!1,error:{type:"error",message:k.message}});case 16:e.n=18;break;case 17:e.p=17,S=e.v,g(r.decoded._id),o({success:!1,error:{type:"error",message:void 0===S.relogin?S.message:"Your roblox session has been expired. Please login again."}});case 18:return e.a(2)}}),e,null,[[2,15],[0,17]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),te=function(){var e=p(s().m((function e(t,r){return s().w((function(e){for(;;)switch(e.n){case 0:case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),re=function(){var e=p(s().m((function e(){var t,r,n,c,u,d,l,f,p;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Y();case 1:return t=e.v,r=Object.entries(t).map((function(e){var t=i(e,2),r=t[0];return t[1],r})),e.n=2,N(r);case 2:return n=e.v,t=Object.entries(t).map((function(e){var t=i(e,2),r=t[0],a=t[1],o=n.findIndex((function(e){return e.targetId.toString()===r.toString()}));return{assetId:r,name:a[0],image:-1!==o?n[o].imageUrl:"",amount:Math.floor(1e3*a[4]),accepted:!0}})),e.n=3,y.find({}).select("assetId").lean();case 3:c=e.v,u=o(t),e.p=4,l=s().m((function e(){var t;return s().w((function(e){for(;;)switch(e.n){case 0:if(t=d.value,-1!==c.findIndex((function(e){return e.assetId===t.assetId}))){e.n=2;break}return e.n=1,y.create({assetId:t.assetId,name:t.name,image:t.image,amount:t.amount,amountFixed:t.amount,accepted:t.accepted});case 1:e.n=3;break;case 2:return e.n=3,y.findOneAndUpdate({assetId:t.assetId},{amount:t.amount,accepted:t.accepted},{upsert:!0});case 3:return e.a(2)}}),e)})),u.s();case 5:if((d=u.n()).done){e.n=7;break}return e.d(a(l()),6);case 6:e.n=5;break;case 7:e.n=9;break;case 8:e.p=8,f=e.v,u.e(f);case 9:return e.p=9,u.f(),e.f(9);case 10:setTimeout((function(){re()}),864e5),e.n=12;break;case 11:e.p=11,p=e.v,setTimeout((function(){re()}),864e5),console.error(p);case 12:return e.a(2)}}),e,null,[[4,8,9,10],[0,11]])})));return function(){return e.apply(this,arguments)}}();e.exports={cashierGetLimitedDataSocket:z,cashierSendLimitedEnableSocket:Q,cashierSendLimitedVerifySocket:X,cashierSendLimitedDepositSocket:Z,cashierSendLimitedWithdrawSocket:ee,cashierLimitedInit:function(e){try{re(e)}catch(e){console.error(e)}}}},4332:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return d(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(d(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,d(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=l,d(p,"constructor",l),d(l,"constructor",c),c.displayName="GeneratorFunction",d(l,a,"GeneratorFunction"),d(p),d(p,a,"Generator"),d(p,n,(function(){return this})),d(p,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:o,m}})()}function d(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){d(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},d(e,t,r,n)}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}r(8749);var p=r(2789),m=r(5632),h=r(4946),y=r(8744),v=r(8875),b=r(6112),g=r(7908).socketRemoveAntiSpam,k=r(8461),w=k.settingGet,S=(k.getMinimumValue,k.getMaximumValue,k.findPercent),A=k.findTCountPercent,x=r(4599),_=x.towersCheckSendBetData,O=x.towersCheckSendBetUser,j=x.towersCheckSendBetGame,T=x.towersCheckSendBetSeed,P=x.towersCheckSendRevealData,C=x.towersCheckSendRevealGame,I=x.towersCheckSendCashoutGame,E=x.towersGetGamePayout,D=x.towersGenerateDeck,G=x.towersShuffleDeck,M=x.towersSanitizeGame,R=r(836),B=R.generalUserGetRakeback,U=R.generalUserGetFormated,Y=r(5507).generalAddBetsList,N=[],F=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s,c,d,l,f,b,k,S,A,x,P,C,I,E,R;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,_(a),O(a,n),i=N.find((function(e){return e.user._id.toString()===n._id.toString()})),j(i),e.n=1,m.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 1:return s=e.v,T(s),e.n=2,y.findOne({state:"running"}).select("state").lean();case 2:return c=e.v,d=Math.floor(a.amount),l=w(),f=B(n),b=!0!==n.limits.blockSponsor?Math.floor(d*f.percentage*l.general.reward.multiplier):0,k=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*d):0,S="".concat(s.seedServer,"-").concat(s.nonce,"-").concat(s.seedClient),A=D(a.risk),A=G(A,S),x=[],e.n=3,v.find({enabled:"true"}).select("creators").lean();case 3:return P=e.v,C=P.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),I=0===n.btype?{balance:-d,xp:!0!==n.limits.blockSponsor?Math.floor(d*process.env.XP_RATE*l.general.reward.multiplier):0,"stats.bet":d,"leaderboard.points":null!==c&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?d:0,"affiliates.generated":k,"affiliates.leaderboardpoints":C&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?d:0,"rakeback.earned":b,"rakeback.available":b}:{fbalance:-d},x=[p.findByIdAndUpdate(n._id,{$inc:I,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban fbalance verifiedAt updatedAt").lean(),m.findByIdAndUpdate(s._id,{$inc:{nonce:1}},{}),h.create({amount:d,risk:a.risk,deck:A,fair:{seed:s._id,nonce:s.nonce},user:n._id,state:"created",btype:n.btype})],void 0!==n.affiliates.referrer&&k>0&&0===n.btype&&x.push(p.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":k,"affiliates.available":k},updatedAt:(new Date).getTime()},{})),e.n=4,Promise.all(x);case 4:(E=e.v)[2]=E[2].toObject(),N.push(E[2]),o({success:!0,user:E[0],game:M(E[2])}),g(n._id),e.n=6;break;case 5:e.p=5,R=e.v,g(r.decoded._id),o({success:!1,error:{type:"error",message:R.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),L=function(){var e=f(u().m((function e(t,r,n,a,i){var c,d,l,f,m,y,v,k,x,_,O,j,T,I,D;return u().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,P(a),c=N.find((function(e){return e.user._id.toString()===n._id.toString()})),C(c),d="medium"===c.risk&&2===Math.floor(a.tile)?1:Math.floor(a.tile),l=c.revealed.length+1,"coin"===c.deck[c.revealed.length][d]&&w().games.ctotal.enabled&&0===n.btype&&("user"===n.rank&&(f=S(c.amount,n.balance,w().games.ctowers),Math.floor(100*Math.random())+1<f&&(c.deck[c.revealed.length]=$(c.deck[c.revealed.length],d)),0===f&&(m=A(c.amount,c.risk,l,w().games.cstowers),Math.floor(100*Math.random())+1<m&&(c.deck[c.revealed.length]=$(c.deck[c.revealed.length],d)))),"mod"!==n.rank&&"partner"!==n.rank||(y=S(c.amount,n.balance,w().games.mctowers),Math.floor(100*Math.random())+1<y&&(c.deck[c.revealed.length]=$(c.deck[c.revealed.length],d)),0===y&&(v=A(c.amount,c.risk,l,w().games.mcstowers),Math.floor(100*Math.random())+1<v&&(c.deck[c.revealed.length]=$(c.deck[c.revealed.length],d))))),c.revealed.push({tile:d,row:c.deck[c.revealed.length]}),!("lose"===c.revealed[c.revealed.length-1].row[d]||c.revealed.length>=8)){e.n=2;break}return k="lose"!==c.revealed[c.revealed.length-1].row[d]?E(c):0,x=Math.floor(k/c.amount*100),_=0===k||x>=125?c.amount:k,O=!0!==n.limits.blockSponsor?c.amount:0,j=[],T=0===n.btype?{balance:k,"stats.won":k,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-_)<=0?-n.limits.betToWithdraw:-_,"limits.betToRain":Math.floor(n.limits.betToRain-_)<=0?-n.limits.betToRain:-_}:{fbalance:k},j=[p.findByIdAndUpdate(n._id,{$inc:T,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.findByIdAndUpdate(c._id,{payout:k,multiplier:x,deck:c.deck,revealed:c.revealed,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount btype payout multiplier risk deck revealed user btype state updatedAt").lean()],k>0&&0===n.btype&&(j=[].concat(s(j),[b.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*O)}},{new:!0}).select("amount participants type state updatedAt").lean()])),e.n=1,Promise.all(j);case 1:I=e.v,N.splice(N.findIndex((function(e){return e._id.toString()===I[1]._id.toString()})),1),t.of("/socket/general").to(n._id.toString()).emit("user",{user:I[0]}),k>0&&t.of("/socket/general").emit("rain",{rain:I[2]}),Y(t,o(o({},I[1]),{},{user:U(n),method:"towers"})),c=I[1],e.n=4;break;case 2:return e.n=3,h.findByIdAndUpdate(c._id,{revealed:c.revealed,updatedAt:(new Date).getTime()},{new:!0}).select("amount risk deck revealed user state").lean();case 3:c=e.v,N.splice(N.findIndex((function(e){return e._id.toString()===c._id.toString()})),1,c);case 4:i({success:!0,game:M(c)}),g(n._id),e.n=6;break;case 5:e.p=5,D=e.v,g(r.decoded._id),i({success:!1,error:{type:"error",message:D.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),$=function(e,t){var r=s(e);if("lose"===r[t])return r;r[t]="lose";for(var n=0;n<r.length;n++)if("lose"===r[n]&&t!==n){r[n]="coin";break}return r},q=function(){var e=f(u().m((function e(t,r,n,a,i){var s,c,d,l,f,m,y,v;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,s=N.find((function(e){return e.user._id.toString()===n._id.toString()})),I(s),c=E(s),d=Math.floor(c/s.amount*100),l=d>=125?s.amount:c,f=!0!==n.limits.blockSponsor?s.amount:0,m=0===n.btype?{balance:c,"stats.won":c,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-l)<=0?-n.limits.betToWithdraw:-l,"limits.betToRain":Math.floor(n.limits.betToRain-l)<=0?-n.limits.betToRain:-l}:{fbalance:c},e.n=1,Promise.all([p.findByIdAndUpdate(n._id,{$inc:m,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance xp stats rakeback mute ban verifiedAt updatedAt").lean(),h.findByIdAndUpdate(s._id,{payout:c,multiplier:d,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("amount btype payout multiplier risk deck revealed user state btype updatedAt").lean(),b.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:0===n.btype?Math.floor(.001*f):0}},{new:!0}).select("amount participants type state updatedAt").lean()]);case 1:y=e.v,N.splice(N.findIndex((function(e){return e._id.toString()===y[1]._id.toString()})),1),t.of("/socket/general").emit("rain",{rain:y[2]}),Y(t,o(o({},y[1]),{},{user:U(n),method:"towers"})),i({success:!0,user:y[0],game:M(y[1])}),g(n._id),e.n=3;break;case 2:e.p=2,v=e.v,g(r.decoded._id),i({success:!1,error:{type:"error",message:v.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),J=function(){var e=f(u().m((function e(t){var r;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,h.find({state:"created"}).select("amount risk deck revealed user state").lean();case 1:N=e.v,e.n=3;break;case 2:e.p=2,r=e.v,console.error(r);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}();e.exports={towersGetGame:function(e){var t=N.findIndex((function(t){return t.user.toString()===e._id.toString()}));return-1!==t?M(N[t]):null},towersSendBetSocket:F,towersSendRevealSocket:L,towersSendCashoutSocket:q,towersInit:J}},4383:e=>{"use strict";e.exports=require("fs")},4386:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(2789),s=r(5734).rateLimiter,c=r(7908).socketCheckUserData,u=r(8461).settingCheck,d=r(5507).generalGetBetsDataSocket;e.exports=function(e,t){t.on("getBetsData",function(){var r,a=(r=n().m((function r(a,o){var l,f,p,m;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,l=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,s.consume(l);case 2:if(r.p=2,f=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 3:f=r.v;case 4:c(f,!1),u(f),d(e,t,f,a,o),r.n=6;break;case 5:r.p=5,p=r.v,o({success:!1,error:{type:"error",message:p.message}});case 6:r.n=8;break;case 7:r.p=7,m=r.v,o({success:!1,error:{type:"error",message:void 0!==m.message?m.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())}},4437:e=>{"use strict";e.exports=require("socket.io")},4569:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return d(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(d(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,d(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=l,d(p,"constructor",l),d(l,"constructor",c),c.displayName="GeneratorFunction",d(l,a,"GeneratorFunction"),d(p),d(p,a,"Generator"),d(p,n,(function(){return this})),d(p,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:o,m}})()}function d(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){d(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},d(e,t,r,n)}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var p=r(3304),m=(r(2789),r(5632),r(3844),r(6232),r(5958),r(4823)),h=r(827),y=r(6930),v=r(6363),b=r(5329),g=r(286),k=(r(988),r(6966),r(6769),r(5964),r(8702),r(4946),r(3702),r(2256),r(2974),r(5241),r(8455),r(1590)),w=k.adminCheckGetStatsListData,S=k.adminFormatStats,A=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s,c;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,p.find({}).sort({createdAt:-1}).limit(420).select("stats.total createdAt").lean();case 1:i=e.v,s=S(i),o({success:!0,stats:s,list:i}),e.n=3;break;case 2:e.p=2,c=e.v,o({success:!1,error:{type:"error",message:c.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),x=function(){var e=f(u().m((function e(t,r,n,a,o){var i,s,c;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,w(a),i=12*(a.page-1),e.n=1,Promise.all([p.countDocuments({}),p.find({}).limit(12).skip(i).sort({createdAt:-1}).select("stats createdAt").lean()]);case 1:s=e.v,o({success:!0,count:s[0],stats:s[1]}),e.n=3;break;case 2:e.p=2,c=e.v,o({success:!1,error:{type:"error",message:c.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),_=function(){var e=f(u().m((function e(t,r,n,a,i){var c,d,l,f,p,k;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([m.countDocuments({state:"completed"}),h.countDocuments({state:"completed"}),y.countDocuments({state:"completed"}),v.countDocuments({state:"completed"}),b.countDocuments({state:"completed"}),g.countDocuments({state:"completed"}),m.find({state:"completed"}).sort({createdAt:-1}).limit(12*a.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),h.find({state:"completed"}).sort({createdAt:-1}).limit(12*a.page).select("amount type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),y.find({state:"completed"}).sort({createdAt:-1}).limit(12*a.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),v.find({state:"completed"}).sort({createdAt:-1}).limit(12*a.page).select("amount data type user state createdAt").populate({path:"user",select:"username avatar"}).lean(),b.find({state:"completed"}).sort({createdAt:-1}).limit(12*a.page).select("amount sender receiver state createdAt").populate({path:"receiver.user",select:"username avatar"}).populate({path:"sender.user",select:"username avatar"}).lean(),g.find({state:"completed"}).sort({createdAt:-1}).limit(12*a.page).select("amount type user state createdAt").populate({path:"user",select:"username avatar"}).lean()]);case 1:c=e.v,d=c.slice(0,6).reduce((function(e,t){return e+t}),0),(l=[].concat(s(c[6].map((function(e){return o(o({},e),{},{method:"crypto"})}))),s(c[7].map((function(e){return o(o({},e),{},{method:"depositBonus"})}))),s(c[8].map((function(e){return o(o({},e),{},{method:"gift"})}))),s(c[9].map((function(e){return o(o({},e),{},{method:"credit"})}))),s(c[10].map((function(e){return o(o({},e),{},{method:"tip"})}))),s(c[11].map((function(e){return o(o({},e),{},{method:"balance"})}))))).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),f=12*(a.page-1),p=12*a.page,l=l.slice(f,p),i({success:!0,count:d,transactions:l}),e.n=3;break;case 2:e.p=2,k=e.v,i({success:!1,error:{type:"error",message:k.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetStatsDataSocket:A,adminGetStatsListSocket:x,adminGetCryptoTransactionListSocket:_}},4585:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(2789),s=r(5734).rateLimiter,c=r(7908),u=c.socketCheckUserData,d=(c.socketCheckUserRank,c.socketCheckAntiSpam),l=c.socketRemoveAntiSpam,f=r(8461).settingCheck,p=r(1814).generalSendPromoClaimSocket;e.exports=function(e,t){t.on("sendPromoClaim",function(){var r,a=(r=n().m((function r(a,o){var c,m,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,c=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,s.consume(c);case 3:return r.n=4,d(t.decoded._id);case 4:return r.p=4,r.n=5,i.findById(t.decoded._id).select("username avatar ips rank xp stats limits mute ban").lean();case 5:m=r.v,u(m,!0),f(m),p(e,t,m,a,o),r.n=7;break;case 6:r.p=6,h=r.v,l(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())}},4599:(e,t,r)=>{var n=r(8749),a=r(1024);e.exports={towersCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.risk||"string"!=typeof e.risk||!0!==["easy","medium","hard"].includes(e.risk))throw new Error("You’ve entered an invalid risk.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.TOWERS_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.TOWERS_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.TOWERS_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.TOWERS_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."))},towersCheckSendBetUser:function(e,t){if(0===t.btype){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")}else if(t.fbalance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")},towersCheckSendBetGame:function(e){if(void 0!==e)throw new Error("You need to complete your running towers game first.")},towersCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},towersCheckSendRevealData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.tile||null===e.tile||!0===isNaN(e.tile)||Math.floor(e.tile)<0||Math.floor(e.tile)>2)throw new Error("You’ve entered an invalid tile.")},towersCheckSendRevealGame:function(e){if(void 0===e)throw new Error("You’ve no running towers game at the moment.")},towersCheckSendCashoutGame:function(e){if(null===e)throw new Error("You’ve no running towers game at the moment.");if(0===e.revealed.length)throw new Error("You’ve to reveal at least one row.")},towersGetGamePayout:function(e){var t="easy"===e.risk?1.425:"medium"===e.risk?1.9:2.85;return Math.floor(e.amount*Math.pow(t,e.revealed.length))},towersGenerateDeck:function(e){for(var t=[],r=0;r<8;r++){var n="medium"===e?2:3,a="hard"===e?2:1;t[r]=[];for(var o=0;o<n;o++)o<a?t[r].push("lose"):t[r].push("coin")}return t},towersShuffleDeck:function(e,t){for(var r=[],o=0;o<8;o++){var i=n.createHash("sha256").update("".concat(t,"-").concat(o)).digest("hex"),s=new a(i).shuffle(e[o]);r.push(s)}return r},towersSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.deck,delete t.fair),t}}},4607:(e,t,r)=>{var n=r(7906);e.exports={adminCheckSendSettingValueData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.setting||null===e.setting||"string"!=typeof e.setting||e.setting.length>=100||!0!==n.isAlphanumeric(e.setting,"en-US",{ignore:"."}))throw new Error("Your entered setting is invalid.");if(void 0===e.value||null===e.value||!0!==["chat.mode","general.reward.multiplier","depositbonus.amount","depositbonus.famount","redeem.amount","games.cases","games.mcases","games.cmines","games.ctowers","games.csmines","games.cstowers","games.mcmines","games.mctowers","games.mcsmines","games.mcstowers","games.crashees","games.slides","games.cblackjack.value"].includes(e.setting)&&"boolean"!=typeof e.value||"general.reward.multiplier"===e.setting&&"string"!=typeof e.value||"chat.mode"===e.setting&&"string"!=typeof e.value)throw new Error("Your entered value is invalid.")}}},4680:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckAntiSpam,f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(8361),h=m.generalGetRakebackDataSocket,y=m.generalSendRakebackClaimSocket;e.exports=function(e,t){t.on("getRakebackData",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 3:u=r.v;case 4:d(u,!1),p(u),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRakebackClaim",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank limits rakeback mute ban").lean();case 5:u=r.v,d(u,!0),p(u),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},4729:e=>{"use strict";e.exports=require("bcryptjs")},4823:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},data:{providerId:{type:String},transaction:{type:String},sender:{type:String},receiver:{type:String},currency:{type:String},cryptoAmount:{type:Number}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CryptoTransaction",a)},4825:(e,t,r)=>{var n=r(6037),a=new n.Schema({code:{type:String},reward:{type:Number},redeemer:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("GiftCode",a)},4862:(e,t,r)=>{var n=r(6037),a=new n.Schema({seedServer:{type:String},hash:{type:String},seedPublic:{type:String},chain:{type:String},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CrashSeed",a)},4906:(e,t,r)=>{e.exports=function(e){r(1049)(e),r(6466)(e),r(3932)(e),r(7073)(e),r(3170)(e),r(7097)(e),r(8481)(e),r(4917)(e),r(1418)(e),r(5009)(e),r(8858)(e),r(7523)(e),r(2848)(e),r(2934)(e)}},4917:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(6338),g=b.unboxGetData,k=b.unboxGetBoxDataSocket,w=b.unboxSendBetSocket;e.exports=function(e){e.of("/socket/unbox").use(function(){var e=i(n().m((function e(t,r){var a,o,i,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,f("unbox",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:return e.n=6,g();case 6:i=e.v,t.emit("init",{boxes:i.boxes}),r(),e.n=8;break;case 7:return e.p=7,c=e.v,e.a(2,r({success:!1,error:{type:"error",message:c.message}}));case 8:return e.a(2)}}),e,null,[[2,4],[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/unbox").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("unbox",r),t.on("getBoxData",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,u.consume(i);case 2:if(r.p=2,s=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,c.findById(t.decoded._id).select("username avatar rank mute ban");case 3:s=r.v;case 4:l(s,!1),v(s),k(e,t,s,a,o),r.n=6;break;case 5:r.p=5,d=r.v,o({success:!1,error:{type:"error",message:d.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBet",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.unbox.enabled"),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("unbox",r);case 1:return e.a(2)}}),e)}))))}))}},4946:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},risk:{type:String},deck:[[{type:String}]],revealed:[{tile:{type:Number},row:[{type:String}]}],fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},btype:{type:Number},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("TowersGame",a)},5009:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(3184),g=b.upgraderGetItemsDataSocket,k=b.upgraderSendCreateSocket;e.exports=function(e){e.of("/socket/upgrader").use(function(){var e=i(n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["cf-connecting-ip"]||t.conn.remoteAddress,e.n=1,f("upgrader",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:r(),e.n=7;break;case 6:return e.p=6,i=e.v,e.a(2,r({success:!1,error:{type:"error",message:i.message}}));case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/upgrader").on("connection",(function(t){var r=t.handshake.headers["cf-connecting-ip"]||t.conn.remoteAddress;p("upgrader",r),t.on("getItemsData",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["cf-connecting-ip"]||t.conn.remoteAddress,r.n=2,u.consume(i);case 2:if(r.p=2,s=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,c.findById(t.decoded._id).select("username avatar rank mute ban");case 3:s=r.v;case 4:l(s,!1),v(s),g(e,t,s,a,o),r.n=6;break;case 5:r.p=5,d=r.v,o({success:!1,error:{type:"error",message:d.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCreate",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["cf-connecting-ip"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.upgrader.enabled"),k(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["cf-connecting-ip"]||t.conn.remoteAddress,m("upgrader",r);case 1:return e.a(2)}}),e)}))))}))}},5024:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(4229),s=r(7016);e.exports={authGetDiscordToken:function(e){return new Promise(function(){var t,r=(t=n().m((function t(r,a){var o,c;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,i("https://discord.com/api/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new s.URLSearchParams({client_id:process.env.DISCORD_CLIENT_ID,client_secret:process.env.DISCORD_CLIENT_SECRET,grant_type:"authorization_code",code:e,redirect_uri:"".concat(process.env.SERVER_BACKEND_URL,"/auth/discord/callback"),scope:"identify email"})});case 1:if(null==(o=t.v)||200!==o.status){t.n=3;break}return t.n=2,o.json();case 2:o=t.v,r(o.access_token),t.n=4;break;case 3:console.log("We are not able to fetch your discord user data at the moment. Please try again later."),a(new Error("We are not able to fetch your discord user data at the moment. Please try again later."));case 4:t.n=6;break;case 5:t.p=5,c=t.v,console.log(c),a(new Error("Something went wrong. Please try again in a few seconds."));case 6:return t.a(2)}}),t,null,[[0,5]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())}}},5102:(e,t,r)=>{var n=r(6037),a=new n.Schema({name:{type:String},price:{type:Number},fee:{type:Number}});e.exports=n.model("CryptoPrice",a)},5165:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(1572).createTransport({host:process.env.EMAIL_SMTP_HOST,port:process.env.EMAIL_SMTP_PORT,auth:{user:process.env.EMAIL_SMTP_USER,pass:process.env.EMAIL_SMTP_PASSWORD}});e.exports={emailSend:function(e,t,r){return new Promise(function(){var a,s=(a=n().m((function a(o,s){var c,u;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,c={from:"".concat(process.env.EMAIL_FROM_NAME," <").concat(process.env.EMAIL_FROM,">"),to:e,subject:t,text:r},n.n=1,i.sendMail(c);case 1:o(),n.n=3;break;case 2:n.p=2,u=n.v,s(u);case 3:return n.a(2)}}),a,null,[[0,2]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function s(e){o(i,r,n,s,c,"next",e)}function c(e){o(i,r,n,s,c,"throw",e)}s(void 0)}))});return function(e,t){return s.apply(this,arguments)}}())}}},5182:(e,t,r)=>{var n=r(6037),a=new n.Schema({code:{type:String},reward:{type:Number},levelMin:{type:Number},redeemers:[{user:{type:n.Schema.ObjectId,ref:"User"}}],allowLevel:{type:Number},ipRestricktLevel:{type:Number},redeemptionsTotal:{type:Number,default:0},redeemptionsMax:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("PromoCode",a)},5241:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},rows:{type:Number},risk:{type:String},ticket:{type:Number},btype:{type:Number},fair:{seedOld:{type:n.Schema.ObjectId,ref:"PlinkoSeed"},seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number},clientSeed:{type:String}},user:{type:n.Schema.ObjectId,ref:"User"},stats:{balanceBefore:{type:Number,default:0}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("PlinkoGame",a)},5297:(e,t,r)=>{var n=r(7906);e.exports={generalCheckSendAffiliateCodeData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||e.code.length<2||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"}))throw new Error("Your entered affiliate code is invalid.")},generalCheckSendAffiliateCodeCode:function(e){if(null!=e)throw new Error("You’ve entered an affiliate code that is already used by another user.")},generalCheckSendAffiliateClaimCodeData:function(e){if(null==e)throw new Error("Something went wrong! Please try again in a few seconds.");if(void 0===e.code||null===e.code||"string"!=typeof e.code||""===e.code.trim()||e.code.length<2||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"}))throw new Error("Your entered affiliate code is invalid.")},generalCheckSendAffiliateClaimCodeUser:function(e,t){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0!==e.affiliates.referredAddress)throw new Error("You have already redeemed a affiliate code.")},generalCheckSendAffiliateClaimCodeCode:function(e,t){if(null===t)throw new Error("Your provided affiliate code is invalid.");if(e._id.toString()===t._id.toString())throw new Error("You are not allowed to redeem your own affiliate code.")},generalCheckSendAffiliateClaimEarningsUser:function(e){if(void 0===e)throw new Error("Something went wrong. Please try again in a few seconds.");if(e.affiliates.available<Math.floor(1e3*process.env.AFFILIATE_MIN_CLAIM))throw new Error("You’ll need a minimum of ".concat(process.env.AFFILIATE_MIN_CLAIM," coin in earnings to claim."))}}},5329:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},sender:{user:{type:n.Schema.ObjectId,ref:"User"}},receiver:{user:{type:n.Schema.ObjectId,ref:"User"}},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("TipTransaction",a)},5398:(e,t,r)=>{var n=r(6037),a=new n.Schema({deck:[{rank:{type:String},suit:{type:String}}],dealerCards:[{rank:{type:String},suit:{type:String}}],fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockId:{type:String}},table:{type:Number},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});a.virtual("bets",{ref:"BlackjackBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("BlackjackGame",a)},5507:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}r(6037);var p=r(988),m=r(6966),h=r(6769),y=r(5964),v=r(8702),b=r(4946),g=r(3702),k=r(2256),w=r(2974),S=r(5241),A=r(8455),x=r(836).generalUserGetFormated,_={all:[],whale:[],lucky:[],my:[]},O=function(){var e=f(a().m((function e(t,r,n,o,i){var c,d,l,f;return a().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,c=_,null==n){e.n=2;break}return d=[p.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null},user:n._id,bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null},user:n._id,bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),S.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),A.find({payout:{$exists:!0,$ne:null},user:n._id}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean()],e.n=1,Promise.all(d);case 1:l=e.v,c.my=[].concat(u(l[0].map((function(e){return s(s({},e),{},{user:x(e.user),method:"crash"})}))),u(l[1].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roll"})}))),u(l[2].map((function(e){return s(s({},e),{},{user:x(e.user),method:"blackjack"})}))),u(l[3].map((function(e){return s(s({},e),{},{user:x(e.user),method:"duels"})}))),u(l[4].map((function(e){return s(s({},e),{},{user:x(e.user),method:"mines"})}))),u(l[5].map((function(e){return s(s({},e),{},{user:x(e.user),method:"towers"})}))),u(l[6].map((function(e){return s(s({},e),{},{user:x(e.user),method:"unbox"})}))),u(l[7].map((function(e){return s(s({},e),{},{user:x(e.user),method:"battles"})}))),u(l[8].map((function(e){return s(s({},e),{},{user:x(e.user),method:"upgrader"})}))),u(l[9].map((function(e){return s(s({},e),{},{user:x(e.user),method:"plinko"})}))),u(l[10].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roulette"})})))),c.my.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),c.my=c.my.slice(0,15);case 2:i({success:!0,bets:c}),e.n=4;break;case 3:e.p=3,f=e.v,i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),j=function(){var e=f(a().m((function e(){var t,r,n;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,t=[p.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),S.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),A.find({payout:{$exists:!0,$ne:null}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null,$gte:1e7},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null,$gte:1e7},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),S.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),A.find({payout:{$exists:!0,$ne:null,$gte:1e7}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),p.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),m.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),h.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier actions user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),y.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),v.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),b.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),g.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),k.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500},bot:!1}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user bot updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),w.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),S.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean(),A.find({payout:{$exists:!0,$ne:null,$gte:10},multiplier:{$gte:500}}).sort({updatedAt:-1}).limit(15).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous"}).lean()],e.n=1,Promise.all(t);case 1:r=e.v,_.all=[].concat(u(r[0].map((function(e){return s(s({},e),{},{user:x(e.user),method:"crash"})}))),u(r[1].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roll"})}))),u(r[2].map((function(e){return s(s({},e),{},{user:x(e.user),method:"blackjack"})}))),u(r[3].map((function(e){return s(s({},e),{},{user:x(e.user),method:"duels"})}))),u(r[4].map((function(e){return s(s({},e),{},{user:x(e.user),method:"mines"})}))),u(r[5].map((function(e){return s(s({},e),{},{user:x(e.user),method:"towers"})}))),u(r[6].map((function(e){return s(s({},e),{},{user:x(e.user),method:"unbox"})}))),u(r[7].map((function(e){return s(s({},e),{},{user:x(e.user),method:"battles"})}))),u(r[8].map((function(e){return s(s({},e),{},{user:x(e.user),method:"upgrader"})}))),u(r[9].map((function(e){return s(s({},e),{},{user:x(e.user),method:"plinko"})}))),u(r[10].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roulette"})})))),_.whale=[].concat(u(r[11].map((function(e){return s(s({},e),{},{user:x(e.user),method:"crash"})}))),u(r[12].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roll"})}))),u(r[13].map((function(e){return s(s({},e),{},{user:x(e.user),method:"blackjack"})}))),u(r[14].map((function(e){return s(s({},e),{},{user:x(e.user),method:"duels"})}))),u(r[15].map((function(e){return s(s({},e),{},{user:x(e.user),method:"mines"})}))),u(r[16].map((function(e){return s(s({},e),{},{user:x(e.user),method:"towers"})}))),u(r[17].map((function(e){return s(s({},e),{},{user:x(e.user),method:"unbox"})}))),u(r[18].map((function(e){return s(s({},e),{},{user:x(e.user),method:"battles"})}))),u(r[19].map((function(e){return s(s({},e),{},{user:x(e.user),method:"upgrader"})}))),u(r[20].map((function(e){return s(s({},e),{},{user:x(e.user),method:"plinko"})}))),u(r[21].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roulette"})})))),_.lucky=[].concat(u(r[22].map((function(e){return s(s({},e),{},{user:x(e.user),method:"crash"})}))),u(r[23].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roll"})}))),u(r[24].map((function(e){return s(s({},e),{},{user:x(e.user),method:"blackjack"})}))),u(r[25].map((function(e){return s(s({},e),{},{user:x(e.user),method:"duels"})}))),u(r[26].map((function(e){return s(s({},e),{},{user:x(e.user),method:"mines"})}))),u(r[27].map((function(e){return s(s({},e),{},{user:x(e.user),method:"towers"})}))),u(r[28].map((function(e){return s(s({},e),{},{user:x(e.user),method:"unbox"})}))),u(r[29].map((function(e){return s(s({},e),{},{user:x(e.user),method:"battles"})}))),u(r[30].map((function(e){return s(s({},e),{},{user:x(e.user),method:"upgrader"})}))),u(r[31].map((function(e){return s(s({},e),{},{user:x(e.user),method:"plinko"})}))),u(r[32].map((function(e){return s(s({},e),{},{user:x(e.user),method:"roulette"})})))),_.all.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),_.whale.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),_.lucky.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),_.all=_.all.slice(0,15),_.whale=_.whale.slice(0,15),_.lucky=_.lucky.slice(0,15),e.n=3;break;case 2:e.p=2,n=e.v,console.error(n);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}();e.exports={generalGetBetsDataSocket:O,generalAddBetsList:function(e,t){try{_.all.unshift(t),_.all.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),_.all.length>15&&_.all.pop(),t.payout>=1e7&&(_.whale.unshift(t),_.whale.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),_.whale.length>15&&_.whale.pop()),t.payout>=10&&t.multiplier>=500&&(_.lucky.unshift(t),_.lucky.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),_.lucky.length>15&&_.lucky.pop()),e.of("/socket/general").emit("bet",{bet:t})}catch(e){console.error(e)}},generalBetsInit:j}},5515:e=>{e.exports={adminCheckGetRainListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendRainAmountData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||e.amount<0)throw new Error("Your entered rain amount value is invalid.")},adminCheckSendRainAmountRain:function(e){if(null===e)throw new Error("Your entered rain is not available.");if("created"!==e.state&&"pending"!==e.state&&"running"!==e.state)throw new Error("Your entered rain is already completed")}}},5632:(e,t,r)=>{var n=r(6037),a=new n.Schema({seedClient:{type:String},seedServer:{type:String},hash:{type:String},nonce:{type:Number},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("UserSeed",a)},5657:(e,t,r)=>{function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(i(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,i(p,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,n,(function(){return this})),i(p,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:s,m}})()}function i(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){i(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},i(e,t,r,n)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}var u=r(8938);function d(e,t){return l.apply(this,arguments)}function l(){return(l=c(o().m((function e(t,r){var n,a;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,u.post("https://auth.roblox.com/v2/logout",{},{httpsAgent:r,proxy:!1,headers:{Cookie:".ROBLOSECURITY=".concat(t)}});case 1:return e.a(2,null);case 2:return e.p=2,a=e.v,e.a(2,(null===(n=a.response)||void 0===n?void 0:n.headers["x-csrf-token"])||null)}}),e,null,[[0,2]])})))).apply(this,arguments)}function f(e,t){return p.apply(this,arguments)}function p(){return(p=c(o().m((function e(t,r){var n,a;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,d(t,r);case 1:return n=e.v,e.n=2,u.post("https://auth.roblox.com/v1/authentication-ticket",{},{httpsAgent:r,proxy:!1,headers:{"x-csrf-token":n,referer:"https://www.roblox.com/madebySynaptrixBitch","Content-Type":"application/json",Cookie:".ROBLOSECURITY=".concat(t)}});case 2:return a=e.v,e.a(2,[a.headers["rbx-authentication-ticket"],n]);case 3:return e.p=3,e.v,e.a(2,"Failed to fetch auth ticket")}}),e,null,[[0,3]])})))).apply(this,arguments)}function m(e,t){return h.apply(this,arguments)}function h(){return(h=c(o().m((function e(t,r){var n,a,i,s,c;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,u.post("https://auth.roblox.com/v1/authentication-ticket/redeem",{authenticationTicket:t},{proxy:!1,httpsAgent:r,headers:{RBXAuthenticationNegotiation:"1"}});case 1:return i=e.v,s=(null===(n=i.headers["set-cookie"])||void 0===n?void 0:n.toString())||"",c=null===(a=s.match(/(_\|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.\|_[A-Za-z0-9]+)/g))||void 0===a?void 0:a.toString(),e.a(2,c);case 2:return e.p=2,e.v,e.a(2,"fail")}}),e,null,[[0,2]])})))).apply(this,arguments)}function y(e,t,r){return v.apply(this,arguments)}function v(){return(v=c(o().m((function e(t,r,n){var a,i;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,u.post("https://auth.roblox.com/v2/logout",{},{httpsAgent:r,proxy:!1,headers:{"x-csrf-token":n,referer:"https://www.roblox.com/madebySynaptrixBitch","Content-Type":"application/json",Cookie:".ROBLOSECURITY=".concat(t)}});case 1:return e.a(2,null);case 2:return e.p=2,i=e.v,e.a(2,(null===(a=i.response)||void 0===a?void 0:a.headers["x-csrf-token"])||null)}}),e,null,[[0,2]])})))).apply(this,arguments)}function b(){return(b=c(o().m((function e(t,r){var a,i,s,c,u;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,f(t,r);case 1:return a=e.v,i=n(a,2),s=i[0],c=i[1],console.log("authTicket: ",s,c),e.n=2,m(s,r);case 2:return u=e.v,console.log("redemptionResult: ",u),y(t,r,c),e.a(2,u);case 3:return e.p=3,e.v,e.a(2,"fail")}}),e,null,[[0,3]])})))).apply(this,arguments)}r(168).authRobloxGetToken,e.exports={generateAuthTicket:f,redeemAuthTicket:m,refresh_cookie:function(e,t){return b.apply(this,arguments)}}},5729:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},playerCount:{type:Number},mode:{type:String},boxes:[{box:{type:n.Schema.ObjectId,ref:"Box"},count:{type:Number}}],options:{levelMin:{type:Number},funding:{type:Number},cursed:{type:Boolean},terminal:{type:Boolean},private:{type:Boolean},affiliateOnly:{type:Boolean},trust:{type:Boolean},trust1:{type:Boolean}},fair:{seedServer:{type:String},hash:{type:String},seedPublic:{type:String},blockId:{type:String}},state:{type:String},btype:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});a.virtual("bets",{ref:"BattlesBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("BattlesGame",a)},5734:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(857).RateLimiterMemory,c=new s({points:120,duration:60}),u=new s({points:8,duration:60}),d=function(){var e=i(n().m((function e(t,r,a){var o;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,o=t.headers["x-forwarded-for"]||t.socket.remoteAddress,e.n=1,c.consume(o);case 1:a(),e.n=3;break;case 2:e.p=2,e.v,r.status(429).json({success:!1,error:{type:"error",message:"You need to slow down, you have send to many request. Try again in a minute."}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n){return e.apply(this,arguments)}}(),l=function(){var e=i(n().m((function e(t,r,a){var o;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,o=t.headers["x-forwarded-for"]||t.socket.remoteAddress,e.n=1,u.consume(o);case 1:a(),e.n=3;break;case 2:e.p=2,e.v,r.status(429).json({success:!1,error:{type:"error",message:"You need to slow down, you have send to many request. Try again in a minute."}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n){return e.apply(this,arguments)}}();e.exports={rateLimiter:c,rateLimiterStrict:u,rateLimiterMiddleware:d,rateLimiterStrictMiddleware:l}},5949:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return p(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(p(t={},n,(function(){return this})),t),l=u.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,p(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=u,p(l,"constructor",u),p(u,"constructor",c),c.displayName="GeneratorFunction",p(u,a,"GeneratorFunction"),p(l),p(l,a,"Generator"),p(l,n,(function(){return this})),p(l,"toString",(function(){return"[object Generator]"})),(f=function(){return{w:o,m}})()}function p(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}p=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){p(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},p(e,t,r,n)}function m(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){m(o,n,a,i,s,"next",e)}function s(e){m(o,n,a,i,s,"throw",e)}i(void 0)}))}}var y=r(8749),v=r(2789),b=r(1373),g=r(5964),k=r(6112),w=r(8744),S=r(7908).socketRemoveAntiSpam,A=r(8461).settingGet,x=r(2507).fairGetData,_=r(7242),O=_.duelsCheckGetGameDataData,j=_.duelsCheckGetGameDataGame,T=_.duelsCheckSendCreateData,P=_.duelsCheckSendCreateUser,C=_.duelsCheckSendBotData,I=_.duelsCheckSendBotGame,E=_.duelsCheckSendJoinData,D=_.duelsCheckSendJoinGame,G=_.duelsCheckSendJoinUser,M=_.duelsCheckSendCancelData,R=_.duelsCheckSendCancelGame,B=_.duelsGenerateGame,U=_.duelsGetGameIndex,Y=_.duelsSanitizeGames,N=_.duelsSanitizeGame,F=r(836),L=F.generalUserGetLevel,$=F.generalUserGetRakeback,q=F.generalUserGetFormated,J=r(5507).generalAddBetsList,K=[],W=[],V=[],H=[],z=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s;return f().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,O(a),void 0!==(i=K[U(K,a.gameId)])){e.n=2;break}return e.n=1,b.findById(a.gameId).select("amount playerCount winner fair state btype createdAt").populate({path:"winner",populate:{path:"user",select:"roblox.id username avatar rank"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank"}}).lean();case 1:i=e.v;case 2:j(i),o({success:!0,game:N(i)}),e.n=4;break;case 3:e.p=3,s=e.v,o({success:!1,error:{type:"error",message:s.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Q=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c,u,d,l,p,m,h;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,T(a),i=K.filter((function(e){return void 0!==e.bets[0]&&e.bets[0].user._id.toString()===n._id.toString()})),P(a,n,i),s=Math.floor(a.amount),c=Math.floor(a.playerCount),u=L(n),d=$(n),e.n=1,B(s,c,n.btype);case 1:return l=e.v,p=[v.findByIdAndUpdate(n._id,{$inc:0===n.btype?{balance:-s,"stats.bet":s}:{fbalance:-s},updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean(),g.create({amount:s,game:l._id,user:n._id,btype:n.btype,bot:!1})],e.n=2,Promise.all(p);case 2:(m=e.v)[1]=m[1].toObject(),m[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:u,rakeback:d,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},l.bets=[m[1]],K.push(l),t.of("/socket/general").to(n._id.toString()).emit("user",{user:m[0]}),t.of("/socket/duels").emit("game",{game:N(l)}),o({success:!0}),S(n._id),e.n=4;break;case 3:e.p=3,h=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),X=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c,d,l,p;return f().w((function(e){for(;;)switch(e.n){case 0:for(e.p=0,C(a),I(n,K[U(K,a.gameId)],V,H),e.p=1,V.push(a.gameId.toString()),i=K[U(K,a.gameId)].amount,s=[],c=0;c<K[U(K,a.gameId)].playerCount-K[U(K,a.gameId)].bets.length;c++)s.push(g.create({amount:i,game:K[U(K,a.gameId)]._id,btype:n.btype,bot:!0}));return e.n=2,Promise.all(s);case 2:d=(d=e.v).map((function(e){return e.toObject()})),K[U(K,a.gameId)].bets=[].concat(u(K[U(K,a.gameId)].bets),u(d)),t.of("/socket/duels").emit("game",{game:N(K[U(K,a.gameId)])}),K[U(K,a.gameId)].playerCount<=K[U(K,a.gameId)].bets.length&&"created"===K[U(K,a.gameId)].state&&te(t,K[U(K,a.gameId)]),o({success:!0}),V.splice(V.indexOf(a.gameId.toString()),1),S(n._id),e.n=4;break;case 3:e.p=3,l=e.v,S(r.decoded._id),V.splice(V.indexOf(a.gameId.toString()),1),o({success:!1,error:{type:"error",message:l.message}});case 4:e.n=6;break;case 5:e.p=5,p=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:p.message}});case 6:return e.a(2)}}),e,null,[[1,3],[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),Z=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c,u,d,l,p;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,E(a),D(n,K[U(K,a.gameId)],V,H),e.p=1,H.push(K[U(K,a.gameId)]._id.toString()),G(n,K[U(K,a.gameId)]),i=K[U(K,a.gameId)].amount,s=L(n),c=$(n),u=[v.findByIdAndUpdate(n._id,{$inc:0===K[U(K,a.gameId)].btype?{balance:-i,"stats.bet":i}:{fbalance:-i},updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean(),g.create({amount:i,game:K[U(K,a.gameId)]._id,user:n._id,btype:K[U(K,a.gameId)].btype,bot:!1})],e.n=2,Promise.all(u);case 2:(d=e.v)[1]=d[1].toObject(),d[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:s,rakeback:c,stats:!0===n.anonymous?null:n.stats,limits:n.limits,affiliates:n.affiliates,createdAt:n.createdAt},K[U(K,a.gameId)].bets.push(d[1]),t.of("/socket/general").to(n._id.toString()).emit("user",{user:d[0]}),t.of("/socket/duels").emit("game",{game:N(K[U(K,a.gameId)])}),K[U(K,a.gameId)].playerCount<=K[U(K,a.gameId)].bets.length&&"created"===K[U(K,a.gameId)].state&&te(t,K[U(K,a.gameId)]),o({success:!0}),H.splice(H.indexOf(K[U(K,a.gameId)]._id.toString()),1),S(n._id),e.n=4;break;case 3:e.p=3,l=e.v,S(r.decoded._id),H.splice(H.indexOf(K[U(K,a.gameId)]._id.toString()),1),o({success:!1,error:{type:"error",message:l.message}});case 4:e.n=6;break;case 5:e.p=5,p=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:p.message}});case 6:return e.a(2)}}),e,null,[[1,3],[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),ee=function(){var e=h(f().m((function e(t,r,n,a,o){return f().w((function(e){for(;;)switch(e.n){case 0:try{M(a),R(n,K[U(K,a.gameId)],V,H);try{V.push(a.gameId.toString()),o({success:!0}),V.splice(V.indexOf(a.gameId.toString()),1),S(n._id)}catch(e){S(r.decoded._id),V.splice(V.indexOf(a.gameId.toString()),1),o({success:!1,error:{type:"error",message:e.message}})}}catch(e){S(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),te=function(e,t){t.state="countdown",t.updatedAt=(new Date).getTime(),K.splice(U(K,t._id),1,t),e.of("/socket/duels").emit("game",{game:N(t)}),setTimeout((function(){re(e,t)}),4e3)},re=function(){var e=h(f().m((function e(t,r){var n,a;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,r.state="pending",K.splice(U(K,r._id),1,r),t.of("/socket/duels").emit("game",{game:N(r)}),e.n=1,x();case 1:n=e.v,r.fair.seedPublic=n.data.head_block_id,r.fair.blockId=n.data.head_block_num,K.splice(U(K,r._id),1,r),setTimeout((function(){ne(t,r)}),1e3),e.n=3;break;case 2:e.p=2,a=e.v,console.error(a),setTimeout((function(){re(t,r)}),15e3);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r){return e.apply(this,arguments)}}(),ne=function(){var e=h(f().m((function e(t,r){var n,a,o,i,u,d,l;return f().w((function(e){for(;;)switch(e.n){case 0:try{n=c(r.bets.entries());try{for(n.s();!(a=n.n()).done;)o=s(a.value,2),i=o[0],o[1],u=y.createHash("sha256").update("".concat(r._id,"-").concat(r.fair.seedServer,"-").concat(r.fair.seedPublic,"-").concat(i)).digest("hex"),d=parseInt(u.substr(0,8),16)%1e4,r.bets[i].roll=d}catch(e){n.e(e)}finally{n.f()}(l=r.bets.reduce((function(e,t){return e.roll>t.roll?e:t}))).payout=Math.floor(r.amount*r.playerCount*.95),r.state="rolling",r.winner=l,r.bets[r.bets.findIndex((function(e){return e._id.toString()===l._id.toString()}))]=l,r.updatedAt=(new Date).getTime(),K.splice(U(K,r._id),1,r),t.of("/socket/duels").emit("game",{game:N(r)}),setTimeout((function(){ae(t,r)}),5e3*r.bets.length)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ae=function(){var e=h(f().m((function e(t,r){var n,a,i,s,u,d,l,p,m,h,y,S,x,_,O,j,T,P,C,I;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,r.state="completed",e.n=1,w.findOne({state:"running"}).select("state").lean();case 1:n=e.v,a=[],i=[],s=[],u=0,d=c(r.bets);try{for(d.s();!(l=d.n()).done;)p=l.value,m=r.winner._id.toString()===p._id.toString()?r.winner.payout:0,!0!==p.bot&&(p.amount,u+=!0!==p.user.limits.blockSponsor&&0===p.btype?p.amount:0,h=A(),y=!0!==p.user.limits.blockSponsor?Math.floor(p.amount*p.user.rakeback.percentage*h.general.reward.multiplier):0,S=void 0!==p.user.affiliates.referrer&&!0!==p.user.limits.blockSponsor&&"user"===p.user.rank?Math.floor(.005*p.amount):0,a.push(v.findByIdAndUpdate(p.user._id,{$inc:0===p.btype?{balance:m,xp:!0!==p.user.limits.blockSponsor?Math.floor(p.amount*h.general.reward.multiplier):0,"stats.won":m,"limits.betToWithdraw":p.user.limits.betToWithdraw<=p.amount?-p.user.limits.betToWithdraw:-p.amount,"limits.betToRain":p.user.limits.betToRain<=p.amount?-p.user.limits.betToRain:-p.amount,"leaderboard.points":null!==n&&!0!==p.user.limits.blockSponsor&&!0!==p.user.limits.blockLeaderboard?p.amount:0,"affiliates.generated":S,"rakeback.earned":y,"rakeback.available":y}:{fbalance:m},updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean()),void 0!==p.user.affiliates.referrer&&S>0&&0===p.btype&&s.push(v.findByIdAndUpdate(p.user.affiliates.referrer,{$inc:{"affiliates.earned":S,"affiliates.available":S},updatedAt:(new Date).getTime()},{}))),i.push(g.findByIdAndUpdate(p._id,{payout:m,multiplier:Math.floor(m/r.amount*100),roll:p.roll,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout multiplier user btype bot updatedAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous createdAt"}).lean())}catch(e){d.e(e)}finally{d.f()}return e.n=2,Promise.all([b.findByIdAndUpdate(r._id,{winner:r.winner._id,fair:r.fair,state:"completed",updatedAt:(new Date).getTime()},{}),k.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*u)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(a,i,s));case 2:x=e.v,W.unshift(N(r)),W.length>25&&W.pop(),K.splice(U(K,r._id),1),t.of("/socket/duels").emit("game",{game:N(r)}),t.of("/socket/general").emit("rain",{rain:x[1]}),_=c(x.slice(2,a.length+2));try{for(_.s();!(O=_.n()).done;)j=O.value,t.of("/socket/general").to(j._id.toString()).emit("user",{user:j})}catch(e){_.e(e)}finally{_.f()}T=c(x.slice(a.length+2,a.length+i.length+2));try{for(T.s();!(P=T.n()).done;)!0!==(C=P.value).bot&&J(t,o(o({},C),{},{user:q(C.user),method:"duels"}))}catch(e){T.e(e)}finally{T.f()}e.n=4;break;case 3:e.p=3,I=e.v,console.error(I);case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r){return e.apply(this,arguments)}}(),oe=function(){var e=h(f().m((function e(t){var r,n,a,o,i,s,u,d,l,p,m,h,y,g;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([b.find({$or:[{state:"created"},{state:"pending"},{state:"rolling"}]}).select("amount playerCount btype fair state updatedAt createdAt").populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar rank xp limits stats.total affiliates anonymous createdAt"}}).lean(),b.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("amount playerCount btype winner fair state createdAt").populate({path:"winner",populate:{path:"user",select:"roblox.id username avatar btype rank createdAt"}}).populate({path:"bets",populate:{path:"user",select:"roblox.id username avatar btype rank createdAt"}}).lean()]);case 1:r=e.v,W=r[1],n=[],a=c(r[0]);try{for(a.s();!(o=a.n()).done;)if((i=o.value).playerCount===i.bets.length){n.push(b.findByIdAndUpdate(i._id,{state:"canceled",updatedAt:(new Date).getTime()},{})),s=c(i.bets);try{for(s.s();!(u=s.n()).done;)d=u.value,n.push(v.findByIdAndUpdate(d.user,{$inc:0===d.btype?{balance:i.amount,"stats.total.bet":-i.amount,"stats.duels.bet":-i.amount}:{fbalance:i.amount},updatedAt:(new Date).getTime()},{}))}catch(e){s.e(e)}finally{s.f()}}else{l=c(i.bets);try{for(l.s();!(p=l.n()).done;)m=p.value,h=L(m.user),y=$(m.user),m.user={_id:m.user._id,roblox:m.user.roblox,username:m.user.username,avatar:m.user.avatar,rank:m.user.rank,level:h,rakeback:y,btype:m.user.btype,stats:!0===m.user.anonymous?null:m.user.stats,limits:m.user.limits,affiliates:m.user.affiliates,createdAt:m.user.createdAt}}catch(e){l.e(e)}finally{l.f()}K.push(i)}}catch(e){a.e(e)}finally{a.f()}return e.n=2,Promise.all(n);case 2:e.n=4;break;case 3:e.p=3,g=e.v,console.error(g);case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t){return e.apply(this,arguments)}}();e.exports={duelsGetData:function(){return{games:Y(K),history:W}},duelsGetGameDataSocket:z,duelsSendCreateSocket:Q,duelsSendBotSocket:X,duelsSendJoinSocket:Z,duelsSendCancelSocket:ee,duelsInit:oe}},5958:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},data:{providerId:{type:String},providerUrl:{type:String}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("SteamTransaction",a)},5964:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},roll:{type:Number},game:{type:n.Schema.ObjectId,ref:"DuelsGame"},user:{type:n.Schema.ObjectId,ref:"User"},btype:{type:Number,default:0},bot:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("DuelsBet",a)},6037:e=>{"use strict";e.exports=require("mongoose")},6040:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckUserRank,f=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),p=u.socketRemoveAntiSpam,m=r(8475),h=m.adminGetBoxListSocket,y=m.adminSendBoxCreateSocket,v=m.adminSendBoxRemoveSocket,b=m.adminSendBoxNameSocket,g=m.adminSendBoxAmountSocket,k=m.adminSendBoxStateSocket,w=m.adminSendBoxCategorySocket,S=m.adminSendBoxImageSocket,A=m.adminSendBoxItemsSocket;e.exports=function(e,t){t.on("getBoxList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxCreate",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=9;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.p=3,r.n=4,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 4:u=r.v,d(u,!0),l(u,["admin"]),y(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:r.n=10;break;case 9:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 10:return r.a(2)}}),r,null,[[3,5],[2,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxRemove",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxName",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxAmount",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),g(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxState",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),k(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxCategory",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),w(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxImage",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),S(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBoxItems",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),A(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},6042:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetAffiliateListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.");if(void 0===e.sort||null===e.sort||"string"!=typeof e.sort||!1===["newest","oldest","balance","rank"].includes(e.sort))throw new Error("Your entered sort value is invalid.")},adminCheckSendAffiliateBlockData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.block||null===e.block||"boolean"!=typeof e.block)throw new Error("Your entered affiliate block value is invalid.")},adminCheckSendAffiliateClearData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},adminCheckSendAffiliateCodeData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.code||null!==e.code&&("string"!=typeof e.code||""===e.code.trim()||e.code.length<=3||e.code.length>20||!0!==n.isAlphanumeric(e.code,"en-US",{ignore:"-_"})))throw new Error("Your entered affiliate code is invalid.")},adminCheckSendAffiliateCodeCode:function(e){if(null!==e)throw new Error("Your entered affiliate code is already used by a other user.")},adminCheckSendAffiliateAvailableData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<0)throw new Error("Your entered available amount is invalid.")},adminFormatAffiliateSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"balance"===e?t={balance:1}:"rank"===e&&(t={rank:1}),t},adminCheckGetAffiliateItemData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.referrer_id||null===e.referrer_id)throw new Error("Your entered referrer is invalid.")}}},6049:e=>{e.exports=[[{rank:"J",suit:"club"},{rank:"4",suit:"diamond"},{rank:"6",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"A",suit:"spade"},{rank:"9",suit:"heart"},{rank:"10",suit:"spade"}],[{rank:"3",suit:"spade"},{rank:"3",suit:"spade"},{rank:"10",suit:"heart"},{rank:"5",suit:"heart"}],[{rank:"Q",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"7",suit:"spade"},{rank:"9",suit:"heart"},{rank:"4",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"A",suit:"spade"},{rank:"2",suit:"heart"},{rank:"7",suit:"diamond"}],[{rank:"6",suit:"club"},{rank:"6",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"8",suit:"heart"},{rank:"4",suit:"spade"},{rank:"8",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"4",suit:"heart"},{rank:"10",suit:"club"},{rank:"2",suit:"spade"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"3",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"2",suit:"club"},{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"6",suit:"spade"},{rank:"7",suit:"club"},{rank:"4",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"4",suit:"heart"},{rank:"5",suit:"spade"},{rank:"9",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"A",suit:"heart"},{rank:"10",suit:"club"},{rank:"3",suit:"club"}],[{rank:"6",suit:"club"},{rank:"6",suit:"diamond"},{rank:"5",suit:"club"},{rank:"4",suit:"heart"}],[{rank:"6",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"6",suit:"club"},{rank:"4",suit:"diamond"},{rank:"Q",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"Q",suit:"spade"},{rank:"5",suit:"club"},{rank:"4",suit:"heart"}],[{rank:"5",suit:"club"},{rank:"4",suit:"spade"},{rank:"5",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"5",suit:"spade"},{rank:"Q",suit:"club"},{rank:"2",suit:"spade"},{rank:"4",suit:"diamond"}],[{rank:"J",suit:"heart"},{rank:"6",suit:"club"},{rank:"2",suit:"spade"},{rank:"3",suit:"spade"}],[{rank:"2",suit:"club"},{rank:"6",suit:"diamond"},{rank:"3",suit:"spade"},{rank:"Q",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"7",suit:"heart"},{rank:"A",suit:"heart"},{rank:"9",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"4",suit:"club"},{rank:"7",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"8",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"3",suit:"club"},{rank:"10",suit:"spade"},{rank:"6",suit:"heart"}],[{rank:"6",suit:"spade"},{rank:"K",suit:"spade"},{rank:"4",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"2",suit:"spade"},{rank:"8",suit:"spade"},{rank:"4",suit:"heart"},{rank:"7",suit:"diamond"}],[{rank:"Q",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"2",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"10",suit:"diamond"},{rank:"7",suit:"heart"}],[{rank:"7",suit:"spade"},{rank:"2",suit:"heart"},{rank:"2",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"8",suit:"spade"},{rank:"A",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"A",suit:"heart"},{rank:"Q",suit:"club"},{rank:"7",suit:"diamond"}],[{rank:"Q",suit:"heart"},{rank:"6",suit:"heart"},{rank:"4",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"6",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"4",suit:"spade"},{rank:"5",suit:"club"}],[{rank:"A",suit:"club"},{rank:"9",suit:"heart"},{rank:"10",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"5",suit:"diamond"},{rank:"A",suit:"spade"},{rank:"K",suit:"spade"},{rank:"5",suit:"diamond"}],[{rank:"8",suit:"club"},{rank:"10",suit:"club"},{rank:"A",suit:"club"},{rank:"2",suit:"club"}],[{rank:"9",suit:"spade"},{rank:"10",suit:"club"},{rank:"A",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"9",suit:"club"},{rank:"2",suit:"diamond"},{rank:"9",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"Q",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"4",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"9",suit:"diamond"},{rank:"6",suit:"club"},{rank:"5",suit:"club"}],[{rank:"3",suit:"spade"},{rank:"5",suit:"heart"},{rank:"10",suit:"heart"},{rank:"3",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"A",suit:"club"},{rank:"9",suit:"club"},{rank:"Q",suit:"heart"}],[{rank:"7",suit:"club"},{rank:"3",suit:"diamond"},{rank:"6",suit:"spade"},{rank:"5",suit:"club"}],[{rank:"K",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"6",suit:"spade"}],[{rank:"4",suit:"heart"},{rank:"2",suit:"spade"},{rank:"Q",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"10",suit:"club"},{rank:"4",suit:"diamond"},{rank:"3",suit:"diamond"}],[{rank:"3",suit:"heart"},{rank:"6",suit:"heart"},{rank:"6",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"2",suit:"club"},{rank:"6",suit:"club"},{rank:"2",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"3",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"Q",suit:"club"},{rank:"2",suit:"diamond"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"diamond"},{rank:"5",suit:"club"},{rank:"5",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"4",suit:"heart"},{rank:"J",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"club"},{rank:"3",suit:"diamond"},{rank:"7",suit:"spade"}],[{rank:"3",suit:"diamond"},{rank:"2",suit:"spade"},{rank:"6",suit:"heart"},{rank:"Q",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"4",suit:"diamond"},{rank:"K",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"8",suit:"club"}],[{rank:"3",suit:"club"},{rank:"9",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"3",suit:"spade"},{rank:"4",suit:"heart"},{rank:"J",suit:"club"},{rank:"4",suit:"club"}],[{rank:"5",suit:"club"},{rank:"J",suit:"spade"},{rank:"3",suit:"spade"},{rank:"3",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"8",suit:"spade"},{rank:"6",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"7",suit:"diamond"},{rank:"3",suit:"heart"},{rank:"5",suit:"heart"},{rank:"6",suit:"club"}],[{rank:"2",suit:"diamond"},{rank:"2",suit:"club"},{rank:"6",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"5",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"2",suit:"diamond"},{rank:"8",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"A",suit:"heart"},{rank:"A",suit:"spade"},{rank:"4",suit:"spade"}],[{rank:"2",suit:"spade"},{rank:"6",suit:"spade"},{rank:"4",suit:"spade"},{rank:"9",suit:"diamond"}],[{rank:"8",suit:"club"},{rank:"8",suit:"club"},{rank:"4",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"6",suit:"spade"},{rank:"3",suit:"heart"},{rank:"2",suit:"heart"},{rank:"Q",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"2",suit:"heart"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"heart"},{rank:"3",suit:"heart"},{rank:"J",suit:"club"}],[{rank:"6",suit:"diamond"},{rank:"3",suit:"spade"},{rank:"10",suit:"club"},{rank:"2",suit:"diamond"}],[{rank:"10",suit:"diamond"},{rank:"6",suit:"club"},{rank:"A",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"7",suit:"diamond"},{rank:"5",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"10",suit:"club"},{rank:"5",suit:"diamond"},{rank:"4",suit:"diamond"}],[{rank:"5",suit:"heart"},{rank:"3",suit:"heart"},{rank:"3",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"Q",suit:"spade"},{rank:"3",suit:"spade"},{rank:"6",suit:"diamond"},{rank:"2",suit:"spade"}],[{rank:"2",suit:"heart"},{rank:"9",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"club"},{rank:"7",suit:"club"},{rank:"3",suit:"diamond"}],[{rank:"4",suit:"diamond"},{rank:"10",suit:"diamond"},{rank:"4",suit:"spade"},{rank:"3",suit:"spade"}],[{rank:"2",suit:"heart"},{rank:"4",suit:"diamond"},{rank:"Q",suit:"diamond"},{rank:"5",suit:"diamond"}],[{rank:"4",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"6",suit:"diamond"},{rank:"8",suit:"spade"}],[{rank:"5",suit:"spade"},{rank:"9",suit:"heart"},{rank:"4",suit:"club"},{rank:"3",suit:"heart"}],[{rank:"5",suit:"spade"},{rank:"3",suit:"diamond"},{rank:"7",suit:"heart"},{rank:"6",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"5",suit:"club"},{rank:"5",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"7",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"2",suit:"spade"},{rank:"K",suit:"heart"},{rank:"8",suit:"club"}],[{rank:"K",suit:"club"},{rank:"3",suit:"club"},{rank:"5",suit:"heart"},{rank:"3",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"3",suit:"diamond"},{rank:"3",suit:"diamond"},{rank:"4",suit:"spade"}],[{rank:"6",suit:"heart"},{rank:"2",suit:"heart"},{rank:"2",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"6",suit:"spade"},{rank:"5",suit:"heart"},{rank:"3",suit:"club"}],[{rank:"4",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"2",suit:"heart"},{rank:"10",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"6",suit:"heart"},{rank:"8",suit:"club"},{rank:"A",suit:"club"}],[{rank:"7",suit:"spade"},{rank:"2",suit:"heart"},{rank:"7",suit:"diamond"},{rank:"5",suit:"spade"}],[{rank:"7",suit:"spade"},{rank:"A",suit:"heart"},{rank:"2",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"3",suit:"spade"},{rank:"6",suit:"spade"},{rank:"6",suit:"spade"}],[{rank:"3",suit:"heart"},{rank:"7",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"9",suit:"heart"}],[{rank:"3",suit:"club"},{rank:"10",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"6",suit:"club"}],[{rank:"2",suit:"diamond"},{rank:"A",suit:"club"},{rank:"J",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"2",suit:"diamond"},{rank:"6",suit:"club"},{rank:"9",suit:"diamond"}]]},6088:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}r(2789);var s=r(6112),c=r(7908).socketRemoveAntiSpam,u=r(5515),d=u.adminCheckGetRainListData,l=u.adminCheckSendRainAmountData,f=u.adminCheckSendRainAmountRain,p=function(){var e=i(n().m((function e(t,r,a,o,i){var c,u,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,d(o),c=12*(o.page-1),e.n=1,Promise.all([s.countDocuments({type:{$regex:o.search,$options:"i"}}),s.find({type:{$regex:o.search,$options:"i"}}).sort({createdAt:-1}).limit(12).skip(c).select("amount participants creator type state createdAt").populate({path:"participants.user",select:"roblox.id username avatar balance"}).populate({path:"creator",select:"roblox.id username avatar balance"}).lean()]);case 1:u=e.v,i({success:!0,count:u[0],rains:u[1]}),e.n=3;break;case 2:e.p=2,l=e.v,i({success:!1,error:{type:"error",message:l.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),m=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,p;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(o),e.n=1,s.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state").lean();case 1:return u=e.v,f(u),d=Math.floor(o.amount),e.n=2,s.findByIdAndUpdate(u._id,{amount:d},{new:!0}).select("amount participants type state updatedAt").lean();case 2:u=e.v,t.of("/socket/general").emit("rain",{rain:u}),i({success:!0}),c(a._id),e.n=4;break;case 3:e.p=3,p=e.v,c(a._id),i({success:!1,error:{type:"error",message:p.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetRainListSocket:p,adminSendRainAmountSocket:m}},6112:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},participants:[{user:{type:n.Schema.ObjectId,ref:"User"}}],totalUsers:{type:Number},creator:{type:n.Schema.ObjectId,ref:"User"},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Rain",a)},6232:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},data:{tradeId:{type:String}},deposit:{user:{type:n.Schema.ObjectId,ref:"User"},items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}]},withdraw:{user:{type:n.Schema.ObjectId,ref:"User"},items:[{uniqueId:{type:String},assetId:{type:String},name:{type:String},image:{type:String},amount:{type:Number}}]},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("LimitedTransaction",a)},6234:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,d=Object.create(c.prototype);return u(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function s(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(u(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,u(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,u(p,"constructor",l),u(l,"constructor",d),d.displayName="GeneratorFunction",u(l,a,"GeneratorFunction"),u(p),u(p,a,"Generator"),u(p,n,(function(){return this})),u(p,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:o,m}})()}function u(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){u(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},u(e,t,r,n)}function d(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var l=r(8749),f=r(8109),p=r(4862),m=(r(9472).SERVICE_PROXY_TIME,function(e,t){for(var r=0,n=e.length%4,a=n>0?n-4:0;a<e.length;a+=4)r=((r<<16)+parseInt(e.substring(a,a+4),16))%t;return 0===r});e.exports={crashCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.autoCashout||null===e.autoCashout||!0===isNaN(e.autoCashout)||Math.floor(e.autoCashout)<0)throw new Error("Your entered auto cashout is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.CRASH_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.CRASH_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.CRASH_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.CRASH_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."))},crashCheckSendBetUser:function(e,t,r){if(0===t.btype){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===r.some((function(e){return e.user._id.toString()===t._id.toString()})))throw new Error("You can only bet one time per round.")}else{if(t.fbalance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(!0===r.some((function(e){return e.user._id.toString()===t._id.toString()&&e.user.btype===t.btype})))throw new Error("You can only bet one time per round.")}},crashCheckSendBetGame:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("created"!==e.state)throw new Error("You need to wait for the next round before you can bet.")},crashCheckSendCashoutGame:function(e,t){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if("rolling"!==e.state||t<=100)throw new Error("You need to wait for the start of the round before you can cashout.")},crashCheckSendCashoutBet:function(e,t,r){if(void 0===e||void 0===r)throw new Error("Something went wrong. Please try again in a few seconds.");if(null===r||void 0!==r.multiplier||r.autoCashout>=101&&r.autoCashout<=t)throw new Error("Your bet is not available or was already cashed out.");if(e.outcome<t)throw new Error("Your are not allowed to cashout your bet because the game already completed.")},crashGetGameMultiplier:function(e){return Math.floor(100*Math.pow(Math.E,6e-5*e))},crashGenerateGame:function(){return new Promise(function(){var e,t=(e=c().m((function e(t,r){var n,a,o,i,s,u;return c().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,n=l.randomBytes(8).toString("hex"),a=l.randomBytes(24).toString("hex"),o=l.createHash("sha256").update(a).digest("hex"),e.n=1,p.findOne({state:"created"}).sort({_id:-1}).lean();case 1:if(i=e.v){e.n=2;break}return i=new p({seedServer:n,hash:o,seedPublic:a,state:"created"}),e.n=2,i.save();case 2:return e.n=3,Promise.all([f.create({fair:{seed:i._id},state:"created"}),p.findByIdAndUpdate(i._id,{state:"completed"},{}),p.create({seedPublic:n,seedServer:a,hash:o,state:"created"})]);case 3:return s=e.v,e.n=4,s[0].populate({path:"fair.seed",select:"seedServer hash"});case 4:s[0]=e.v,s[0]=s[0].toObject(),t(s[0]),e.n=6;break;case 5:e.p=5,u=e.v,r(u);case 6:return e.a(2)}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){d(o,n,a,i,s,"next",e)}function s(e){d(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}())},crashGetOutcome:function(e){var t=parseInt(20);if(!0===m(e,t))return 100;var r=parseInt(e.slice(0,13),16),n=Math.pow(2,52);return Math.floor((100*n-r)/(n-r))},crashSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.outcome,delete t.fair),t},crashSanitizeBets:function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push(o(o({},a),{},{user:{_id:a.user._id,roblox:a.user.roblox,username:a.user.username,avatar:a.user.avatar,rank:a.user.rank,level:a.user.level,rakeback:a.user.rakeback,stats:a.user.stats,btype:a.user.btype,createdAt:a.user.createdAt}}))}}catch(e){n.e(e)}finally{n.f()}return r},crashSanitizeBet:function(e){var t=JSON.parse(JSON.stringify(e));return t.user={_id:t.user._id,roblox:t.user.roblox,username:t.user.username,avatar:t.user.avatar,rank:t.user.rank,level:t.user.level,rakeback:t.user.rakeback,stats:t.user.stats,btype:t.user.btype,createdAt:t.user.createdAt},t}}},6245:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))}}var c=r(2789),u=r(7908).socketRemoveAntiSpam,d=r(6042),l=d.adminCheckGetAffiliateListData,f=d.adminCheckSendAffiliateBlockData,p=d.adminCheckSendAffiliateClearData,m=d.adminCheckSendAffiliateCodeData,h=d.adminCheckSendAffiliateCodeCode,y=d.adminCheckSendAffiliateAvailableData,v=d.adminFormatAffiliateSort,b=d.adminCheckGetAffiliateItemData,g=function(){var e=s(a().m((function e(t,r,n,o,i){var s,u,d,f;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(o),s=12*(o.page-1),u=v(o.sort),e.n=1,Promise.all([c.countDocuments({"affiliates.code":{$exists:!0,$ne:null},$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]}),c.find({"affiliates.code":{$exists:!0,$ne:null},$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]}).sort(u).limit(12).skip(s).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean()]);case 1:if(d=e.v,"fulladmin"===n.fullrank){e.n=3;break}return e.n=2,Promise.all([c.countDocuments({"affiliates.code":{$exists:!0,$ne:null},$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}),c.find({"affiliates.code":{$exists:!0,$ne:null},$and:[{$or:[{"roblox.id":{$regex:o.search,$options:"i"}},{username:{$regex:o.search,$options:"i"}},{"affiliates.code":{$regex:o.search,$options:"i"}}]},{rank:"partner"}]}).sort(u).limit(12).skip(s).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean()]);case 2:d=e.v;case 3:i({success:!0,count:d[0],affiliates:d[1]}),e.n=5;break;case 4:e.p=4,f=e.v,i({success:!1,error:{type:"error",message:f.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),k=function(){var e=s(a().m((function e(t,r,n,o,i){var s,u;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,b(o),e.n=1,Promise.all([c.find({"affiliates.referrer":o.referrer_id,rank:"user"}).sort({createdAt:-1}).select("stats.bet stats.deposit stats.withdraw createdAt").lean()]);case 1:s=e.v,i({success:!0,affiliate:w(s[0])}),e.n=3;break;case 2:e.p=2,u=e.v,i({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),w=function(e){var t,r={users:{amount:0},deposit:{amount:0},withdraw:{amount:0},revenue:{amount:0},wager:{amount:0}},a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;r.deposit.amount=r.deposit.amount+o.stats.deposit,r.withdraw.amount=r.withdraw.amount+o.stats.withdraw,r.wager.amount=r.wager.amount+o.stats.bet}}catch(e){a.e(e)}finally{a.f()}return r.users.amount=e.length,r.revenue.amount=r.deposit.amount-r.withdraw.amount,r},S=function(){var e=s(a().m((function e(t,r,n,o,i){var s,d;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,f(o),e.n=1,c.findByIdAndUpdate(o.userId,{"limits.blockAffiliate":o.block},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 1:s=e.v,i({success:!0,affiliate:s}),u(n._id),e.n=3;break;case 2:e.p=2,d=e.v,u(n._id),i({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),A=function(){var e=s(a().m((function e(t,r,n,o,i){var s,d;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,p(o),e.n=1,Promise.all([c.findByIdAndUpdate(o.userId,{"affiliates.referred":0,"affiliates.deposited":0,"affiliates.earned":0,"affiliates.available":0},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean(),c.updateMany({"affiliates.referrer":o.userId},{$unset:{"affiliates.referrer":1}},{})]);case 1:s=e.v,i({success:!0,affiliate:s[0]}),u(n._id),e.n=3;break;case 2:e.p=2,d=e.v,u(n._id),i({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),x=function(){var e=s(a().m((function e(t,r,n,o,i){var s,d,l,f;return a().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,m(o),s={$unset:{"affiliates.code":1}},null===o.code){e.n=2;break}return e.n=1,c.findOne({"affiliates.code":o.code}).select("affiliates").lean();case 1:d=e.v,h(d),s={"affiliates.code":o.code};case 2:return e.n=3,c.findByIdAndUpdate(o.userId,s,{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 3:l=e.v,i({success:!0,affiliate:l}),u(n._id),e.n=5;break;case 4:e.p=4,f=e.v,u(n._id),i({success:!1,error:{type:"error",message:f.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),_=function(){var e=s(a().m((function e(t,r,n,o,i){var s,d;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,y(o),e.n=1,c.findByIdAndUpdate(o.userId,{"affiliates.available":o.amount},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 1:s=e.v,i({success:!0,affiliate:s}),u(n._id),e.n=3;break;case 2:e.p=2,d=e.v,u(n._id),i({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),O=function(){var e=s(a().m((function e(t,r,n,o,i){var s,d;return a().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,y(o),e.n=1,c.findByIdAndUpdate(o.userId,{"affiliates.cashOut":o.amount},{new:!0}).select("roblox.id username avatar balance rank xp stats limits.blockAffiliate affiliates createdAt").lean();case 1:s=e.v,i({success:!0,affiliate:s}),u(n._id),e.n=3;break;case 2:e.p=2,d=e.v,u(n._id),i({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetAffiliateListSocket:g,adminSendAffiliateBlockSocket:S,adminSendAffiliateClearSocket:A,adminSendAffiliateCodeSocket:x,adminSendAffiliateAvailableSocket:_,adminGetAffiliateItemSocket:k,adminSendAffiliateCashSocket:O}},6338:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return m(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(m(t={},n,(function(){return this})),t),l=u.prototype=s.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,m(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=u,m(l,"constructor",u),m(u,"constructor",c),c.displayName="GeneratorFunction",m(u,a,"GeneratorFunction"),m(l),m(l,a,"Generator"),m(l,n,(function(){return this})),m(l,"toString",(function(){return"[object Generator]"})),(p=function(){return{w:o,m:f}})()}function m(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}m=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){m(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},m(e,t,r,n)}function h(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){h(o,n,a,i,s,"next",e)}function s(e){h(o,n,a,i,s,"throw",e)}i(void 0)}))}}var v=r(8749),b=r(2789),g=r(5632),k=r(2725),w=r(3702),S=r(8744),A=r(8875),x=r(6112),_=r(7908).socketRemoveAntiSpam,O=r(8461).settingGet,j=r(1181),T=j.unboxCheckGetBoxDataData,P=j.unboxCheckGetBoxDataBox,C=j.unboxCheckSendBetData,I=j.unboxCheckSendBetBox,E=j.unboxCheckSendBetUser,D=j.unboxCheckSendBetSeed,G=j.unboxGetOutcomeItem,M=j.unboxSetOutcomeItem,R=j.findPercent,B=r(836),U=B.generalUserGetRakeback,Y=B.generalUserGetFormated,N=r(5507).generalAddBetsList,F=function(){var e=y(p().m((function e(t,r,n,a,o){var i,s;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,T(a),e.n=1,k.findById(a.boxId).select("name slug amount items categories type state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 1:i=e.v,P(i),o({success:!0,box:i}),e.n=3;break;case 2:e.p=2,s=e.v,o({success:!1,error:{type:"error",message:s.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),L=function(){var e=y(p().m((function e(t,r,n,s,u){var l,f,m,h,j,T,P,B,F,L,$,q,J,K,W,V,H,z,Q;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,C(s),e.n=1,k.findById(s.boxId).select("amount items state").populate({path:"items.item",select:"name image title amountFixed"}).lean();case 1:return l=e.v,I(l),f=Math.floor(s.unboxCount),m=Math.floor(l.amount*f),E(n,m),e.n=2,g.findOne({user:n._id,state:"active"}).select("seedClient seedServer nonce user state");case 2:return h=e.v,D(h),e.n=3,S.findOne({state:"running"}).select("state").lean();case 3:j=e.v,T=!0!==n.limits.blockSponsor&&0===n.btype?m:0,P=O(),B=U(n),F=!0!==n.limits.blockSponsor?Math.floor(m*B.percentage*P.general.reward.multiplier):0,L=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*m):0,$=[],q=0,J=p().m((function e(){var t,r,a,o,s,c,u,d,y;return p().w((function(e){for(;;)switch(e.n){case 0:t="".concat(h.seedServer,"-").concat(h.nonce+i,"-").concat(h.seedClient),r=v.createHash("sha256").update(t).digest("hex"),a=parseInt(r.substr(0,8),16)%1e5,o=G(l,a),s=m/f,P.games.ctotal.enabled&&("user"===n.rank&&s<o.amountFixed&&(c=R((o.amountFixed-s)/1e3,P.games.cases),Math.floor(100*Math.random())+1<c&&(u=(u=l.items.filter((function(e){return e.item.amountFixed<o.amountFixed}))).sort((function(e,t){return t.item.amountFixed-e.item.amountFixed})),o=M(u,o.amountFixed))),"mod"!==n.rank&&"partner"!==n.rank||s<o.amountFixed&&(d=R((o.amountFixed-s)/1e3,P.games.mcases),Math.floor(100*Math.random())+1<d&&(y=(y=l.items.filter((function(e){return e.item.amountFixed<o.amountFixed}))).sort((function(e,t){return t.item.amountFixed-e.item.amountFixed})),o=M(y,o.amountFixed)))),q+=o.amountFixed,$.push(w.create({amount:l.amount,payout:o.amountFixed,multiplier:Math.floor(o.amountFixed/l.amount*100),outcome:a,box:l._id,fair:{seed:h._id,nonce:h.nonce+i},btype:n.btype,user:n._id,state:"completed"}));case 1:return e.a(2)}}),e)})),i=0;case 4:if(!(i<f)){e.n=6;break}return e.d(a(J()),5);case 5:i++,e.n=4;break;case 6:return e.n=7,A.find({enabled:"true"}).select("creators").lean();case 7:return K=e.v,W=K.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),V=0===n.btype?{balance:Math.floor(q-m),xp:!0!==n.limits.blockSponsor?Math.floor(m*process.env.XP_RATE*P.general.reward.multiplier):0,"stats.bet":m,"stats.won":q,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-m)<=0?-n.limits.betToWithdraw:-m,"limits.betToRain":Math.floor(n.limits.betToRain-m)<=0?-n.limits.betToRain:-m,"leaderboard.points":null!==j&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?m:0,"affiliates.generated":L,"affiliates.leaderboardpoints":W&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?m:0,"rakeback.earned":F,"rakeback.available":F}:{fbalance:Math.floor(q-m)},$=[b.findByIdAndUpdate(n._id,{$inc:V,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance xp stats rakeback mute ban verifiedAt updatedAt").lean(),g.findByIdAndUpdate(h._id,{$inc:{nonce:f}},{}),x.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*T)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(d($)),void 0!==n.affiliates.referrer&&L>0&&0===n.btype&&$.push(b.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":L,"affiliates.available":L},updatedAt:(new Date).getTime()},{})),e.n=8,Promise.all($);case 8:H=e.v,z=(z=H.slice(3,3+f)).map((function(e){return e.toObject()})),t.of("/socket/general").emit("rain",{rain:H[2]}),u({success:!0,user:c(c({},H[0]),{},{balance:0===n.btype?Math.floor(n.balance-m):Math.floor(n.balance),fbalance:1===n.btype?Math.floor(n.fbalance-m):Math.floor(n.fbalance)}),games:z}),setTimeout(y(p().m((function e(){var r,a,i;return p().w((function(e){for(;;)switch(e.n){case 0:t.of("/socket/general").to(n._id.toString()).emit("user",{user:H[0]}),r=o(z);try{for(r.s();!(a=r.n()).done;)i=a.value,N(t,c(c({},i),{},{user:Y(n),method:"unbox"}))}catch(e){r.e(e)}finally{r.f()}case 1:return e.a(2)}}),e)}))),5e3),_(n._id),e.n=10;break;case 9:e.p=9,Q=e.v,_(r.decoded._id),u({success:!1,error:{type:"error",message:Q.message}});case 10:return e.a(2)}}),e,null,[[0,9]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={unboxGetData:function(){return new Promise(function(){var e=y(p().m((function e(t,r){var n,a;return p().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,k.find({state:"active"}).select("name slug amount categories type state createdAt updatedAt").lean();case 1:n=e.v,t({boxes:n}),e.n=3;break;case 2:e.p=2,a=e.v,r(a);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r){return e.apply(this,arguments)}}())},unboxGetBoxDataSocket:F,unboxSendBetSocket:L}},6363:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},data:{providerId:{type:String},providerUrl:{type:String},currency:{type:String},amountCurrency:{type:Number}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CreditTransaction",a)},6466:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734),d=u.rateLimiter,l=(u.rateLimiterStrict,r(7908)),f=l.socketCheckUserData,p=l.socketCheckConnectionLimit,m=l.socketAddConnectionLimit,h=l.socketRemoveConnectionLimit,y=l.socketCheckAntiSpam,v=l.socketRemoveAntiSpam,b=r(8461).settingCheck,g=r(7165),k=g.crashGetData,w=g.crashSendBetSocket,S=g.crashSendCashoutSocket,A=g.crashInit;e.exports=function(e){e.of("/socket/crash").use(function(){var e=i(n().m((function e(t,r){var a,o,i,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,p("crash",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:i=k(),t.emit("init",i),r(),e.n=7;break;case 6:return e.p=6,c=e.v,e.a(2,r({success:!1,error:{type:"error",message:c.message}}));case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/crash").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;m("crash",r),t.on("sendBet",function(){var r=i(n().m((function r(a,o){var i,s,u,l;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,d.consume(i);case 3:return r.n=4,y(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt btype").lean();case 5:s=r.v,f(s,!0),b(s,"games.crash.enabled"),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,u=r.v,v(t.decoded._id),o({success:!1,error:{type:"error",message:u.message}});case 7:r.n=9;break;case 8:r.p=8,l=r.v,o({success:!1,error:{type:"error",message:void 0!==l.message?l.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(n().m((function r(a,o){var i,s,u,l;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,d.consume(i);case 3:return r.n=4,y(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username btype avatar rank mute ban btype").lean();case 5:s=r.v,f(s,!0),b(s),S(e,t,s,a,o),r.n=7;break;case 6:r.p=6,u=r.v,v(t.decoded._id),o({success:!1,error:{type:"error",message:u.message}});case 7:r.n=9;break;case 8:r.p=8,l=r.v,o({success:!1,error:{type:"error",message:void 0!==l.message?l.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,h("crash",r);case 1:return e.a(2)}}),e)}))))})),A(e)}},6533:(e,t,r)=>{var n=r(6037),a=new n.Schema({phrase:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("FilterPhrase",a)},6701:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(6037);i.set("strictQuery",!0),i.set("autoIndex",!1);var s=function(){var e,t=(e=n().m((function e(){var t,r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,i.connect(process.env.DATABASE_URI,{useUnifiedTopology:!0,useNewUrlParser:!0,serverSelectionTimeoutMS:3e4});case 1:t=e.v,console.log("MongoDB Connected: ".concat(t.connection.host)),e.n=3;break;case 2:e.p=2,r=e.v,console.error("MongoDB Error: ".concat(r.message)),process.exit(1);case 3:return e.a(2)}}),e,null,[[0,2]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();e.exports=s},6734:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return p(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(p(t={},n,(function(){return this})),t),l=u.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,p(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=u,p(l,"constructor",u),p(u,"constructor",c),c.displayName="GeneratorFunction",p(u,a,"GeneratorFunction"),p(l),p(l,a,"Generator"),p(l,n,(function(){return this})),p(l,"toString",(function(){return"[object Generator]"})),(f=function(){return{w:o,m}})()}function p(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}p=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){p(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},p(e,t,r,n)}function m(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){m(o,n,a,i,s,"next",e)}function s(e){m(o,n,a,i,s,"throw",e)}i(void 0)}))}}r(8749);var y=r(2789),v=r(2299),b=r(8455),g=r(8744),k=r(8875),w=r(3304),S=r(7908).socketRemoveAntiSpam,A=r(2507),x=A.fairGetData,_=A.fairGetBlockData,O=r(836),j=O.generalUserGetRakeback,T=O.generalUserGetFormated,P=r(4145),C=P.rouletteCheckSendBetData,I=P.rouletteCheckSendBetUser,E=P.rouletteCheckSendBetGame,D=P.rouletteGetOutcome,G=P.rouletteGenerateGame,M=P.rouletteSanitizeGame,R=P.rouletteSanitizeBets,B=P.rouletteSanitizeBet,U=r(8461).settingGet,Y=r(5507).generalAddBetsList,N=null,F=[],L=[],$=0,q=function(){var e=h(f().m((function e(t,r,n,a,o){return f().w((function(e){for(;;)if(0===e.n)return e.a(2,{game:M(N),bets:R(F),history:L})}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),J=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c,u,d,l,p;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,C(a),I(a,n,F),E(N),e.p=1,$+=1,i=Math.floor(a.amount),s=j(n),u=0===n.btype?{balance:-i,"stats.bet":i,"stats.roulette.bet":i,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-i)<=0?-n.limits.betToWithdraw:-i,"limits.betToRain":Math.floor(n.limits.betToRain-i)<=0?-n.limits.betToRain:-i}:{fbalance:-i},c=[y.findByIdAndUpdate(n._id,{$inc:u,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban updatedAt").lean(),b.create({amount:i,color:a.color,game:N._id,user:n._id,btype:n.btype})],e.n=2,Promise.all(c);case 2:(d=e.v)[1]=d[1].toObject(),d[1].user={_id:n._id,username:n.username,avatar:n.avatar,rank:n.rank,limits:n.limits,affiliates:n.affiliates,rakeback:s,btype:n.btype},F.push(d[1]),t.of("/socket/roulette").emit("bet",{bet:B(d[1])}),o({success:!0,user:d[0]}),$-=1,S(n._id),e.n=4;break;case 3:e.p=3,l=e.v,$-=1,S(n._id),o({success:!1,error:{type:"error",message:l.message}});case 4:e.n=6;break;case 5:e.p=5,p=e.v,S(n._id),o({success:!1,error:{type:"error",message:p.message}});case 6:return e.a(2)}}),e,null,[[1,3],[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),K=function(){var e=h(f().m((function e(t){var r;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,G();case 1:N=e.v,F=[],t.of("/socket/roulette").emit("game",{game:M(N)}),setTimeout((function(){W(t)}),13e3-((new Date).getTime()-new Date(N.createdAt).getTime())),e.n=3;break;case 2:e.p=2,r=e.v,console.error(r);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=h(f().m((function e(t){return f().w((function(e){for(;;)switch(e.n){case 0:try{"pending"!==N.state&&(N.state="pending",t.of("/socket/roulette").emit("game",{game:M(N)})),$<=0?V(t):setTimeout((function(){W(t)}),1e3)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=h(f().m((function e(t){var r,n,a,o,i;return f().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,N.state="fairness",void 0!==N.fair.blockNum){e.n=2;break}return e.n=1,x();case 1:r=e.v,N.fair.blockNum=r.data.head_block_num+1,t.of("/socket/roulette").emit("game",{game:M(N)});case 2:return e.n=3,_(N.fair.blockNum);case 3:n=e.v,N.fair.seedPublic=n.data.id,N.outcome=D(N),a={red:0,green:0,bait:0,black:0},F.forEach((function(e){void 0!==a[e.color]&&(a[e.color]+=e.amount)})),o=0===N.outcome&&(a.green>0||a.bait>0)||N.outcome>=1&&N.outcome<=7&&a.red>a.black||N.outcome>=8&&a.red<a.black,i=U(),o&&i.games.ctotal.enabled&&i.games.croulette.enabled&&(N.outcome=H()),N.state="rolling",N.updatedAt=(new Date).getTime(),t.of("/socket/roulette").emit("game",{game:M(N)}),setTimeout((function(){z(t)}),5500),e.n=5;break;case 4:e.p=4,e.v,setTimeout((function(){V(t)}),2e3);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=[1,2,3,5,6,7,8,9,10,12,13,14];return e[Math.floor(Math.random()*e.length)]},z=function(){var e=h(f().m((function e(t){var r,n,a,i,c,d,l,p,m,h,S,A,x,_,O,j,P;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,N.state="completed",e.n=1,g.findOne({state:"running"}).select("state").lean();case 1:r=e.v,n=[],a=[],i=[],c=0,d=0,l=f().m((function e(){var t,o,s,u,l,h,v,g,w,S;return f().w((function(e){for(;;)switch(e.n){case 0:if(t=m[p],o=0,0===N.outcome&&"green"===t.color?o=Math.floor(14*t.amount):4!==N.outcome&&11!==N.outcome||"bait"!==t.color?(N.outcome<=7&&N.outcome>=1&&"red"===t.color||N.outcome>=8&&"black"===t.color)&&(o=Math.floor(2*t.amount)):o=Math.floor(7*t.amount),c=c+t.user.btype===0?t.amount:0,d=d+t.user.btype===0?o:0,s=null!==r&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard&&0===t.user.btype?t.amount:0,u=!0!==t.user.limits.blockSponsor&&0===t.user.btype?Math.floor(t.amount*t.user.rakeback.percentage):0,l=0===t.user.btype&&void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.0025*t.amount):0,!(o>0)){e.n=2;break}return e.n=1,k.find({enabled:"true"}).select("creators").lean();case 1:h=e.v,v=h.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),g=0===t.user.btype?{balance:o,xp:!0!==t.user.limits.blockSponsor?t.amount*process.env.XP_RATE:0,"stats.total.won":o,"stats.roulette.won":o,"leaderboard.points":s,"affiliates.leaderboardpoints":v&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"affiliates.generated":l,"rakeback.earned":u,"rakeback.available":u}:{fbalance:o},n.push(y.findByIdAndUpdate(t.user._id,{$inc:g,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp fbalance btype stats rakeback mute ban updatedAt").lean()),e.n=4;break;case 2:return e.n=3,k.find({enabled:"true"}).select("creators").lean();case 3:w=e.v,S=w.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),0===t.user.btype&&n.push(y.findByIdAndUpdate(t.user._id,{$inc:{xp:!0!==t.user.limits.blockSponsor?t.amount*process.env.XP_RATE:0,"leaderboard.points":s,"affiliates.leaderboardpoints":S&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0},updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban updatedAt").lean());case 4:l>0&&0===t.user.btype&&a.push(y.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":l,"affiliates.available":l},updatedAt:(new Date).getTime()},{})),i.push(b.findByIdAndUpdate(t._id,{payout:o,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout user btype updatedAt createdAt").populate({path:"user",select:"roblox.id username avatar rank xp stats rakeback anonymous btype createdAt"}).lean());case 5:return e.a(2)}}),e)})),p=0,m=F;case 2:if(!(p<m.length)){e.n=4;break}return e.d(o(l()),3);case 3:p++,e.n=2;break;case 4:return e.n=5,Promise.all([v.findByIdAndUpdate(N._id,{outcome:N.outcome,fair:N.fair,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").lean(),w.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.bet":c,"stats.total.won":d,"stats.roulette.bet":c,"stats.roulette.won":d}},{upsert:!0})].concat(n,a,i));case 5:h=e.v,L.unshift(h[0]),L.length>100&&L.pop(),t.of("/socket/roulette").emit("game",{game:h[0]}),S=u(h.slice(2,n.length+2));try{for(S.s();!(A=S.n()).done;)x=A.value,t.of("/socket/general").to(x._id.toString()).emit("user",{user:x})}catch(e){S.e(e)}finally{S.f()}_=u(h.slice(n.length+a.length+2));try{for(_.s();!(O=_.n()).done;)j=O.value,Y(t,s(s({},j),{},{user:T(j.user),method:"roulette"}))}catch(e){_.e(e)}finally{_.f()}setTimeout((function(){K(t)}),3e3),e.n=7;break;case 6:e.p=6,P=e.v,console.error(P);case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=h(f().m((function e(t){var r,n,o,i,s,c,d;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([v.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"bets",select:"amount payout game user btype"}).lean(),v.find({state:"completed"}).sort({createdAt:-1}).limit(100).select("outcome fair state createdAt").lean()]);case 1:if(r=e.v,L=r[1],null===r[0]||"completed"===r[0].state){e.n=3;break}n=[],o=u(r[0].bets);try{for(o.s();!(i=o.n()).done;)void 0===(s=i.value).payout&&(c=0===s.btype?{balance:s.amount,"stats.total.bet":-s.amount,"stats.roulette.bet":-s.amount}:{fbalance:s.amount},n=[].concat(a(n),[b.findByIdAndUpdate(s._id,{payout:s.amount,updatedAt:(new Date).getTime()}),y.findByIdAndUpdate(s.user,{$inc:c,updatedAt:(new Date).getTime()})]))}catch(e){o.e(e)}finally{o.f()}return r[0].outcome=D(r[0]),e.n=2,Promise.all([v.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair.nonce state createdAt").lean()].concat(a(n)));case 2:r=e.v,L.unshift(r[0]),L.length>100&&L.pop();case 3:K(t),e.n=5;break;case 4:e.p=4,d=e.v,console.error(d);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}();e.exports={rouletteGetDataSocket:q,rouletteSendBetSocket:J,rouletteInit:Q,getRandomWithoutExcluded:H}},6769:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{main:{type:Number},sideLeft:{type:Number},sideRight:{type:Number}},payout:{type:Number},multiplier:{type:Number},cards:[{rank:{type:String},suit:{type:String}}],cardsLeft:[{rank:{type:String},suit:{type:String}}],cardsRight:[{rank:{type:String},suit:{type:String}}],actions:[{type:String}],seat:{type:Number},game:{type:n.Schema.ObjectId,ref:"BlackjackGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("BlackjackBet",a)},6888:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckAntiSpam,f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(485),h=(m.cashierGetCryptoDataSocket,m.cashierSendCryptoWithdrawSocket),y=m.cashierGetCryptoDataSocketByOxapay;e.exports=function(e,t){t.on("getCryptoData",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban");case 3:u=r.v;case 4:d(u,!0),p(u),y(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCryptoWithdraw",function(){var r=i(n().m((function r(a,o){var i,u,m,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank balance limits mute ban stats").lean();case 5:u=r.v,d(u,!0),p(u,"crypto.withdraw.enabled"),h(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},6905:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u=r(8749),d=r(1024),l=r(5398),f=(r(8461).settingGet,r(8223)),p=r(1325),m=r(6049),h=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],y=["heart","spade","diamond","club"],v=function(e){var t,r=0,n=!1,a=i(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;"A"===o.rank?(r+=1,n=!0):"K"===o.rank||"Q"===o.rank||"J"===o.rank?r+=10:r+=Math.floor(o.rank)}}catch(e){a.e(e)}finally{a.f()}return!0===n&&r<=11&&(r+=10),r},b=function(e){return color="",!0===["heart","diamond"].includes(e.suit)?color="red":color="black",color},g=function(e){var t=process.env.BLACKJACK_MIN_AMOUNT_STANDARD;return"whale"===e&&(t=process.env.BLACKJACK_MIN_AMOUNT_WHALE),t},k=function(e){var t=process.env.BLACKJACK_MAX_AMOUNT_STANDARD;return"whale"===e&&(t=process.env.BLACKJACK_MAX_AMOUNT_WHALE),t},w=function(e){return Math.floor(e.main+e.sideLeft+e.sideRight)};e.exports={blackjackCheckSendJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendJoinTable:function(e,t,r){if(void 0===r||"created"!==r.game.state&&"countdown"!==r.game.state)throw new Error("Your requested table is not available.");if(!0===r.players.some((function(t){return t.seat===e.seat})))throw new Error("Your requested table seat is already occupied.");if(r.players.filter((function(e){return e.user._id.toString()===t._id.toString()})).length>=3)throw new Error("You aren’t allowed to sit at more than three seats at once.");if(!0===r.players.some((function(e){return e.user._id.toString()===t._id.toString()&&null===e.bet})))throw new Error("You need to place a bet first on your other seats.")},blackjackCheckSendJoinUser:function(e,t){if(e.balance<Math.floor(1e3*g(t.game.type)))throw new Error("You have not enough balance for this action.")},blackjackCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.bets||!0!==Array.isArray(e.bets)||e.bets.length<=0)throw new Error("Your provided bets are invalid.")},blackjackCheckSendBetTable:function(e){if(void 0===e||"countdown"!==e.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendBetBets:function(e){var t,r=[],n=i(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(null==a)throw new Error("Your provided bets are invalid.");if(void 0===a.seat||!0===isNaN(a.seat)||!1===["0","1","2","3","4"].includes(a.seat.toString()))throw new Error("Your provided table seat is invalid.");if(void 0===a.amount||null===a.amount)throw new Error("You’ve provided an invalid bet amount.");if(void 0===a.amount.main||!0===isNaN(a.amount.main)||Math.floor(a.amount.main)<0)throw new Error("You’ve provided an invalid main bet amount.");if(void 0===a.amount.sideLeft||!0===isNaN(a.amount.sideLeft)||Math.floor(a.amount.sideLeft)<0)throw new Error("You’ve provided an invalid side bet amount.");if(void 0===a.amount.sideRight||!0===isNaN(a.amount.sideRight)||Math.floor(a.amount.sideRight)<0)throw new Error("You’ve provided an invalid side bet amount.");if(!0===r.includes(a.seat.toString()))throw new Error("You’ve provided multiple bets for one seat.");r.push(a.seat.toString())}}catch(e){n.e(e)}finally{n.f()}},blackjackCheckSendBetSeat:function(e,t,r,n){if(void 0===n||n.user._id.toString()!==t._id.toString())throw new Error("Your requested table seat is not available.");if(w(e.amount)<=0||!0===[Math.floor(e.amount.main),Math.floor(e.amount.sideLeft),Math.floor(e.amount.sideRight)].some((function(e){return 0!==e&&e<Math.floor(1e3*g(r.game.type))})))throw new Error("You can only bet a min amount of ".concat(parseFloat(g(r.game.type)).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," DL per seat."));if(Math.floor((null===n.bet?0:w(n.bet.amount))+w(e.amount))>Math.floor(1e3*k(r.game.type)))throw new Error("You can only bet a total max amount of ".concat(parseFloat(k(r.game.type)).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," DL per seat."));if((Math.floor(e.amount.sideLeft)>0||Math.floor(e.amount.sideRight)>0)&&Math.floor(e.amount.main)<=0&&null===n.bet)throw new Error("You need to place a main bet before you can place side bets.");if((new Date).getTime()>=new Date(r.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.")},blackjackCheckSendBetUser:function(e,t){if(e.balance<t)throw new Error("You don’t have enough balance for this action.")},blackjackCheckSendClearData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.")},blackjackCheckSendClearTable:function(e){if(void 0===e||"countdown"!==e.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendClearSeat:function(e,t){if(t.length<=0)throw new Error("You haven`t placed a bet yet.");if((new Date).getTime()>=new Date(e.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.")},blackjackCheckSendInsuranceData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.insurance||"boolean"!=typeof e.insurance)throw new Error("Your entered insurance value is invalid.")},blackjackCheckSendInsuranceTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendInsuranceSeat:function(e,t){if(void 0===t)throw new Error("Your requested table seat is not available.");if("all"!==e.playersPos||(new Date).getTime()>=new Date(e.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(t.bet.actions.length>1||!0===t.bet.actions.includes("insurance")||!0===t.bet.actions.includes("noinsurance"))throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendInsuranceUser:function(e,t,r){if(!0===e.insurance&&t.balance<Math.floor(r))throw new Error("You have not enough balance for this action!")},blackjackCheckSendHitData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendHitTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendHitSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("double"))throw new Error("Your requested action is not available for your seat.");if(!1===r.bet.actions.includes("split")&&(!0===r.bet.actions.includes("stand")||v(r.bet.cards)>=21))throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendStandData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendStandTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendStandSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("double")||!1===r.bet.actions.includes("split")&&(!0===r.bet.actions.includes("stand")||v(r.bet.cards)>=21)||!0===r.bet.actions.includes("split")&&(r.bet.actions.filter((function(e){return"stand"===e})).length>=2||!0===r.bet.actions.includes("stand")&&(v(r.bet.cardsLeft)>=21||v(r.bet.cardsRight)>=21)||v(r.bet.cardsLeft)>=21&&v(r.bet.cardsRight)>=21))throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendSplitData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendSplitTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendSplitSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("split"))throw new Error("Your requested action is not available for your seat.");if(2!==r.bet.cards.length||r.bet.cards[0].rank!==r.bet.cards[1].rank)throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendSplitUser:function(e,t){if(e.balance<Math.floor(t.bet.amount.main))throw new Error("You have not enough balance for this action.")},blackjackCheckSendDoubleData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.table||!0===isNaN(e.table)||Math.floor(e.table)<0)throw new Error("Your entered table id is invalid.");if(void 0===e.seat||!0===isNaN(e.seat)||!1===["0","1","2","3","4"].includes(e.seat.toString()))throw new Error("Your entered table seat is invalid.")},blackjackCheckSendDoubleTable:function(e,t,r){if(void 0===r||"running"!==r.game.state)throw new Error("Your requested table is not available.")},blackjackCheckSendDoubleSeat:function(e,t,r){if(void 0===r||r.user._id.toString()!==e._id.toString())throw new Error("Your requested table seat is not available.");if(t.playersPos!==r.seat||(new Date).getTime()>=new Date(t.game.updatedAt).getTime()+1e4)throw new Error("Your requested table seat is not allowed to act.");if(!0===r.bet.actions.includes("split"))throw new Error("Your requested action is not available for your seat.");if(2!==r.bet.cards.length||v(r.bet.cards)<9||v(r.bet.cards)>11)throw new Error("Your requested action is not available for your seat.")},blackjackCheckSendDoubleUser:function(e,t){if(e.balance<Math.floor(t.bet.amount.main))throw new Error("You have not enough balance for this action.")},blackjackGenerateGame:function(e,t){return new Promise(function(){var r,a=(r=n().m((function r(a,o){var i,s,c,d;return n().w((function(r){for(;;)switch(r.n){case 0:return r.p=0,i=u.randomBytes(24).toString("hex"),s=u.createHash("sha256").update(i).digest("hex"),r.n=1,l.create({fair:{seedServer:i,hash:s},table:e,type:t,state:"created"});case 1:c=(c=r.v).toObject(),a(c),r.n=3;break;case 2:r.p=2,d=r.v,o(d);case 3:return r.a(2)}}),r,null,[[0,2]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())},blackjackGenerateDeck:function(){for(var e=[],t=0;t<process.env.BLACKJACK_DECK_COUNT;t++)for(var r=0;r<y.length;r++)for(var n=0;n<h.length;n++)e.push({rank:h[n],suit:y[r]});return e},blackjackShuffleDeck:function(e,t){var r=u.createHash("sha256").update(t).digest("hex");return new d(r).shuffle(e)},blackjackGetCardsValue:v,blackjackCheckCardsSoftSeventeen:function(e){var t,r=0,n=!1,a=i(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;"A"===o.rank?(r+=1,n=!0):"K"===o.rank||"Q"===o.rank||"J"===o.rank?r+=10:r+=Math.floor(o.rank)}}catch(e){a.e(e)}finally{a.f()}return!0===n&&7===r},blackjackTableListSanitize:function(e){var t,r=[],n=i(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;"completed"!==(a=JSON.parse(JSON.stringify(a))).game.state&&(delete a.game.deck,delete a.game.fair.seedServer,"running"===a.game.state&&void 0!==a.game.dealerCards[1]&&(a.game.dealerCards[1]={rank:"hidden",suit:"hidden"}));var o,s=i(a.players);try{for(s.s();!(o=s.n()).done;){var c=o.value;c.user={_id:c.user._id,roblox:c.user.roblox,username:c.user.username,avatar:c.user.avatar,rank:c.user.rank,level:c.user.level,rakeback:c.user.rakeback.name,stats:c.user.stats,createdAt:c.user.createdAt}}}catch(e){s.e(e)}finally{s.f()}r.push(a)}}catch(e){n.e(e)}finally{n.f()}return r},blackjackTableSanitize:function(e){var t=JSON.parse(JSON.stringify(e));"completed"!==t.game.state&&(delete t.game.deck,delete t.game.fair.seedServer,"running"===t.game.state&&void 0!==t.game.dealerCards[1]&&(t.game.dealerCards[1]={rank:"hidden",suit:"hidden"}));var r,n=i(t.players);try{for(n.s();!(r=n.n()).done;){var a=r.value;a.user={_id:a.user._id,roblox:a.user.roblox,username:a.user.username,avatar:a.user.avatar,rank:a.user.rank,level:a.user.level,rakeback:a.user.rakeback.name,stats:a.user.stats,createdAt:a.user.createdAt}}}catch(e){n.e(e)}finally{n.f()}return t},blackjackGetBetAmountMin:g,blackjackGetBetAmountMax:k,blackjackGetBetAmount:w,blackjackGetSideBetMultiplier:function(e,t){var r,n,a={left:0,right:0};return t[0].rank===t[1].rank&&b(t[0])===b(t[1])&&(a.left=t[0].suit===t[1].suit?25:10),e[0].rank===t[0].rank===t[1].rank?a.right=e[0].suit===t[0].suit===t[1].suit?100:30:!0===(n=!1,(r=(r=[e[0],t[0],t[1]]).map((function(e){return v([e])}))).sort((function(e,t){return e-t})),3===(r=function(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(r))).length&&(r[2]-r[0]!==2&&!0===r.includes(11)&&(r=[1,r[0],r[1]]),r[2]-r[0]===2&&(n=!0)),n)?a.right=e[0].suit===t[0].suit===t[1].suit?40:10:e[0].suit===t[0].suit===t[1].suit&&(a.right=5),a},generateBlackjackWinningHand:function(e){console.log("count",e),num=Math.floor(100*Math.random()),console.log("num",num),console.log("test",f[29]);var t=function(e){if(3===e)return 3;for(var t=[],r=3;r<=e;r++)t.push(r);return t[Math.floor(Math.random()*t.length)]}(e);return 3===t?(console.log("num1",f[num]),f[num]):4==t?(console.log("num2",m[num]),m[num]):p[num]}}},6919:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(4229);e.exports={cashierCheckSendSteamDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.game||"string"!=typeof e.game||!0!==["csgo","dota2"].includes(e.game))throw new Error("Your provided game is invalid.")},cashierSteamCreateTransaction:function(e){return new Promise(function(){var t,r=(t=n().m((function t(r,a){var o,s,c;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,o={Token:process.env.SKINIFY_API_KEY},t.n=1,i("https://skinify.io/api/create-deposit",{method:"POST",headers:o,body:JSON.stringify(e)});case 1:if(200!==(s=t.v).status){t.n=3;break}return t.n=2,s.json();case 2:s=t.v,r(s),t.n=4;break;case 3:a(new Error("ERROR: ".concat(s.statusText)));case 4:t.n=6;break;case 5:t.p=5,c=t.v,a(c);case 6:return t.a(2)}}),t,null,[[0,5]])})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())}}},6930:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},data:{transaction:{type:String}},type:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("GiftTransaction",a)},6966:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},btype:{type:Number},game:{type:n.Schema.ObjectId,ref:"RollGame"},user:{type:n.Schema.ObjectId,ref:"User"},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RollBet",a)},6998:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(2789),s=r(4825),c=r(6930),u=r(3304),d=r(7908).socketRemoveAntiSpam,l=r(7587),f=l.captchaCheckData,p=l.captchaGetData,m=r(2745),h=m.cashierCheckSendGiftRedeemData,y=m.cashierCheckSendGiftRedeemCode,v=[],b=function(){var e,t=(e=n().m((function e(t,r,a,o,l){var m,b,g,k,w,S,A;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,h(o),e.n=1,p(o.captcha);case 1:return m=e.v,f(m),e.n=2,s.findOne({code:o.code}).select("code reward redeemer");case 2:return b=e.v,y(b,v),e.p=3,v.push(b._id.toString()),g=Math.floor(b.reward/process.env.COIN_RATE*1e3),k=[],k=[i.findByIdAndUpdate(a._id,{$inc:{balance:g,"stats.deposit":g,"limits.betToWithdraw":g},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),s.findByIdAndUpdate(b._id,{redeemer:a._id,updatedAt:(new Date).getTime()}),c.create({amount:g,data:{transaction:b.code},type:"deposit",user:a._id,state:"completed"}),u.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":b.reward,"stats.gift.deposit":b.reward}},{upsert:!0})],void 0!==a.affiliates.referrer&&k.push(i.findByIdAndUpdate(a.affiliates.referrer,{$inc:{"affiliates.deposit":g},updatedAt:(new Date).getTime()},{})),e.n=4,Promise.all(k);case 4:w=e.v,t.of("/socket/general").to(a._id.toString()).emit("user",{user:w[0]}),l({success:!0}),v.splice(v.indexOf(b._id.toString()),1),d(a._id),e.n=6;break;case 5:e.p=5,S=e.v,v.splice(v.indexOf(b._id.toString()),1),d(r.decoded._id),l({success:!1,error:{type:"error",message:S.message}});case 6:e.n=8;break;case 7:e.p=7,A=e.v,d(r.decoded._id),l({success:!1,error:{type:"error",message:A.message}});case 8:return e.a(2)}}),e,null,[[3,5],[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,r,n,a,o){return t.apply(this,arguments)}}();e.exports={cashierSendGiftRedeemSocket:b}},7016:e=>{"use strict";e.exports=require("url")},7046:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(i(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,i(p,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,n,(function(){return this})),i(p,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:s,m}})()}function i(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){i(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},i(e,t,r,n)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}var u=r(2789),d=r(286),l=r(7908).socketRemoveAntiSpam,f=r(7587),p=(f.captchaCheckData,f.captchaGetData,r(836)),m=(p.generalUserGetFormated,p.generalUserGetFormatedWithBalance),h=r(5297),y=h.generalCheckSendAffiliateCodeData,v=h.generalCheckSendAffiliateCodeCode,b=h.generalCheckSendAffiliateClaimCodeData,g=h.generalCheckSendAffiliateClaimCodeUser,k=h.generalCheckSendAffiliateClaimCodeCode,w=h.generalCheckSendAffiliateClaimEarningsUser,S=function(){var e=c(o().m((function e(t,r,n,a,i){var s,c,d;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,u.find({"affiliates.referrer":n._id,rank:"user"}).sort({createdAt:-1}).select("username avatar rank xp affiliates.generated affiliates.referrer anonymous stats balance createdAt").lean();case 1:return s=(s=e.v).map((function(e){return{user:m(e),affiliates:e.affiliates}})),e.n=2,u.findById(n.affiliates.referrer).select("username affiliates.code").lean();case 2:c=e.v,i({success:!0,data:n.affiliates,referred:s,referrer:c}),e.n=4;break;case 3:e.p=3,d=e.v,i({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),A=function(){var e=c(o().m((function e(t,r,n,a,i){var s,c,d;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,y(a),s=a.code.toLowerCase(),e.n=1,u.findOne({"affiliates.code":s}).select("affiliates.code").lean();case 1:return c=e.v,v(c),e.n=2,u.findByIdAndUpdate(n._id,{"affiliates.code":s},{new:!0}).select("affiliates").lean();case 2:c=e.v,i({success:!0,data:c.affiliates}),l(n._id),e.n=4;break;case 3:e.p=3,d=e.v,l(r.decoded._id),i({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),x=function(){var e=c(o().m((function e(t,r,n,i,s){var c,f,p,m,h;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,b(i),c=r.handshake.headers["x-forwarded-for"]||r.conn.remoteAddress,f=i.code.toLowerCase(),e.n=1,Promise.all([u.findOne({"affiliates.referredAddress":c}).select("affiliates").lean(),u.findOne({"affiliates.code":f}).select("affiliates").lean()]);case 1:return p=e.v,g(n,p[0]),k(n,p[1]),m="goon"===f?100:0,e.n=2,Promise.all([u.findByIdAndUpdate(n._id,a(a(a({$inc:{balance:m},"affiliates.referrer":p[1]._id,"affiliates.referredAddress":c},"affiliates.referredAddress",c),"affiliates.leaderboardpoints",0),"updatedAt",(new Date).getTime()),{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),u.findByIdAndUpdate(p[1]._id,{$inc:{"affiliates.referred":1}}),d.create({amount:m,type:"affiliateCodeClaim",user:n._id,state:"goon"===f?"completed":"created"})]);case 2:p=e.v,s({success:!0,user:p[0]}),l(n._id),e.n=4;break;case 3:e.p=3,h=e.v,l(r.decoded._id),s({success:!1,error:{type:"error",message:h.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),_=function(){var e=c(o().m((function e(t,r,n,a,i){var s,c;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,w(n),e.n=1,Promise.all([u.findByIdAndUpdate(n._id,{$inc:{balance:n.affiliates.available},"affiliates.available":0,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback affiliates mute ban verifiedAt updatedAt"),d.create({amount:n.affiliates.available,type:"affiliateEarningClaim",user:n._id,state:"completed"})]);case 1:s=e.v,i({success:!0,user:s[0]}),l(n._id),e.n=3;break;case 2:e.p=2,c=e.v,l(r.decoded._id),i({success:!1,error:{type:"error",message:c.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={generalGetAffiliateDataSocket:S,generalSendAffiliateCodeSocket:A,generalSendAffiliateClaimCodeSocket:x,generalSendAffiliateClaimEarningsSocket:_}},7067:(e,t,r)=>{var n=r(6037),a=new n.Schema({outcome:{type:Number},fair:{seed:{type:n.Schema.ObjectId,ref:"RollSeed"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});a.virtual("bets",{ref:"RollBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("RollGame",a)},7073:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(1198),g=b.blackjackGetData,k=b.blackjackSendJoinSocket,w=b.blackjackSendBetSocket,S=b.blackjackSendClearSocket,A=b.blackjackSendInsuranceSocket,x=b.blackjackSendHitSocket,_=b.blackjackSendStandSocket,O=b.blackjackSendSplitSocket,j=b.blackjackSendDoubleSocket,T=b.blackjackInit;e.exports=function(e){e.of("/socket/blackjack").use(function(){var e=i(n().m((function e(t,r){var a,o,i,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,f("blackjack",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:i=g(),t.emit("init",i),r(),e.n=7;break;case 6:return e.p=6,c=e.v,e.a(2,r({success:!1,error:{type:"error",message:c.message}}));case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/blackjack").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("blackjack",r),t.prependAny((function(e){})),t.on("sendJoin",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance xp stats limits mute ban affiliates createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.blackjack.enabled"),k(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendBet",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 5:s=r.v,l(s,!0),v(s,"games.blackjack.enabled"),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendClear",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 5:s=r.v,l(s,!0),v(s),S(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendInsurance",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 5:s=r.v,l(s,!0),v(s),A(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendHit",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank limits mute ban").lean();case 5:s=r.v,l(s,!0),v(s),x(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendStand",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank limits mute ban").lean();case 5:s=r.v,l(s,!0),v(s),_(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendSplit",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 5:s=r.v,l(s,!0),v(s),O(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendDouble",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance stats limits mute ban").lean();case 5:s=r.v,l(s,!0),v(s),j(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("blackjack",r);case 1:return e.a(2)}}),e)}))))})),T(e)}},7078:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckUserRank,f=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),p=u.socketRemoveAntiSpam,m=r(7929),h=m.adminGetPromoListSocket,y=m.adminSendPromoCreateSocket,v=m.adminSendPromoRemoveSocket;e.exports=function(e,t){t.on("getPromoList",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendPromoCreate",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendPromoRemove",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},7089:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof u?n:u,d=Object.create(i.prototype);return s(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(s(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,s(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,s(p,"constructor",l),s(l,"constructor",d),d.displayName="GeneratorFunction",s(l,a,"GeneratorFunction"),s(p),s(p,a,"Generator"),s(p,n,(function(){return this})),s(p,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:o,m}})()}function s(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}s=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){s(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},s(e,t,r,n)}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var p=r(6037),m=r(7906),h=r(6533),y=r(7908).socketRemoveAntiSpam,v=r(8461),b=v.settingGet,g=v.settingSetValue,k=r(1454),w=k.generalCheckGetChatMessagesData,S=k.generalCheckSendChatMessageData,A=k.generalCheckSendChatMessageRoom,x=k.generalCheckSendChatMessageUser,_=k.generalCheckSendChatRemoveData,O=k.generalCheckSendChatRemoveRoom,j=k.generalCheckSendChatRemoveMessage,T=k.generalCheckSendChatClearRoom,P=k.generalCheckSendChatLockData,C=k.generalCheckSendChatLockRoom,I=k.generalGetChatOnlineCount,E=k.generalFilterMessage,D=r(836),G=D.generalUserGetLevel,M=D.generalUserGetRakeback,R=(r(9472).SERVICE_PROXY_TIME,{en:[],tr:[],de:[],es:[],beg:[],whale:[]}),B=[],U=[],Y=function(){var e=f(i().m((function e(t,r,n,a,o){var s,u,d;return i().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,w(a),void 0!==(s=c(r.rooms)[1])&&r.leave(s),r.join(a.room),e.n=1,I(t);case 1:u=e.v,t.of("/socket/general").emit("chatOnline",{online:u}),o({success:!0,messages:R[a.room]}),e.n=3;break;case 2:e.p=2,d=e.v,o({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),N=function(){var e=f(i().m((function e(t,r,n,a,o){var s,u;return i().w((function(e){for(;;)switch(e.n){case 0:try{_(a),s=c(r.rooms)[1],O(s),j(a,R[s]),u=R[s].findIndex((function(e){return e._id.toString()===a.messageId.toString()})),R[s].splice(u,1),t.of("/socket/general").to(s).emit("chatRemove",{messageId:a.messageId}),o({success:!0}),y(n._id)}catch(e){y(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),F=function(){var e=f(i().m((function e(t,r,n,a,o){var s;return i().w((function(e){for(;;)switch(e.n){case 0:try{s=c(r.rooms)[1],T(s),R[s]=[],t.of("/socket/general").to(s).emit("chatClear",{}),message={room:s,message:"Chat has been cleared by an administrator.",type:"system"},$(t,message),o({success:!0}),y(n._id)}catch(e){y(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),L=function(){var e=f(i().m((function e(t,r,n,a,o){var s,u,d;return i().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,P(a),s=b(),u=c(r.rooms)[1],C(a,s,u),e.n=1,g("chat.rooms.".concat(u,".enabled"),a.value);case 1:s=e.v,t.of("/socket/general").emit("settings",{settings:s}),message={message:"Chat has been ".concat(!0===a.value?"unlocked":"locked"," by an administrator."),room:u,type:"system"},$(t,message),o({success:!0}),y(n._id),e.n=3;break;case 2:e.p=2,d=e.v,y(r.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),$=function(e,t){try{var r="user"===t.type||void 0!==t.room?[t.room]:Object.keys(R);t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({_id:new p.Types.ObjectId},t);var n,i=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=u(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw a}}}}(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;"rainCompleted"===t.type&&(R[s]=R[s].filter((function(e){return"rainCompleted"!==e.type}))),R[s].length>50&&R[s].shift(),R[s].push(t),e.of("/socket/general").to(s).emit("chatMessage",{message:t})}}catch(e){i.e(e)}finally{i.f()}}catch(e){console.error(e)}},q=function(){var e=f(i().m((function e(t){var r,n,a,o,s,c;return i().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,h.find({}).select("phrase").lean();case 1:for(r=e.v,U=r.map((function(e){return e.phrase})),n=b(),message={message:"Chat has been locked by an administrator.",type:"system"},a=0,o=Object.keys(R);a<o.length;a++)s=o[a],!1===n.chat.rooms[s].enabled&&(message.room=s,$(t,message));e.n=3;break;case 2:e.p=2,c=e.v,console.error(c);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetChatMessagesSocket:Y,generalSendChatMessageSocket:function(e,t,r,n,a){try{S(n);var o,i=b(),s=c(t.rooms)[1];if(A(r,i,s),x(r,i,B),B[r._id.toString()]=(new Date).getTime(),"admin"===r.rank&&!0===n.message.trim().startsWith("/system"))o={message:m.escape(n.message.replace("/system","").trim()),type:"system"};else{var u=G(r),d=M(r);o={message:E(n.message,U),room:s,user:{_id:r._id,roblox:r.roblox,username:r.username,avatar:r.avatar,rank:r.rank,level:u,rakeback:d.name,stats:!0===r.anonymous?null:r.stats,createdAt:r.createdAt},type:"user"}}$(e,o),a({success:!0}),y(r._id)}catch(e){y(t.decoded._id),a({success:!1,error:{type:"error",message:e.message}})}},generalSendChatRemoveSocket:N,generalSendChatClearSocket:F,generalSendChatLockSocket:L,generalChatAddMessage:$,generalChatAddFilter:function(e){U.push(e)},generalChatRemoveFilter:function(e){var t=U.indexOf(e);-1!==t&&U.splice(t,1)},generalChatInit:q}},7097:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(3298),g=b.minesGetGame,k=b.minesSendBetSocket,w=b.minesSendRevealSocket,S=b.minesSendCashoutSocket,A=b.minesInit;e.exports=function(e){e.of("/socket/mines").use(function(){var e=i(n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,f("mines",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=6;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:t.emit("init",{game:g(t.decoded)}),r(),e.n=7;break;case 6:r(new Error("You need to sign in to perform this action."));case 7:e.n=9;break;case 8:return e.p=8,i=e.v,e.a(2,r({success:!1,error:{type:"error",message:i.message}}));case 9:return e.a(2)}}),e,null,[[2,4],[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/mines").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("mines",r),t.on("sendBet",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance xp stats limits affiliates anonymous mute ban btype createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.mines.enabled"),k(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendReveal",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance xp stats limits rakeback affiliates anonymous mute ban btype createdAt").lean();case 5:s=r.v,l(s,!0),v(s),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("roblox.id username avatar rank balance fbalance xp stats limits rakeback affiliates anonymous mute ban btype createdAt").lean();case 5:s=r.v,l(s,!0),v(s),S(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("mines",r);case 1:return e.a(2)}}),e)}))))})),A(e)}},7157:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,r(8461).settingCheck),f=r(8078),p=f.generalGetLeaderboardDataSocket,m=(f.generalLeaderboardInit,!1);e.exports=function(e,t){t.on("getLeaderboardData",function(){var r=i(n().m((function r(a,o){var i,u,f,m;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 3:u=r.v;case 4:d(u,!1),l(u),p(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,m=r.v,o({success:!1,error:{type:"error",message:void 0!==m.message?m.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}());var a=function(){var t=i(n().m((function t(){return n().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.resolve().then(r.t.bind(r,8078,23));case 1:(0,t.v.generalLeaderboardInit)(e);case 2:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}();m||(a(),m=!0)}},7165:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return f(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(f(t={},n,(function(){return this})),t),p=u.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,f(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=u,f(p,"constructor",u),f(u,"constructor",c),c.displayName="GeneratorFunction",f(u,a,"GeneratorFunction"),f(p),f(p,a,"Generator"),f(p,n,(function(){return this})),f(p,"toString",(function(){return"[object Generator]"})),(l=function(){return{w:o,m}})()}function f(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}f=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){f(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},f(e,t,r,n)}function p(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){p(o,n,a,i,s,"next",e)}function s(e){p(o,n,a,i,s,"throw",e)}i(void 0)}))}}var h=r(8749),y=r(2789),v=r(8109),b=r(988),g=r(6112),k=r(8744),w=r(8875),S=r(7908).socketRemoveAntiSpam,A=r(8461).settingGet,x=r(6234),_=x.crashCheckSendBetData,O=x.crashCheckSendBetUser,j=x.crashCheckSendBetGame,T=x.crashCheckSendCashoutGame,P=x.crashCheckSendCashoutBet,C=x.crashGetGameMultiplier,I=x.crashGenerateGame,E=x.crashGetOutcome,D=x.crashSanitizeGame,G=x.crashSanitizeBets,M=x.crashSanitizeBet,R=r(836),B=R.generalUserGetLevel,U=R.generalUserGetRakeback,Y=R.generalUserGetFormated,N=r(5507).generalAddBetsList,F=(r(758).InterceptResolutionAction,null),L=[],$=[],q=0,J=function(){var e=m(l().m((function e(t,r,n,a,o){var i,s,c,u,d,f,p,m,h,v,g,x,T,P,C;return l().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,_(a),O(a,n,L),j(F),e.p=1,q+=1,e.n=2,k.findOne({state:"running"}).select("state").lean();case 2:return i=e.v,e.n=3,w.find({enabled:"true"}).select("creators").lean();case 3:return s=e.v,c=s.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),u=Math.floor(a.amount),d=Math.floor(a.autoCashout)<=100?0:Math.floor(a.autoCashout),f=B(n),p=A(),m=U(n),h=!0!==n.limits.blockSponsor?Math.floor(u*m.percentage*p.general.reward.multiplier):0,v=void 0!==n.affiliates.referrer&&!0!==n.limits.blockSponsor&&"user"===n.rank?Math.floor(.005*u):0,g=0===n.btype?{balance:-u,xp:!0!==n.limits.blockSponsor?Math.floor(u*process.env.XP_RATE*p.general.reward.multiplier):0,"stats.bet":u,"leaderboard.points":null!==i&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?u:0,"affiliates.generated":v,"affiliates.leaderboardpoints":c&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?u:0,"rakeback.earned":h,"rakeback.available":h}:{fbalance:-u},x=[y.findByIdAndUpdate(n._id,{$inc:g,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean(),b.create({amount:u,autoCashout:d,game:F._id,user:n._id,btype:n.btype})],void 0!==n.affiliates.referrer&&v>0&&0===n.btype&&x.push(y.findByIdAndUpdate(n.affiliates.referrer,{$inc:{"affiliates.earned":v,"affiliates.available":v},updatedAt:(new Date).getTime()},{})),e.n=4,Promise.all(x);case 4:(T=e.v)[1]=T[1].toObject(),T[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,level:f,btype:n.btype,rakeback:m.name,stats:!0===n.anonymous?null:n.stats,limits:n.limits,createdAt:n.createdAt},L.push(T[1]),t.of("/socket/crash").emit("bet",{bet:M(T[1])}),o({success:!0,user:T[0]}),q-=1,S(n._id),e.n=6;break;case 5:e.p=5,P=e.v,S(r.decoded._id),q-=1,o({success:!1,error:{type:"error",message:P.message}});case 6:e.n=8;break;case 7:e.p=7,C=e.v,S(r.decoded._id),o({success:!1,error:{type:"error",message:C.message}});case 8:return e.a(2)}}),e,null,[[1,5],[0,7]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),K=function(){var e=m(l().m((function e(t,r,n,a,o){var i,s,c;return l().w((function(e){for(;;)switch(e.n){case 0:try{i=(new Date).getTime()-F.updatedAt,s=C(i),T(F,s),c=L[L.findIndex((function(e){return e.user._id.toString()===n._id.toString()&&e.user.btype===n.btype}))],P(F,s,c),ee(t,s,c),o({success:!0}),S(n._id)}catch(e){S(r.decoded._id),o({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),W=function(){var e=m(l().m((function e(t){var r;return l().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,L=[],e.n=1,I();case 1:F=e.v,t.of("/socket/crash").emit("game",{game:D(F)}),setTimeout((function(){H(t)}),6e3-((new Date).getTime()-new Date(F.createdAt).getTime())),e.n=3;break;case 2:e.p=2,r=e.v,console.error(r);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r},H=function(){var e=m(l().m((function e(t){var r,n,a,o;return l().w((function(e){for(;;)switch(e.n){case 0:try{F.state="pending",t.of("/socket/crash").emit("game",{game:D(F)}),q<=0?(r=h.createHash("sha256").update("".concat(F._id,"-").concat(F.fair.seed.seedServer)).digest("hex"),F.outcome=E(r),n=A(),a=L.reduce((function(e,t){return e+t.amount}),0),0!==(o=V(a/1e3,n.games.crashees))&&n.games.ctotal.enabled&&(F.outcome=Math.floor(Math.random()*(o-100+1))+100),F.state="rolling",F.updatedAt=(new Date).getTime(),t.of("/socket/crash").emit("game",{game:D(F)}),z(t,0)):setTimeout((function(){H(t)}),500)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=m(l().m((function e(t,r){var n,a;return l().w((function(e){for(;;)switch(e.n){case 0:try{n=Math.ceil(16666.666667*Math.log(.01*(F.outcome+1)))-r,a=Math.max(0,Math.min(n,150)),setTimeout((function(){Q(t)}),a)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Q=function(){var e=m(l().m((function e(t){var r,n;return l().w((function(e){for(;;)switch(e.n){case 0:try{r=(new Date).getTime()-F.updatedAt,n=C(r),t.of("/socket/crash").emit("tick",{multiplier:n}),Z(t,n),n>F.outcome?X(t):z(t,r)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=m(l().m((function e(t){var r,n,a,o,s,u,d,f,p,m,h;return l().w((function(e){for(;;)switch(e.n){case 0:for(e.p=0,F.state="completed",t.of("/socket/crash").emit("game",{game:F}),r=[],n=[],a=0,o=0,s=L;o<s.length;o++)u=s[o],a+=!0!==u.user.limits.blockSponsor&&0===u.btype?u.amount:0,void 0===u.multiplier&&(0===u.btype&&r.push(y.findByIdAndUpdate(u.user._id,{$inc:{"limits.betToWithdraw":Math.floor(u.user.limits.betToWithdraw-u.amount)<=0?-u.user.limits.betToWithdraw:-u.amount,"limits.betToRain":Math.floor(u.user.limits.betToRain-u.amount)<=0?-u.user.limits.betToRain:-u.amount},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),n.push(b.findByIdAndUpdate(u._id,{payout:0,updatedAt:(new Date).getTime()},{new:!0}).select("amount btype payout multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username btype avatar rank xp stats rakeback anonymous createdAt"}).lean()));return e.n=1,Promise.all([v.findByIdAndUpdate(F._id,{outcome:F.outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean(),g.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*a)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(r,n));case 1:d=e.v,$.unshift(d[0]),$.length>25&&$.pop(),t.of("/socket/general").emit("rain",{rain:d[1]}),f=c(d.slice(r.length+2));try{for(f.s();!(p=f.n()).done;)m=p.value,N(t,i(i({},m),{},{user:Y(m.user),method:"crash"}))}catch(e){f.e(e)}finally{f.f()}setTimeout((function(){W(t)}),3e3),e.n=3;break;case 2:e.p=2,h=e.v,console.error(h);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(e,t){try{for(var r=0,n=L;r<n.length;r++){var a=n[r];void 0===a.multiplier&&a.autoCashout>=101&&a.autoCashout<=t&&a.autoCashout<=F.outcome?ee(e,a.autoCashout,a):void 0===a.multiplier&&Math.floor(a.amount*(t/100))>=Math.floor(1e3*process.env.CRASH_MAX_PROFIT)&&t<=F.outcome&&ee(e,t,a)}}catch(e){console.error(e)}},ee=function(){var e=m(l().m((function e(t,r,n){var a,o,s,c,u,d;return l().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,-1===(a=L.findIndex((function(e){return e._id.toString()===n._id.toString()})))){e.n=2;break}return o=Math.floor(L[a].amount*(r/100)),s=r>=125?L[a].amount:o,L[a].payout=o,L[a].multiplier=r,t.of("/socket/crash").emit("bet",{bet:M(L[a])}),c=0===n.btype?{balance:o,"stats.won":o,"limits.betToWithdraw":Math.floor(L[a].user.limits.betToWithdraw-s)<=0?-L[a].user.limits.betToWithdraw:-s,"limits.betToRain":Math.floor(L[a].user.limits.betToRain-s)<=0?-L[a].user.limits.betToRain:-s}:{fbalance:o},e.n=1,Promise.all([y.findByIdAndUpdate(L[a].user._id,{$inc:c,updatedAt:(new Date).getTime()},{new:!0}).select("roblox.id username avatar balance fbalance btype rank xp stats rakeback anonymous mute ban verifiedAt updatedAt").lean(),b.findByIdAndUpdate(L[a]._id,{payout:o,multiplier:r,updatedAt:(new Date).getTime()},{new:!0}).select("amount btype payout actions user updatedAt createdAt").lean()]);case 1:u=e.v,t.of("/socket/general").to(u[0]._id.toString()).emit("user",{user:u[0]}),N(t,i(i({},u[1]),{},{user:Y(u[0]),method:"crash"}));case 2:e.n=4;break;case 3:e.p=3,d=e.v,console.error(d);case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n){return e.apply(this,arguments)}}(),te=function(){var e=m(l().m((function e(t){var r,n,o,i,s,u,d,f;return l().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([v.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"fair.seed",select:"seedServer"}).populate({path:"bets",select:"amount payout game user"}).lean(),v.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()]);case 1:if(r=e.v,$=r[1],null===r[0]||"completed"===r[0].state){e.n=3;break}n=[],o=c(r[0].bets);try{for(o.s();!(i=o.n()).done;)void 0===(s=i.value).payout&&(u=0===s.btype?{balance:s.amount,"stats.bet":-s.amount}:{fbalance:s.amount},n=[].concat(a(n),[b.findByIdAndUpdate(s._id,{payout:s.amount,updatedAt:(new Date).getTime()}),y.findByIdAndUpdate(s.user,{$inc:u,updatedAt:(new Date).getTime()})]))}catch(e){o.e(e)}finally{o.f()}return d=h.createHash("sha256").update("".concat(r[0]._id,"-").concat(r[0].fair.seed.seedServer)).digest("hex"),r[0].outcome=E(d),e.n=2,Promise.all([v.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()].concat(a(n)));case 2:r=e.v,$.unshift(r[0]),$.length>25&&$.pop();case 3:W(t),e.n=5;break;case 4:e.p=4,f=e.v,console.error(f);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}();e.exports={crashGetData:function(){return{game:D(F),bets:G(L),history:$}},crashSendBetSocket:J,crashSendCashoutSocket:K,crashInit:te}},7242:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(i(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,i(p,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,n,(function(){return this})),i(p,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:s,m}})()}function i(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){i(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},i(e,t,r,n)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var c=r(7906),u=r(8749),d=r(1373);e.exports={duelsCheckGetGameDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==c.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckGetGameDataGame:function(e){if(null===e)throw new Error("Your entered game id is not available.")},duelsCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.playerCount||!0===isNaN(e.playerCount)||Math.floor(e.playerCount)<=1||Math.floor(e.playerCount)>10)throw new Error("Your entered player count is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.DUELS_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.DUELS_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.DUELS_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.DUELS_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."))},duelsCheckSendCreateUser:function(e,t,r){if(0===t.btype){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(r.length>=6)throw new Error("You are not allowed to have more then 6 open duels games.")}else{if(1!==t.btype)throw new Error("You don’t have selected the correct coin type");if(t.fbalance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.");if(r.length>=6)throw new Error("You are not allowed to have more then 6 open duels games.")}},duelsCheckSendBotData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||"string"!=typeof e.gameId||!0!==c.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckSendBotGame:function(e,t,r,n){if(void 0===t||"created"!==t.state||!0===r.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+n.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to call bots for this game.")},duelsCheckSendJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||"string"!=typeof e.gameId||!0!==c.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckSendJoinGame:function(e,t,r,n){if(void 0===t||"created"!==t.state||!0===r.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+n.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(!0===t.bets.some((function(t){return t.user._id.toString()===e._id.toString()})))throw new Error("You are not allowed to join more then one time per duels game.");if(t.btype!==e.btype)throw new Error("Please select the same coin type")},duelsCheckSendJoinUser:function(e,t){if(0===e.btype){if(e.balance<Math.floor(t.amount))throw new Error("You don’t have enough balance for this action.")}else if(e.fbalance<Math.floor(t.amount))throw new Error("You don’t have enough balance for this action.")},duelsCheckSendCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||"string"!=typeof e.gameId||!0!==c.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},duelsCheckSendCancelGame:function(e,t,r,n){if(void 0===t||"created"!==t.state||!0===r.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+n.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to cancel this game.")},duelsGenerateGame:function(e,t,r){return new Promise(function(){var n,a=(n=o().m((function n(a,i){var s,c,l,f;return o().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,s=u.randomBytes(24).toString("hex"),c=u.createHash("sha256").update(s).digest("hex"),n.n=1,d.create({amount:e,playerCount:t,fair:{seedServer:s,hash:c},btype:r,state:"created"});case 1:l=(l=n.v).toObject(),a(l),n.n=3;break;case 2:n.p=2,f=n.v,i(f);case 3:return n.a(2)}}),n,null,[[0,2]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())},duelsGetGameIndex:function(e,t){return e.findIndex((function(e){return e._id.toString()===t.toString()}))},duelsSanitizeGames:function(e){var t,r=[],a=n(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;"completed"!==(o=JSON.parse(JSON.stringify(o))).state&&(o.fair={hash:o.fair.hash});var i,s=n(o.bets);try{for(s.s();!(i=s.n()).done;){var c=i.value;c.user=!0===c.bot?{}:{_id:c.user._id,roblox:c.user.roblox,username:c.user.username,avatar:c.user.avatar,rank:c.user.rank,level:c.user.level,rakeback:c.user.rakeback.name,stats:c.user.stats,btype:c.user.btype,createdAt:c.user.createdAt}}}catch(e){s.e(e)}finally{s.f()}r.push(o)}}catch(e){a.e(e)}finally{a.f()}return r},duelsSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));"completed"!==t.state&&(t.fair={hash:t.fair.hash});var r,a=n(t.bets);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.user=!0===o.bot?{}:{_id:o.user._id,roblox:o.user.roblox,username:o.user.username,avatar:o.user.avatar,rank:o.user.rank,level:o.user.level,rakeback:o.user.rakeback.name,stats:o.user.stats,btype:o.user.btype,createdAt:o.user.createdAt}}}catch(e){a.e(e)}finally{a.f()}return t}}},7252:e=>{"use strict";e.exports=require("express")},7263:(e,t,r)=>{var n=r(6037),a=new n.Schema({name:{type:String},address:{type:String},user:{type:n.Schema.ObjectId,ref:"User"},createdAt:{type:Date,default:Date.now}});e.exports=n.model("CryptoAddress",a)},7348:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(7252),c=r(4729),u=r(6037),d=r(8749),l=s.Router(),f=r(573),p=r(2789),m=r(5632),h=r(4269),y=r(3304),v=r(4276).authorizeUser,b=r(5734).rateLimiterStrictMiddleware,g=r(7587),k=g.captchaCheckData,w=g.captchaGetData,S=r(5165).emailSend,A=r(84).authGenerateJwtToken,x=r(190),_=x.authCheckPostCredentialsData,O=x.authCheckPostCredentialsUser,j=x.authCheckPostCredentialsRegisterData,T=x.authCheckPostCredentialsRegisterUser,P=x.authCheckPostCredentialsLinkData,C=x.authCheckPostCredentialsLinkUser,I=x.authCheckPostCredentialsRequestData,E=x.authCheckPostCredentialsRequestUser,D=x.authCheckPostCredentialsRequestToken,G=x.authCheckPostCredentialsVerifyData,M=x.authCheckPostCredentialsVerifyToken,R=x.authCheckPostCredentialsResetData,B=x.authCheckPostCredentialsResetToken,U=x.authCheckPostCredentialsUsernameData,Y=x.authCheckPostCredentialsUsernameUser,N=x.authCheckPostCredentialsRegisterUserName,F=x.authCheckPostCredentialsProfileImage;e.exports=function(){return l.post("/",b,function(){var e=i(n().m((function e(t,r){var a,o,i,s,u,d,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,_(t.body),e.n=1,w(t.body.captcha);case 1:return a=e.v,k(a),o=t.body.email.toLowerCase().trim(),i=t.body.password.trim(),e.n=2,p.findOne({"local.email":o}).select("local ips").lean();case 2:return s=e.v,e.n=3,c.compare(i,null!==s&&void 0!==s.local?s.local.password:"");case 3:return u=e.v,O(s,u),d=t.headers["x-forwarded-for"]||t.socket.remoteAddress,s.ips=s.ips||[],s.ips.unshift({address:d}),e.n=4,p.findByIdAndUpdate(s._id,{ips:s.ips.slice(0,25),updatedAt:(new Date).getTime()}).select("local.email local.emailVerified roblox.id discord.id username avatar rank fullrank balance xp vault stats rakeback fair anonymous mute ban verifiedAt updatedAt createdAt").lean();case 4:s=e.v,l=A(s._id),r.status(200).json({success:!0,token:l,user:s}),e.n=6;break;case 5:e.p=5,f=e.v,r.status(500).json({success:!1,error:{type:"error",message:f.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/register",b,function(){var e=i(n().m((function e(t,r){var a,o,i,s,l,f,h,v,b,g,S,x,_,O,P,C;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,j(t.body),e.n=1,w(t.body.captcha);case 1:return a=e.v,k(a),o=t.body.username.trim(),i=t.body.email.toLowerCase().trim(),s=t.body.password.trim(),e.n=2,p.findOne({"local.email":i}).select("local").lean();case 2:return l=e.v,T(l),e.n=3,p.findOne({username:o}).select("local").lean();case 3:return f=e.v,N(f),e.n=4,c.genSalt(10);case 4:return h=e.v,e.n=5,c.hash(s,h);case 5:return s=e.v,v=[d.randomBytes(8).toString("hex"),d.randomBytes(8).toString("hex")],b=[d.randomBytes(24).toString("hex"),d.randomBytes(24).toString("hex")],g=[d.createHash("sha256").update(b[0]).digest("hex"),d.createHash("sha256").update(b[1]).digest("hex")],S=t.headers["x-forwarded-for"]||t.socket.remoteAddress,x=new u.Types.ObjectId,_=Math.floor(39*Math.random())+1,e.n=6,Promise.all([p.create({_id:x,username:o,local:{email:t.body.email.toLowerCase(),password:s},ips:[{address:S}],avatar:"/public/img/avatar/".concat(_,".webp")}),y.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1}},{upsert:!0}),m.create({seedClient:v[0],seedServer:b[0],hash:g[0],nonce:1,user:x,state:"active"}),m.create({seedClient:v[1],seedServer:b[1],hash:g[1],nonce:1,user:x,state:"created"})]);case 6:(O=e.v)[0]=O[0].toObject(),delete O[0].local.password,P=A(O[0]._id),r.status(200).json({success:!0,token:P,user:O[0]}),e.n=8;break;case 7:e.p=7,C=e.v,r.status(500).json({success:!1,error:{type:"error",message:C.message}});case 8:return e.a(2)}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/username",[b,v(!0)],function(){var e=i(n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,U(t.body),a=t.body.username.trim(),e.n=1,Promise.all([p.findById(t.user._id).select("local").lean(),p.findOne({username:a})]);case 1:return o=e.v,Y(o),e.n=2,p.findByIdAndUpdate(t.user._id,{username:a},{new:!0}).select("local.email username").lean();case 2:o=e.v,r.status(200).json({success:!0,user:o}),e.n=4;break;case 3:e.p=3,i=e.v,r.status(500).json({success:!1,error:{type:"error",message:i.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/profileimage",[b,v(!0)],function(){var e=i(n().m((function e(t,r){var a,o,s,c,u,d,l,m,h,y,v,b;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([p.findById(t.user._id).select("local avatar").lean()]);case 1:return a=e.v,o=t.body.image,F(a),s=a[0].avatar||"",c=s.split("/").pop(),u=Array.from({length:40},(function(e,t){return"".concat(t+1,".webp")})),d=o.match(/^data:image\/([a-zA-Z0-9+]+);base64,/),l=d?d[1]:"png",m=c,u.includes(c)||void 0===m?(h=Date.now(),y=Math.floor(1e6*Math.random()),m="img_".concat(h,"_").concat(y)):((v=m.split(".")).pop(),m=v.join(".")),new Promise(function(){var e=i(n().m((function e(t,r){return n().w((function(e){for(;;)switch(e.n){case 0:try{f.img(o,"./bin/public/img/avatar/",m,(function(e,r){if(e)throw Error(e.message);t()}))}catch(e){r(e)}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.n=2,p.findByIdAndUpdate(t.user._id,{avatar:"/public/img/avatar/"+m+"."+l},{new:!0}).select("local.email username").lean();case 2:a=e.v,r.status(200).json({success:!0,user:a}),e.n=4;break;case 3:e.p=3,b=e.v,r.status(500).json({success:!1,error:{type:"error",message:b.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/link",[b,v(!0)],function(){var e=i(n().m((function e(t,r){var a,o,i,s,u;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,P(t.body),a=t.body.email.trim(),o=t.body.password.trim(),e.n=1,Promise.all([p.findById(t.user._id).select("local").lean(),p.findOne({"local.email":a}).select("local").lean()]);case 1:return i=e.v,C(i),e.n=2,c.genSalt(10);case 2:return s=e.v,e.n=3,c.hash(o,s);case 3:return o=e.v,e.n=4,p.findByIdAndUpdate(t.user._id,{local:{email:t.body.email,password:o}},{new:!0}).select("local.email local.emailVerified").lean();case 4:i=e.v,r.status(200).json({success:!0,user:i}),e.n=6;break;case 5:e.p=5,u=e.v,r.status(500).json({success:!1,error:{type:"error",message:u.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/request",b,function(){var e=i(n().m((function e(t,r){var a,o,i,s,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,I(t.body),e.n=1,p.findOne({"local.email":t.body.email}).select("local").lean();case 1:return a=e.v,E(a,t.body),e.n=2,h.findOne({type:t.body.type,user:a._id}).select("type user updatedAt").lean();case 2:return o=e.v,D(o),i=d.randomBytes(16).toString("hex"),e.n=3,h.findOneAndUpdate({type:t.body.type,user:a._id},{token:i,updatedAt:new Date},{upsert:!0});case 3:return s="verify"===t.body.type?"Please verify your e-mail address on ".concat(process.env.SERVER_FRONTEND_URL.split(",")[0]," by clicking on the following link: \n\n").concat(process.env.SERVER_FRONTEND_URL.split(",")[0],"/verify?userId=").concat(a._id,"&token=").concat(i):"Please reset your password on ".concat(process.env.SERVER_FRONTEND_URL.split(",")[0]," by clicking on the following link: \n\n").concat(process.env.SERVER_FRONTEND_URL.split(",")[0],"/reset?userId=").concat(a._id,"&token=").concat(i),e.n=4,S(a.local.email,"verify"===t.body.type?"Verify your e-mail address.":"Reset your password.",s);case 4:r.status(200).json({success:!0}),e.n=6;break;case 5:e.p=5,c=e.v,r.status(500).json({success:!1,error:{type:"error",message:c.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/verify",b,function(){var e=i(n().m((function e(t,r){var a,o;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,G(t.body),e.n=1,h.findOne({token:t.body.token,type:"verify",user:t.body.userId}).select("token type user updatedAt").lean();case 1:return a=e.v,M(a),e.n=2,Promise.all([h.findByIdAndDelete(a._id),p.findByIdAndUpdate(a.user,{"local.emailVerified":!0},{})]);case 2:r.status(200).json({success:!0}),e.n=4;break;case 3:e.p=3,o=e.v,r.status(500).json({success:!1,error:{type:"error",message:o.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/reset",b,function(){var e=i(n().m((function e(t,r){var a,o,i,s,u;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,R(t.body),e.n=1,w(t.body.captcha);case 1:return a=e.v,k(a),e.n=2,h.findOne({token:t.body.token,type:"reset",user:t.body.userId}).select("token type user updatedAt").lean();case 2:return o=e.v,B(o),i=t.body.password.trim(),e.n=3,c.genSalt(10);case 3:return s=e.v,e.n=4,c.hash(i,s);case 4:return i=e.v,e.n=5,Promise.all([h.findByIdAndDelete(o._id),p.findByIdAndUpdate(o.user,{"local.password":i},{})]);case 5:r.status(200).json({success:!0}),e.n=7;break;case 6:e.p=6,u=e.v,r.status(500).json({success:!1,error:{type:"error",message:u.message}});case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),l}},7402:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=r(8340),i=r(8749);e.exports={callbackCheckPostOxapayData:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.hmac||"string"!=typeof e.hmac)throw new Error("Your provided hmac is invalid.")},callbackOxapayCreateHmac:function(e){var t=JSON.stringify(e);return i.createHmac("sha512",process.env.OXAPAY_MERCHANT_API_KEY).update(t).digest("hex")},callbackOxapayCreatePayoutHmac:function(e){var t=JSON.stringify(e);return i.createHmac("sha512",process.env.PAYOUT_API_KEY).update(t).digest("hex")},callbackCheckPostOxapayHmac:function(e,t){if(e.toString()!==t.hmac.toString())throw new Error("Your provided hmac is invalid.")},callbackCheckPostCoinpaymentsData:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.hmac||void 0===e.hmac||"string"!=typeof e.hmac)throw new Error("Your provided hmac is invalid.");if(void 0===t.merchant||null===t.merchant||"string"!=typeof t.merchant||t.merchant.toString()!==process.env.COINPAYMENTS_MERCHANT.toString())throw new Error("Your provided merchant is invalid.")},callbackCheckPostCoinpaymentsHmac:function(e,t){if("CoinPayments.net IPN Generator"!==t["user-agent"])throw new Error("Your Payment Origin is Coinpayment.")},callbackCheckPostCoinpaymentsTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided transaction id is currently processed.")},callbackCheckPostSkinifyData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.transaction_id||!0===isNaN(e.transaction_id))throw new Error("Your provided transaction id is invalid.");if(void 0===e.token_md5||"string"!=typeof e.token_md5)throw new Error("Your provided token is invalid.");if(void 0===e.status||"string"!=typeof e.status)throw new Error("Your provided status is invalid.")},callbackCheckPostSkinifyToken:function(e,t){if(e.toString()!==t.token_md5.toString())throw new Error("Your provided token is invalid.")},callbackCheckPostSkinifyTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided order id is currently processed.")},callbackCheckPostZebrasmarketData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.orderId)throw new Error("Your provided order id is invalid.")},callbackCheckPostZebrasmarketSignature:function(e,t){if(e.toString()!==t.signature.toString())throw new Error("Your provided signature is invalid.")},callbackCheckPostZebrasmarketTransaction:function(e,t){if(!0===t.includes(e.toString()))throw new Error("Your provided order id is currently processed.")},callbackCoinpaymentsCreateHmac:function(e){var t=o.stringify(e).replace(/%20/g,"+");return i.createHmac("sha512",process.env.COINPAYMENTS_SECRET).update(t).digest("hex")},callbackZebrasmarketCreateSignature:function(e){var t,r="",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}(Object.keys(e).sort());try{for(o.s();!(t=o.n()).done;){var s=t.value;"signature"!==s&&"object"!==n(e[s])&&(r+=e[s])}}catch(e){o.e(e)}finally{o.f()}return i.createHash("sha256").update("".concat(r+process.env.ZEBRASMARKET_API_KEY)).digest("hex")}}},7523:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(6734),g=b.rouletteGetDataSocket,k=b.rouletteSendBetSocket,w=b.rouletteInit;e.exports=function(e){e.of("/socket/roulette").use(function(){var e=i(n().m((function e(t,r){var a,o,i,c;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,f("roulette",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=5;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:return e.n=6,g();case 6:i=e.v,t.emit("init",i),r(),e.n=8;break;case 7:return e.p=7,c=e.v,e.a(2,r({success:!1,error:{type:"error",message:c.message}}));case 8:return e.a(2)}}),e,null,[[2,4],[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/roulette").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("roulette",r),t.on("sendBet",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance btype xp stats limits affiliates anonymous mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.roulette.enabled"),k(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("roulette",r);case 1:return e.a(2)}}),e)}))))})),w(e)}},7526:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckUserRank,f=u.socketCheckUserFullRank,p=(u.socketCheckAntiSpam,u.socketRemoveAntiSpam,r(4569)),m=p.adminGetStatsDataSocket,h=p.adminGetStatsListSocket,y=p.adminGetCryptoTransactionListSocket;e.exports=function(e,t){t.on("getStatsData",function(){var r=i(n().m((function r(a,o){var i,u,l,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),f(u,["fulladmin"]),m(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getStatsList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getCryptoTransactionList",function(){var r=i(n().m((function r(a,o){var i,u,l,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank agreed mute ban");case 3:u=r.v;case 4:d(u,!0),f(u,["fulladmin"]),y(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}())}},7558:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var d=r(7252),l=(r(8749),d.Router()),f=r(2789),p=(r(7263),r(4823),r(5958),r(6363),r(3304),r(5734).rateLimiterMiddleware),m=r(7402),h=(m.callbackCheckPostCoinpaymentsData,m.callbackCheckPostCoinpaymentsHmac,m.callbackCheckPostCoinpaymentsTransaction,m.callbackCheckPostSkinifyData,m.callbackCheckPostSkinifyToken,m.callbackCheckPostSkinifyTransaction,m.callbackCheckPostZebrasmarketData,m.callbackCheckPostZebrasmarketSignature,m.callbackCheckPostZebrasmarketTransaction,m.callbackCoinpaymentsCreateHmac,m.callbackZebrasmarketCreateSignature,m.callbackCheckPostOxapayData,m.callbackOxapayCreateHmac,m.callbackCheckPostOxapayHmac,m.callbackOxapayCreatePayoutHmac,r(3818));h.cashierCryptoGenerateAddress,h.cashierCryptoGetStableCurrencyName,r(8461).settingGet,e.exports=function(e){var t=r(6037);return l.get("/getrank",p,function(){var e,r=(e=a().m((function e(r,n){var o,i,c,u;return a().w((function(e){for(;;)switch(e.n){case 0:if(o=r.query.affiliate){e.n=1;break}return e.a(2,n.status(400).json({error:"Missing affiliate parameter"}));case 1:if(t.Types.ObjectId.isValid(o)){e.n=2;break}return e.a(2,n.status(400).json({error:"Invalid affiliate ID format"}));case 2:return e.p=2,e.n=3,f.find({"affiliates.referrer":o}).sort({"affiliates.leaderboardpoints":-1}).select("username affiliates.leaderboardpoints avatar createdAt").lean();case 3:return(i=e.v).map((function(e){return s(s({},e),{},{avatar:e.avatar?"https://pigino.bet/api".concat(e.avatar):null})})),c=i.map((function(e){var t;return{username:e.username,avatar:e.avatar?"https://pigino.bet/api".concat(e.avatar):null,wagered:(((null===(t=e.affiliates)||void 0===t?void 0:t.leaderboardpoints)||0)/1e3).toFixed(2),createdAt:e.createdAt}})),e.a(2,n.status(200).json({data:c,message:"affiliate data retrieved successfully"}));case 4:return e.p=4,u=e.v,console.error("Error fetching rank:",u),e.a(2,n.status(500).json({error:"Internal server error"}))}}),e,null,[[2,4]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()),l}},7587:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(4229),c=r(8340),u=r(3688);e.exports={captchaCheckData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(!0!==e.success)throw new Error("Your provided captcha token is invalid.")},captchaGetData:function(e){return new Promise(function(){var t=i(n().m((function t(r,a){var o,i;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,s("https://hcaptcha.com/siteverify?secret=".concat(process.env.CAPTCHA_SECRET,"&response=").concat(e),{method:"POST"});case 1:if(void 0===(o=t.v)||200!==o.status){t.n=3;break}return t.n=2,o.json();case 2:i=t.v,r(i),t.n=4;break;case 3:r({success:!1});case 4:t.n=6;break;case 5:t.p=5,t.v,r({success:!1});case 6:return t.a(2)}}),t,null,[[0,5]])})));return function(e,r){return t.apply(this,arguments)}}())},captchaGetDataRoblox:function(e,t,r){return new Promise(function(){var a=i(n().m((function a(o,i){var d,l,f,p;return n().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,d=new u(e),l={"Sec-Ch-Ua":t.headers["sec-ch-ua"],"Sec-Ch-Ua-Mobile":t.headers["sec-ch-ua-mobile"],"Sec-Ch-Ua-Platform":t.headers["sec-ch-ua-platform"],"User-Agent":t.headers["user-agent"],Accept:"*/*",Origin:"https://www.roblox.com","Sec-Fetch-Site":"cross-site","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty",Referer:"https://www.roblox.com/","Accept-Encoding":"gzip, deflate","Accept-Language":t.headers["accept-language"],"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n.n=1,s("https://client-api.arkoselabs.com/fc/gt2/public_key/476068BF-9607-4799-B53D-966BE98E2B81",{method:"POST",agent:d,headers:l,body:c.stringify(r)});case 1:if(!(f=n.v).ok){n.n=3;break}return n.n=2,f.json();case 2:f=n.v,o(f),n.n=4;break;case 3:i(new Error(f.statusText));case 4:n.n=6;break;case 5:n.p=5,p=n.v,i(p);case 6:return n.a(2)}}),a,null,[[0,5]])})));return function(e,t){return a.apply(this,arguments)}}())}}},7711:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(2789),s=r(5734).rateLimiter,c=r(7908),u=c.socketCheckUserData,d=c.socketCheckAntiSpam,l=c.socketRemoveAntiSpam,f=r(8461).settingCheck,p=r(8796).cashierSendSteamDepositSocket;e.exports=function(e,t){t.on("sendSteamDeposit",function(){var r,a=(r=n().m((function r(a,o){var c,m,h,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,c=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,s.consume(c);case 3:return r.n=4,d(t.decoded._id);case 4:return r.p=4,r.n=5,i.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:m=r.v,u(m,!0),f(m,"steam.deposit.enabled"),p(e,t,m,a,o),r.n=7;break;case 6:r.p=6,h=r.v,l(t.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())}},7906:e=>{"use strict";e.exports=require("validator")},7908:e=>{function t(){var e,n,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function s(t,a,o,i){var s=a&&a.prototype instanceof u?a:u,d=Object.create(s.prototype);return r(d,"_invoke",function(t,r,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(t,r){for(i=t,s=r,n=0;!l&&u&&!a&&n<d.length;n++){var a,o=d[n],p=f.p,m=o[2];t>3?(a=m===r)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=t<2&&p<o[1])?(i=0,f.v=r,f.n=o[1]):p<m&&(a=t<3||o[0]>r||r>m)&&(o[4]=t,o[5]=r,f.n=m,i=0))}if(a||t>1)return c;throw l=!0,r}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(n=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),n=o[a]){if(!(n=n.call(o,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=o.return)&&n.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((n=(l=f.n<0)?s:t.call(r,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:n,done:l}}}(t,o,i),!0),d}var c={};function u(){}function d(){}function l(){}n=Object.getPrototypeOf;var f=[][o]?n(n([][o]())):(r(n={},o,(function(){return this})),n),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,r(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,r(p,"constructor",l),r(l,"constructor",d),d.displayName="GeneratorFunction",r(l,i,"GeneratorFunction"),r(p),r(p,i,"Generator"),r(p,o,(function(){return this})),r(p,"toString",(function(){return"[object Generator]"})),(t=function(){return{w:s,m}})()}function r(e,t,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,t,n,a){if(t)o?o(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n;else{var i=function(t,n){r(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},r(e,t,n,a)}function n(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,c,"next",e)}function c(e){n(i,a,o,s,c,"throw",e)}s(void 0)}))}}var o={general:[],crash:[],roll:[],blackjack:[],duels:[],mines:[],towers:[],unbox:[],battles:[],upgrader:[],plinko:[],roulette:[],cashier:[],admin:[]},i=[];e.exports={socketCheckUserData:function(e,t){if(!0===t&&null===e)throw new Error("You need to sign in to perform this action.");if(!0===t&&void 0!==e.ban&&new Date(e.ban.expire).getTime()>(new Date).getTime())throw new Error("You got banned for ".concat(e.ban.type," because of the reason: ").concat(e.ban.reason,"."))},socketCheckUserRank:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.rank||!0!==t.includes(e.rank))throw new Error("You are not authorized to perform the requested action.")},socketCheckConnectionLimit:function(e,r){return new Promise(function(){var n=a(t().m((function n(a,i){var s;return t().w((function(t){for(;;)switch(t.n){case 0:if(t.p=0,!(o[e].filter((function(e){return e===r.toString()})).length>=5)){t.n=1;break}throw new Error("Too many active socket connections.");case 1:a();case 2:t.n=4;break;case 3:t.p=3,s=t.v,i(s);case 4:return t.a(2)}}),n,null,[[0,3]])})));return function(e,t){return n.apply(this,arguments)}}())},socketAddConnectionLimit:function(e,t){o[e].push(t.toString())},socketRemoveConnectionLimit:function(e,t){var r=o[e].findIndex((function(e){return e===t.toString()}));-1!==r&&o[e].splice(r,1)},socketCheckAntiSpam:function(e){return new Promise(function(){var r=a(t().m((function r(n,a){var o;return t().w((function(t){for(;;)switch(t.n){case 0:if(t.p=0,!0!==i.includes(e.toString())){t.n=1;break}throw new Error("You need to slow down, we still processing your last request.");case 1:i.push(e.toString()),n();case 2:t.n=4;break;case 3:t.p=3,o=t.v,a(o);case 4:return t.a(2)}}),r,null,[[0,3]])})));return function(e,t){return r.apply(this,arguments)}}())},socketRemoveAntiSpam:function(e){var t=i.indexOf(e.toString());-1!==t&&i.splice(t,1)},socketCheckUserFullRank:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.fullrank||!0!==t.includes(e.fullrank))throw new Error("You are not authorized to perform the requested action.")}}},7929:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}r(2789);var s=r(5182),c=r(7908).socketRemoveAntiSpam,u=r(1550),d=u.adminCheckGetPromoListData,l=u.adminCheckSendPromoCreateData,f=u.adminCheckSendPromoCreateCode,p=u.adminCheckSendPromoRemoveData,m=u.adminCheckSendPromoRemoveCode,h=function(){var e=i(n().m((function e(t,r,a,o,i){var c,u,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,d(o),c=12*(o.page-1),e.n=1,Promise.all([s.countDocuments({code:{$regex:o.search,$options:"i"}}),s.find({code:{$regex:o.search,$options:"i"}}).limit(12).skip(c).select("code reward redeemptionsTotal redeemptionsMax allowLevel levelMin createdAt").lean()]);case 1:u=e.v,i({success:!0,count:u[0],promos:u[1]}),e.n=3;break;case 2:e.p=2,l=e.v,i({success:!1,error:{type:"error",message:l.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),y=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d,p,m,h,y,v,b;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(o),u=o.code.toLowerCase(),d=Math.floor(o.reward),p=Math.floor(o.redeemptions),m=Math.floor(o.level),h=Math.floor(o.allowlevel),y=Math.floor(o.ipallow),e.n=1,s.findOne({code:u}).select("code").lean();case 1:return v=e.v,f(v),e.n=2,s.create({code:u,reward:d,levelMin:m,allowLevel:h,ipRestricktLevel:y,redeemptionsMax:p});case 2:v=(v=e.v).toObject(),i({success:!0,promo:v}),c(a._id),e.n=4;break;case 3:e.p=3,b=e.v,c(a._id),i({success:!1,error:{type:"error",message:b.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),v=function(){var e=i(n().m((function e(t,r,a,o,i){var u,d;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,p(o),e.n=1,s.findById(o.promoId).select("_id").lean();case 1:return u=e.v,m(u),e.n=2,s.findByIdAndDelete(o.promoId);case 2:i({success:!0,promo:u}),c(a._id),e.n=4;break;case 3:e.p=3,d=e.v,c(a._id),i({success:!1,error:{type:"error",message:d.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetPromoListSocket:h,adminSendPromoCreateSocket:y,adminSendPromoRemoveSocket:v}},7950:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return d(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(d(t={},n,(function(){return this})),t),p=l.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,d(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=l,d(p,"constructor",l),d(l,"constructor",c),c.displayName="GeneratorFunction",d(l,a,"GeneratorFunction"),d(p),d(p,a,"Generator"),d(p,n,(function(){return this})),d(p,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:o,m}})()}function d(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){d(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},d(e,t,r,n)}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=r(7906),y=r(8749),v=r(8461).settingGet,b=r(5729),g=(r(9472).SERVICE_PROXY_TIME,function(e){var t,r=[],n=f(e);try{for(n.s();!(t=n.n()).done;)for(var a=t.value,o=0;o<a.count;o++)r.push({box:a.box})}catch(e){n.e(e)}finally{n.f()}return r}),k=function(e,t,r,n){var a=0,o=null;if(r){var i,s=f(e);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(t<=(a+=c.tickets1)){o=c.item;break}}}catch(e){s.e(e)}finally{s.f()}return o}if(n){var u,d=f(e);try{for(d.s();!(u=d.n()).done;){var l=u.value;if(t<=(a+=l.tickets2)){o=l.item;break}}}catch(e){d.e(e)}finally{d.f()}return o}var p,m=f(e);try{for(m.s();!(p=m.n()).done;){var h=p.value;if(t<=(a+=h.tickets)){o=h.item;break}}}catch(e){m.e(e)}finally{m.f()}return o};e.exports={battlesCheckGetGameDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==h.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},battlesCheckGetGameDataGame:function(e){if(null===e)throw new Error("Your entered game id is not available.")},battlesCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.playerCount||null===e.playerCount||!0===isNaN(e.playerCount)||Math.floor(e.playerCount)<2||Math.floor(e.playerCount)>6)throw new Error("Your entered mode is invalid.");if(void 0===e.mode||null===e.mode||"string"!=typeof e.mode||!0!==["standard","team","group"].includes(e.mode))throw new Error("Your entered mode is invalid.");if(void 0===e.boxes||null===e.boxes||!0!==Array.isArray(e.boxes)||e.boxes.length<=0)throw new Error("Your entered boxes are invalid.");if(void 0===e.levelMin||null===e.levelMin||!0===isNaN(e.levelMin)||e.levelMin<0||e.levelMin>100)throw new Error("Your entered min level is invalid.");if(void 0===e.funding||null===e.funding||!0===isNaN(e.funding)||e.funding<0||e.funding>100)throw new Error("Your entered funding value is invalid.");if(void 0===e.private||null===e.private||"boolean"!=typeof e.private)throw new Error("Your entered private value is invalid.");if(void 0===e.affiliateOnly||null===e.affiliateOnly||"boolean"!=typeof e.affiliateOnly)throw new Error("Your entered affiliate value is invalid.");if(void 0===e.cursed||null===e.cursed||"boolean"!=typeof e.cursed)throw new Error("Your entered affiliate value is invalid.");if(void 0===e.terminal||null===e.terminal||"boolean"!=typeof e.terminal)throw new Error("Your entered affiliate value is invalid.")},battlesCheckSendCreateBoxes:function(e){var t,r=0,n=f(e.boxes);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(void 0===a._id||"string"!=typeof a._id||!0!==h.isMongoId(a._id))throw new Error("Your entered box id is invalid.");if(void 0===a.count||!0===isNaN(a.count)||Math.floor(a.count)<=0)throw new Error("Your entered box count is invalid.");r+=a.count}}catch(e){n.e(e)}finally{n.f()}if(r>50)throw new Error("Your are not allowed to select more then 50 boxes.")},battlesCheckSendCreateUser:function(e,t,r){if(0===e.btype){if(e.balance<r)throw new Error("You don’t have enough balance for this action.");if(!0===e.limits.blockSponsor&&t.funding>0)throw new Error("You are not allowed to add funding to your battles.")}else{if(1!==e.btype)throw new Error("You don’t have selected the correct coin type");if(e.balance<r)throw new Error("You don’t have enough balance for this action.");if(!0===e.limits.blockSponsor&&t.funding>0)throw new Error("You are not allowed to add funding to your battles.")}},battlesCheckSendBotData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==h.isMongoId(e.gameId))throw new Error("You’ve entered an invalid game id.")},battlesCheckSendBotGame:function(e,t,r,n){if(null==t||"created"!==t.state||!0===n.includes(t._id.toString())||t.playerCount<=Math.floor(t.bets.length+r.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to call bots for this game.")},battlesCheckSendJoinData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==h.isMongoId(e.gameId))throw new Error("You’ve entered an invalid game id.");if(void 0===e.slot||null===e.slot||!0===isNaN(e.slot)||Math.floor(e.slot)<1||Math.floor(e.slot)>5)throw new Error("You’ve entered an invalid slot.")},battlesCheckSendJoinGame:function(e,t,r,n,a){if(null==r||"created"!==r.state||!0===a.includes(r._id.toString())||r.playerCount<=Math.floor(r.bets.length+n.filter((function(e){return e.toString()===r._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(r.playerCount<=Math.floor(e.slot))throw new Error("Your requested slot is not available.");if(!0===r.bets.some((function(t){return t.slot===Math.floor(e.slot)})))throw new Error("Your requested slot is already occupied.");if(!0===r.bets.some((function(e){return e.user._id.toString()===t._id.toString()})))throw new Error("You aren't allowed to join more then one time per battles game.");if(r.options.levelMin>Math.floor(Math.pow(t.xp/1e3/100,1/3)))throw new Error("You need to have a minimum level of ".concat(r.options.levelMin," to join this battles game."));if(!0===r.options.affiliateOnly&&(void 0===t.affiliates.referrer||t.affiliates.referrer.toString()!==r.bets[0].user._id.toString()))throw new Error("You need to be an creators affiliate to join this battles game.");if(r.btype!==t.btype)throw new Error("Please select the same coin type")},battlesCheckSendJoinUser:function(e,t){if(e.balance<t.amount-Math.floor(t.amount*t.options.funding/100))throw new Error("You don’t have enough balance for this action.")},battlesCheckSendCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.gameId||null===e.gameId||"string"!=typeof e.gameId||!0!==h.isMongoId(e.gameId))throw new Error("Your entered game id is invalid.")},battlesCheckSendCancelGame:function(e,t,r,n){if(null==t||"created"!==t.state||!0===n.some((function(e){return e.toString()===t._id.toString()}))||t.playerCount<=Math.floor(t.bets.length+r.filter((function(e){return e.toString()===t._id.toString()})).length))throw new Error("Your requested game is not available or completed.");if(e._id.toString()!==t.bets[0].user._id.toString())throw new Error("You aren`t allowed to cancel this game.")},battlesGenerateGame:function(e,t,r,n){return new Promise(function(){var a,o=(a=u().m((function a(o,i){var s,c,d,l;return u().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,s=y.randomBytes(24).toString("hex"),c=y.createHash("sha256").update(s).digest("hex"),a.n=1,b.create({amount:t,playerCount:Math.floor(e.playerCount),mode:e.mode,boxes:r,options:{levelMin:Math.floor(e.levelMin),funding:Math.floor(e.funding),cursed:e.cursed,terminal:e.terminal,private:e.private,affiliateOnly:e.affiliateOnly,trust:v().games.cbattles.enabled,trust1:v().games.cmbattles.enabled},fair:{seedServer:s,hash:c},btype:n,state:"created"});case 1:return d=a.v,a.n=2,d.populate({path:"boxes.box",select:"name slug amount items",populate:{path:"items.item",select:"name image title amountFixed"}});case 2:d=(d=a.v).toObject(),o(d),a.n=4;break;case 3:a.p=3,l=a.v,i(l);case 4:return a.a(2)}}),a,null,[[0,3]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var o=a.apply(e,t);function i(e){l(o,r,n,i,s,"next",e)}function s(e){l(o,r,n,i,s,"throw",e)}i(void 0)}))});return function(e,t){return o.apply(this,arguments)}}())},battlesFormatBoxes:function(e,t){var r,n=[],a=f(e.boxes);try{var o=function(){var e=r.value,a=t.find((function(t){return t._id.toString()===e._id.toString()}));if(void 0===a)throw new Error("Your entered boxes are invalid.");var o=n.findIndex((function(e){return e.box._id.toString()===a.toString()}));-1!==o?n[o].count=n[o].count+Math.floor(e.count):n.push({box:a,count:Math.floor(e.count)})};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}return n},battlesGetGameIndex:function(e,t){return e.findIndex((function(e){return e._id.toString()===t.toString()}))},battlesGetAmountGame:function(e){var t,r=0,n=f(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;r+=Math.floor(a.box.amount*a.count)}}catch(e){n.e(e)}finally{n.f()}return r},battlesGetAmountWin:function(e){var t,r,n,a,o,i=g(e.boxes),s=0,u=e.mode,d=null===(t=e.options)||void 0===t?void 0:t.cursed,l=null===(r=e.options)||void 0===r?void 0:r.trust,p=null===(n=e.options)||void 0===n?void 0:n.trust1,m=e.playerCount,h=null===(a=e.options)||void 0===a?void 0:a.funding,y=f(e.bets);try{for(y.s();!(o=y.n()).done;){var v=o.value,b=!0,w=v.bot;"standard"===u?b=d||!w:"team"===u&&(h>0?(b=d||2===v.slot||3===v.slot||!w,6===m&&(b=d||3===v.slot||4===v.slot||5===v.slot||!w)):(b=d||0===v.slot||1===v.slot||!w,6===m&&(b=d||0===v.slot||1===v.slot||2===v.slot||!w)));var S,A=f(v.outcomes.entries());try{for(A.s();!(S=A.n()).done;){var x=c(S.value,2),_=x[0],O=x[1];s=Math.floor(s+k(i[_].box.items,O,b&&l,b&&p).amountFixed)}}catch(e){A.e(e)}finally{A.f()}}}catch(e){y.e(e)}finally{y.f()}return s},battlesGetCountUser:function(e){var t=2;return"1v1v1"===e?t=3:"1v1v1v1"!==e&&"2v2"!==e||(t=4),t},battlesGetRounds:g,battlesGetOutcomeItem:k,battlesGetWinnerBets:function(e){var t,r,n,o,s=g(e.boxes),u=e.mode,d=null===(t=e.options)||void 0===t?void 0:t.cursed,l=null===(r=e.options)||void 0===r?void 0:r.trust,p=null===(n=e.options)||void 0===n?void 0:n.trust1,m=e.playerCount,h=null===(o=e.options)||void 0===o?void 0:o.funding,y=e.bets.map((function(e){var t,r=e.bot,n=e.slot;if("standard"===u)t=d||!r;else if("team"===u){var a=4===m?[0,1]:6===m?[0,1,2]:[];h>0&&(a=4===m?[2,3]:6===m?[3,4,5]:[]),t=d||a.includes(n)||!r}else t=!0;var o=e.outcomes.map((function(e,r){return k(s[r].box.items,e,t&&l,t&&p).amountFixed}));return i(i({},e),{},{outcomes:o})})),v=[];if("group"===e.mode)v=e.bets;else if("team"===e.mode){if(4===e.playerCount){var b=!1===e.options.terminal?[].concat(a(y[0].outcomes),a(y[1].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[0].outcomes[y[0].outcomes.length-1]+y[1].outcomes[y[1].outcomes.length-1]),w=!1===e.options.terminal?[].concat(a(y[2].outcomes),a(y[3].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[2].outcomes[y[2].outcomes.length-1]+y[3].outcomes[y[3].outcomes.length-1]);v=b===w?e.bets:!1===e.options.cursed&&b>w||!0===e.options.cursed&&b<w?[e.bets[0],e.bets[1]]:[e.bets[2],e.bets[3]]}if(6===e.playerCount){var S=!1===e.options.terminal?[].concat(a(y[0].outcomes),a(y[1].outcomes),a(y[2].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[0].outcomes[y[0].outcomes.length-1]+y[1].outcomes[y[1].outcomes.length-1]+y[2].outcomes[y[2].outcomes.length-1]),A=!1===e.options.terminal?[].concat(a(y[3].outcomes),a(y[4].outcomes),a(y[5].outcomes)).reduce((function(e,t){return e+t}),0):Math.floor(y[3].outcomes[y[3].outcomes.length-1]+y[4].outcomes[y[4].outcomes.length-1]+y[5].outcomes[y[5].outcomes.length-1]);v=S===A?e.bets:!1===e.options.cursed&&S>A||!0===e.options.cursed&&S<A?[e.bets[0],e.bets[1],e.bets[2]]:[e.bets[3],e.bets[4],e.bets[5]]}}else{var x,_=y.map((function(t){return!1===e.options.terminal?t.outcomes.reduce((function(e,t){return e+t}),0):t.outcomes[t.outcomes.length-1]})),O=!1===e.options.cursed?Math.max.apply(Math,a(_)):Math.min.apply(Math,a(_)),j=f(y.entries());try{for(j.s();!(x=j.n()).done;){var T=c(x.value,2),P=T[0],C=T[1];O===(!1===e.options.terminal?C.outcomes.reduce((function(e,t){return e+t}),0):C.outcomes[C.outcomes.length-1])&&v.push(e.bets[P])}}catch(e){j.e(e)}finally{j.f()}}return v},battlesSanitizeGames:function(e){var t,r=[],n=f(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!1===a.options.private){"completed"!==(a=JSON.parse(JSON.stringify(a))).state&&(a.fair={hash:a.fair.hash});var o,i=f(a.boxes);try{for(i.s();!(o=i.n()).done;)o.value.box.items=[]}catch(e){i.e(e)}finally{i.f()}var s,c=f(a.bets);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.user=!0===u.bot?{}:{_id:u.user._id,roblox:u.user.roblox,username:u.user.username,avatar:u.user.avatar,rank:u.user.rank,level:u.user.level,rakeback:u.user.rakeback.name,stats:u.user.stats,btype:u.user.btype,createdAt:u.user.createdAt}}}catch(e){c.e(e)}finally{c.f()}r.push(a)}}}catch(e){n.e(e)}finally{n.f()}return r},battlesSanitizeGame:function(e,t){var r=JSON.parse(JSON.stringify(e));if("completed"!==r.state&&(r.fair={hash:r.fair.hash,blockNum:r.fair.blockNum}),!0!==t){var n,a=f(r.boxes);try{for(a.s();!(n=a.n()).done;)n.value.box.items=[]}catch(e){a.e(e)}finally{a.f()}}var o,i=f(r.bets);try{for(i.s();!(o=i.n()).done;){var s=o.value;s.user=!0===s.bot?{}:{_id:s.user._id,roblox:s.user.roblox,username:s.user.username,avatar:s.user.avatar,rank:s.user.rank,level:s.user.level,rakeback:s.user.rakeback.name,stats:s.user.stats,btype:s.user.btype,createdAt:s.user.createdAt}}}catch(e){i.e(e)}finally{i.f()}return r}}},7986:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetUserListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.");if(void 0===e.sort||null===e.sort||"string"!=typeof e.sort||!1===["newest","oldest","balance","rank","deposit","withdraw","rank","wagered","xp"].includes(e.sort))throw new Error("Your entered sort value is invalid.")},adminCheckGetUserDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.")},adminCheckGetUserDataUser:function(e){if(null===e)throw new Error("Your entered user id is not available.")},adminCheckGetUserTransactionsData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminCheckGetUserGamesData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.")},adminCheckSendUserValueData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.setting||"string"!=typeof e.setting||!0!==["rank","flags","stats.deposit","vault.amount","stats.withdraw","limits.blockRain","limits.blockTip","limits.limitTip","limits.blockSponsor","limits.blockLeaderboard","leaderboard.points"].includes(e.setting))throw new Error("Your entered setting is invalid.");if(void 0===e.value)throw new Error("Your entered value is invalid.")},adminCheckSendUserBalanceData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.balance||null===e.balance||!0===isNaN(e.balance)||e.balance<0)throw new Error("Your entered balance value is invalid.")},adminCheckSendUserBalanceUser:function(e){if(null===e)throw new Error("Your entered user is not available.")},adminCheckSendUserMuteData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<0)throw new Error("Your entered mute time is invalid.");if(void 0===e.reason||null===e.reason||"string"!=typeof e.reason||!1===["insulting","racism","begging","self promotion","other"].includes(e.reason))throw new Error("Your entered mute reason is invalid.")},adminCheckSendUserBanData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.userId||null===e.userId||"string"!=typeof e.userId||!0!==n.isMongoId(e.userId))throw new Error("Your entered user id is invalid.");if(void 0===e.time||null===e.time||!0===isNaN(e.time)||Math.floor(e.time)<0)throw new Error("Your entered ban time is invalid.");if(void 0===e.reason||null===e.reason||"string"!=typeof e.reason||!1===["cheating","scamming","self request","other"].includes(e.reason))throw new Error("Your entered ban reason is invalid.")},adminFormatUserSort:function(e){var t={createdAt:-1};return"oldest"===e?t={createdAt:1}:"balance"===e?t={balance:-1}:"rank"===e?t={rank:1}:"deposit"===e?t={"stats.deposit":-1}:"withdraw"===e?t={"stats.withdraw":-1}:"wagered"===e?t={"stats.bet":-1}:"xp"===e&&(t={xp:-1}),t}}},8078:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(8744),u=r(286),d=r(836).generalUserGetFormated,l=r(593).generalGetLeaderboardTimeLeft,f=null,p=function(){var e=i(n().m((function e(t,r,a,o,i){var u,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([c.findOne({state:"running"}).select("winners duration type state updatedAt").lean(),s.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(50).select("roblox.id username avatar rank xp stats leaderboard rakeback anonymous createdAt").lean()]);case 1:if(null===(u=e.v)[0]){e.n=2;break}u[0].winners=u[0].winners.map((function(e,t){return{prize:e.prize,points:void 0!==u[1][t]?u[1][t].leaderboard.points:0,user:void 0!==u[1][t]?d(u[1][t]):void 0}})),e.n=4;break;case 2:return e.n=3,Promise.all([c.findOne({state:"completed"}).sort({updatedAt:-1}).select("winners duration type state updatedAt").lean(),s.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(50).select("roblox.id username avatar rank xp stats leaderboard rakeback anonymous createdAt").lean()]);case 3:null!==(u=e.v)[0]&&(u[0].winners=u[0].winners.map((function(e,t){return{prize:e.prize,points:void 0!==u[1][t]?u[1][t].leaderboard.points:0,user:void 0!==u[1][t]?d(u[1][t]):void 0}})));case 4:i({success:!0,leaderboard:u[0]}),e.n=6;break;case 5:e.p=5,l=e.v,i({success:!1,error:{type:"error",message:l.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),m=function(){var e=i(n().m((function e(t,r){var a;return n().w((function(e){for(;;)switch(e.n){case 0:try{a=l(r),f=setTimeout((function(){y(t,r)}),a)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=i(n().m((function e(t,r){return n().w((function(e){for(;;)switch(e.n){case 0:try{clearTimeout(f)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=i(n().m((function e(t,r){var a,o,i,d,l;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,clearTimeout(f),e.n=1,Promise.all([c.findById(r._id).select("winners state updatedAt").lean(),c.findOne({state:"created"}).sort({createdAt:1}).select("state updatedAt").lean(),s.find({rank:"user"}).sort({"leaderboard.points":-1}).limit(10).select("leaderboard").lean()]);case 1:for(a=e.v,o=[],i=[],d=0;d<a[0].winners.length;d++)void 0!==a[2][d]||null!==a[2][d]?(o.push({prize:a[0].winners[d].prize,points:a[2][d].leaderboard.points,user:a[2][d]._id}),i.push(u.create({amount:a[0].winners[d].prize,type:"leaderboardPayout",user:a[2][d]._id,state:"completed"}))):o.push({prize:a[0].winners[d].prize,points:0});return e.n=2,Promise.all([c.findByIdAndUpdate(r._id,{winners:o,state:"completed",updatedAt:(new Date).getTime()},{})].concat(i));case 2:if(null===a[1]){e.n=4;break}return e.n=3,Promise.all([c.findByIdAndUpdate(a[1]._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("duration state updatedAt").lean(),s.updateMany({},{"leaderboard.points":0},{})]);case 3:a=e.v,m(t,a[0]);case 4:e.n=6;break;case 5:e.p=5,l=e.v,console.error(l);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=i(n().m((function e(t){var r,a,o;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([c.findOne({state:"running"}).select("duration state updatedAt").lean(),c.findOne({state:"created"}).sort({createdAt:1}).select("duration state updatedAt").lean()]);case 1:if(null===(r=e.v)[0]){e.n=2;break}(a=l(r[0]))>0?f=setTimeout((function(){y(t,r[0])}),a):y(t,r[0]),e.n=4;break;case 2:if(null===r[1]){e.n=4;break}return e.n=3,Promise.all([c.findByIdAndUpdate(r[1]._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("duration state updatedAt").lean(),s.updateMany({},{"leaderboard.points":0},{})]);case 3:r=e.v,m(t,r[0]);case 4:e.n=6;break;case 5:e.p=5,o=e.v,console.error(o);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetLeaderboardDataSocket:p,generalLeaderboardStart:m,generalLeaderboardStop:h,generalLeaderboardInit:v}},8109:(e,t,r)=>{var n=r(6037),a=new n.Schema({outcome:{type:Number},fair:{seed:{type:n.Schema.ObjectId,ref:"CrashSeed"}},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}},{toJSON:{virtuals:!0},toObject:{virtuals:!0}});a.virtual("bets",{ref:"CrashBet",localField:"_id",foreignField:"game",justOne:!1}),e.exports=n.model("CrashGame",a)},8117:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return p(u,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(p(t={},n,(function(){return this})),t),l=u.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,p(e,a,"GeneratorFunction")),e.prototype=Object.create(l),e}return c.prototype=u,p(l,"constructor",u),p(u,"constructor",c),c.displayName="GeneratorFunction",p(u,a,"GeneratorFunction"),p(l),p(l,a,"Generator"),p(l,n,(function(){return this})),p(l,"toString",(function(){return"[object Generator]"})),(f=function(){return{w:o,m}})()}function p(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}p=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){p(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},p(e,t,r,n)}function m(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){m(o,n,a,i,s,"next",e)}function s(e){m(o,n,a,i,s,"throw",e)}i(void 0)}))}}var y=r(8749),v=r(2789),b=r(7067),g=r(6966),k=r(6112),w=r(8744),S=r(8875),A=r(7908).socketRemoveAntiSpam,x=r(8461).settingGet,_=r(4162),O=_.rollCheckSendBetData,j=_.rollCheckSendBetUser,T=_.rollCheckSendBetGame,P=_.rollGetUserGameStats,C=_.rollGenerateGame,I=_.rollGetOutcome,E=_.rollSanitizeGame,D=_.rollSanitizeBets,G=_.rollSanitizeBet,M=r(836),R=M.generalUserGetLevel,B=M.generalUserGetRakeback,U=M.generalUserGetFormated,Y=r(5507).generalAddBetsList,N=null,F=[],L=[],$=[],q=function(){var e=h(f().m((function e(t,r,n,a,o){var i,s,c,u,d,l,p,m,h;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,O(a),i=P(n,F),j(a,n,i),T(N),e.p=1,$+=1,s=Math.floor(a.amount),c=Math.floor(a.multiplier),u=R(n),d=B(n),l=0===n.btype?{balance:-s,"stats.bet":s}:{fbalance:-s},e.n=2,Promise.all([v.findByIdAndUpdate(n._id,{$inc:l,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban verifiedAt updatedAt").lean(),g.create({amount:s,multiplier:c,game:N._id,user:n._id,btype:n.btype})]);case 2:(p=e.v)[1]=p[1].toObject(),p[1].user={_id:n._id,roblox:n.roblox,username:n.username,avatar:n.avatar,rank:n.rank,btype:n.btype,xp:n.xp,level:u,rakeback:d,affiliates:n.affiliates,stats:!0===n.anonymous?null:n.stats,limits:n.limits,createdAt:n.createdAt},F.push(p[1]),t.of("/socket/roll").emit("bet",{bet:G(p[1])}),o({success:!0,user:p[0]}),$-=1,A(n._id),e.n=4;break;case 3:e.p=3,m=e.v,A(r.decoded._id),$-=1,o({success:!1,error:{type:"error",message:m.message}});case 4:e.n=6;break;case 5:e.p=5,h=e.v,A(r.decoded._id),o({success:!1,error:{type:"error",message:h.message}});case 6:return e.a(2)}}),e,null,[[1,3],[0,5]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),J=function(){var e=h(f().m((function e(t){var r;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,F=[],e.n=1,C();case 1:N=e.v,t.of("/socket/roll").emit("game",{game:E(N)}),setTimeout((function(){W(t)}),13e3-((new Date).getTime()-new Date(N.createdAt).getTime())),e.n=3;break;case 2:e.p=2,r=e.v,console.error(r);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}(),K=function(e,t){for(var r=0,n=0;n<t.length;n++)e>t[n].value&&(r=t[n].percent);return r},W=function(){var e=h(f().m((function e(t){var r,n,a,o;return f().w((function(e){for(;;)switch(e.n){case 0:try{N.state="pending",t.of("/socket/roll").emit("game",{game:E(N)}),$<=0?(r=y.createHash("sha256").update("".concat(N._id,"-").concat(N.fair.seed.seedServer)).digest("hex"),N.outcome=I(r),n=x(),a=F.reduce((function(e,t){return e+t.amount}),0),0!==(o=K(a/1e3,n.games.slides))&&n.games.ctotal.enabled&&(N.outcome=Math.floor(Math.random()*(o-100+1))+100),N.state="rolling",N.updatedAt=(new Date).getTime(),t.of("/socket/roll").emit("game",{game:N}),setTimeout((function(){V(t)}),5e3)):setTimeout((function(){W(t)}),500)}catch(e){console.error(e)}case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=h(f().m((function e(t){var r,n,a,i,c,d,l,p,m,h,y,A,_,O,j,T;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,N.state="completed",e.n=1,w.findOne({state:"running"}).select("state").lean();case 1:r=e.v,n=x(),a=[],i=[],c=[],d=0,l=f().m((function e(){var t,o,s,u,l,h,y,b;return f().w((function(e){for(;;)switch(e.n){case 0:return t=m[p],o=!0!==t.user.limits.blockSponsor?Math.floor(t.amount*t.user.rakeback.percentage*n.general.reward.multiplier):0,s=N.outcome>=t.multiplier?Math.floor(t.amount*(t.multiplier/100)):0,u=t.multiplier>=125||0===s?t.amount:s,l=void 0!==t.user.affiliates.referrer&&!0!==t.user.limits.blockSponsor&&"user"===t.user.rank?Math.floor(.005*t.amount):0,d+=!0!==t.user.limits.blockSponsor&&0===t.user.btype?t.amount:0,e.n=1,S.find({enabled:"true"}).select("creators").lean();case 1:h=e.v,y=h.some((function(e){var r;return e.creators.includes(null===(r=t.user.affiliates)||void 0===r||null===(r=r.referrer)||void 0===r?void 0:r.toString())})),b=0===t.user.btype?{balance:s,xp:!0!==t.user.limits.blockSponsor?Math.floor(t.amount*process.env.XP_RATE*n.general.reward.multiplier):0,"stats.won":s,"leaderboard.points":null!==r&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0,"limits.betToWithdraw":Math.floor(t.user.limits.betToWithdraw-u)<=0?-t.user.limits.betToWithdraw:-u,"limits.betToRain":Math.floor(t.user.limits.betToRain-u)<=0?-t.user.limits.betToRain:-u,"rakeback.earned":o,"rakeback.available":o,"affiliates.generated":l,"affiliates.leaderboardpoints":y&&!0!==t.user.limits.blockSponsor&&!0!==t.user.limits.blockLeaderboard?t.amount:0}:{fbalance:s},a.push(v.findByIdAndUpdate(t.user._id,{$inc:b,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp fbalance btype stats rakeback mute ban verifiedAt updatedAt").lean()),0===t.user.btype&&void 0!==t.user.affiliates.referrer&&l>0&&i.push(v.findByIdAndUpdate(t.user.affiliates.referrer,{$inc:{"affiliates.earned":l,"affiliates.available":l},updatedAt:(new Date).getTime()},{})),c.push(g.findByIdAndUpdate(t._id,{payout:s,updatedAt:(new Date).getTime()},{new:!0}).select("amount payout btype multiplier user updatedAt createdAt").populate({path:"user",select:"roblox.id username btype avatar rank xp stats rakeback anonymous createdAt"}).lean());case 2:return e.a(2)}}),e)})),p=0,m=F;case 2:if(!(p<m.length)){e.n=4;break}return e.d(o(l()),3);case 3:p++,e.n=2;break;case 4:return e.n=5,Promise.all([b.findByIdAndUpdate(N._id,{outcome:N.outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean(),k.findOneAndUpdate({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]},{$inc:{amount:Math.floor(.001*d)}},{new:!0}).select("amount participants type state updatedAt").lean()].concat(a,i,c));case 5:r=e.v,L.unshift(r[0]),L.length>25&&L.pop(),t.of("/socket/roll").emit("game",{game:r[0]}),t.of("/socket/general").emit("rain",{rain:r[1]}),h=u(r.slice(2,a.length+i.length+2));try{for(h.s();!(y=h.n()).done;)A=y.value,t.of("/socket/general").to(A._id.toString()).emit("user",{user:A})}catch(e){h.e(e)}finally{h.f()}_=u(r.slice(a.length+i.length+2));try{for(_.s();!(O=_.n()).done;)j=O.value,Y(t,s(s({},j),{},{user:U(j.user),method:"roll"}))}catch(e){_.e(e)}finally{_.f()}setTimeout((function(){J(t)}),3e3),e.n=7;break;case 6:e.p=6,T=e.v,console.error(T);case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=h(f().m((function e(t){var r,n,o,i,s,c,d,l;return f().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([b.findOne({}).sort({createdAt:-1}).select("fair state createdAt").populate({path:"fair.seed",select:"seedServer"}).populate({path:"bets",select:"amount payout game user"}).lean(),b.find({state:"completed"}).sort({createdAt:-1}).limit(25).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()]);case 1:if(r=e.v,L=r[1],null===r[0]||"completed"===r[0].state){e.n=3;break}n=[],o=u(r[0].bets);try{for(o.s();!(i=o.n()).done;)void 0===(s=i.value).payout&&(c=0===s.btype?{balance:s.amount,"stats.bet":-s.amount}:{fbalance:s.amount},n=[].concat(a(n),[g.findByIdAndUpdate(s._id,{payout:s.amount,updatedAt:(new Date).getTime()}),v.findByIdAndUpdate(s.user,{$inc:c,updatedAt:(new Date).getTime()})]))}catch(e){o.e(e)}finally{o.f()}return d=y.createHash("sha256").update("".concat(r[0]._id,"-").concat(r[0].fair.seed.seedServer)).digest("hex"),r[0].outcome=I(d),e.n=2,Promise.all([b.findByIdAndUpdate(r[0]._id,{outcome:r[0].outcome,state:"completed",updatedAt:(new Date).getTime()},{new:!0}).select("outcome fair state createdAt").populate({path:"fair.seed",select:"seedServer hash"}).lean()].concat(a(n)));case 2:r=e.v,L.unshift(r[0]),L.length>25&&L.pop();case 3:J(t),e.n=5;break;case 4:e.p=4,l=e.v,console.error(l);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}();e.exports={rollGetData:function(){return{game:E(N),bets:D(F),history:L}},rollSendBetSocket:q,rollInit:H}},8128:(e,t,r)=>{var n=r(6037),a=new n.Schema({general:{maintenance:{enabled:{type:Boolean}},rain:{enabled:{type:Boolean}},leaderboard:{enabled:{type:Boolean}},tip:{enabled:{type:Boolean}},affiliate:{enabled:{type:Boolean}},reward:{multiplier:{type:Number}}},chat:{mode:{type:String},enabled:{type:Boolean},rooms:{en:{enabled:{type:Boolean}},tr:{enabled:{type:Boolean}},de:{enabled:{type:Boolean}},es:{enabled:{type:Boolean}},beg:{enabled:{type:Boolean}},whale:{enabled:{type:Boolean}}}},games:{crash:{enabled:{type:Boolean}},roll:{enabled:{type:Boolean}},blackjack:{enabled:{type:Boolean}},duels:{enabled:{type:Boolean}},mines:{enabled:{type:Boolean}},towers:{enabled:{type:Boolean}},unbox:{enabled:{type:Boolean}},battles:{enabled:{type:Boolean}},upgrader:{enabled:{type:Boolean}},plinko:{enabled:{type:Boolean}},roulette:{enabled:{type:Boolean}},cases:[{value:{type:Number},percent:{type:Number}}],cbattles:{enabled:{type:Boolean}},cmbattles:{enabled:{type:Boolean}},croulette:{enabled:{type:Boolean}},cblackjack:{enabled:{type:Boolean},value:{type:Number}},ctotal:{enabled:{type:Boolean}},mcases:[{value:{type:Number},percent:{type:Number}}],cmines:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],csmines:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],ctowers:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],cstowers:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],mcmines:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],mcsmines:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],mctowers:[{value:{type:Number},remain:{type:Number},percent:{type:Number}}],mcstowers:[{value:{type:Number},step:{type:Number},count:{type:Number},percent:{type:Number}}],crashees:[{value:{type:Number},percent:{type:Number}}],slides:[{value:{type:Number},percent:{type:Number}}]},robux:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},limited:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},steam:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},crypto:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},gift:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},credit:{deposit:{enabled:{type:Boolean}},withdraw:{enabled:{type:Boolean}}},depositbonus:{enabled:{type:Boolean},amount:{type:Number},famount:{type:Number}},rainrestrict:{enabled:{type:Boolean}},redeem:{enabled:{type:Boolean},amount:{type:Number}}});e.exports=n.model("Setting",a)},8223:e=>{e.exports=[[{rank:"6",suit:"heart"},{rank:"K",suit:"diamond"},{rank:"5",suit:"club"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"J",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"8",suit:"spade"},{rank:"A",suit:"diamond"},{rank:"2",suit:"diamond"}],[{rank:"9",suit:"diamond"},{rank:"5",suit:"spade"},{rank:"7",suit:"spade"}],[{rank:"3",suit:"diamond"},{rank:"J",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"6",suit:"diamond"},{rank:"5",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"diamond"},{rank:"J",suit:"club"}],[{rank:"3",suit:"club"},{rank:"Q",suit:"club"},{rank:"8",suit:"spade"}],[{rank:"Q",suit:"spade"},{rank:"8",suit:"club"},{rank:"3",suit:"club"}],[{rank:"4",suit:"heart"},{rank:"J",suit:"diamond"},{rank:"7",suit:"diamond"}],[{rank:"8",suit:"spade"},{rank:"8",suit:"club"},{rank:"5",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"J",suit:"heart"},{rank:"J",suit:"club"}],[{rank:"9",suit:"heart"},{rank:"2",suit:"heart"},{rank:"J",suit:"club"}],[{rank:"10",suit:"spade"},{rank:"5",suit:"spade"},{rank:"6",suit:"heart"}],[{rank:"9",suit:"spade"},{rank:"7",suit:"heart"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"6",suit:"diamond"},{rank:"4",suit:"diamond"}],[{rank:"10",suit:"heart"},{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"2",suit:"club"},{rank:"9",suit:"spade"},{rank:"Q",suit:"heart"}],[{rank:"10",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"9",suit:"heart"}],[{rank:"7",suit:"spade"},{rank:"9",suit:"heart"},{rank:"5",suit:"club"}],[{rank:"7",suit:"spade"},{rank:"4",suit:"club"},{rank:"10",suit:"club"}],[{rank:"10",suit:"club"},{rank:"5",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"club"},{rank:"J",suit:"diamond"}],[{rank:"2",suit:"club"},{rank:"8",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"7",suit:"spade"},{rank:"4",suit:"diamond"},{rank:"Q",suit:"diamond"}],[{rank:"3",suit:"club"},{rank:"K",suit:"spade"},{rank:"8",suit:"diamond"}],[{rank:"8",suit:"heart"},{rank:"2",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"3",suit:"diamond"},{rank:"7",suit:"diamond"}],[{rank:"6",suit:"club"},{rank:"5",suit:"spade"},{rank:"10",suit:"diamond"}],[{rank:"K",suit:"spade"},{rank:"6",suit:"club"},{rank:"5",suit:"club"}],[{rank:"8",suit:"heart"},{rank:"4",suit:"club"},{rank:"9",suit:"diamond"}],[{rank:"4",suit:"heart"},{rank:"Q",suit:"diamond"},{rank:"7",suit:"spade"}],[{rank:"6",suit:"club"},{rank:"5",suit:"club"},{rank:"10",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"9",suit:"spade"},{rank:"2",suit:"heart"}],[{rank:"2",suit:"spade"},{rank:"A",suit:"club"},{rank:"8",suit:"diamond"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"club"},{rank:"J",suit:"heart"}],[{rank:"7",suit:"heart"},{rank:"8",suit:"heart"},{rank:"6",suit:"spade"}],[{rank:"6",suit:"diamond"},{rank:"Q",suit:"club"},{rank:"5",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"10",suit:"spade"},{rank:"J",suit:"spade"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"diamond"},{rank:"J",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"4",suit:"club"},{rank:"7",suit:"spade"}],[{rank:"8",suit:"spade"},{rank:"3",suit:"heart"},{rank:"K",suit:"spade"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"7",suit:"heart"},{rank:"10",suit:"heart"},{rank:"4",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"heart"},{rank:"Q",suit:"club"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"3",suit:"spade"},{rank:"7",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"3",suit:"club"},{rank:"8",suit:"heart"},{rank:"10",suit:"club"}],[{rank:"6",suit:"club"},{rank:"K",suit:"heart"},{rank:"5",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"heart"},{rank:"J",suit:"heart"}],[{rank:"8",suit:"heart"},{rank:"4",suit:"heart"},{rank:"9",suit:"diamond"}],[{rank:"4",suit:"club"},{rank:"A",suit:"spade"},{rank:"6",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"spade"},{rank:"K",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"spade"},{rank:"K",suit:"spade"}],[{rank:"7",suit:"diamond"},{rank:"10",suit:"club"},{rank:"4",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"10",suit:"diamond"},{rank:"10",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"6",suit:"spade"},{rank:"10",suit:"club"},{rank:"5",suit:"diamond"}],[{rank:"7",suit:"heart"},{rank:"5",suit:"heart"},{rank:"9",suit:"club"}],[{rank:"K",suit:"heart"},{rank:"3",suit:"heart"},{rank:"8",suit:"club"}],[{rank:"3",suit:"diamond"},{rank:"9",suit:"club"},{rank:"9",suit:"heart"}],[{rank:"3",suit:"spade"},{rank:"J",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"Q",suit:"heart"},{rank:"A",suit:"heart"},{rank:"J",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"4",suit:"heart"},{rank:"Q",suit:"spade"}],[{rank:"9",suit:"spade"},{rank:"2",suit:"club"},{rank:"J",suit:"spade"}],[{rank:"4",suit:"club"},{rank:"7",suit:"heart"},{rank:"10",suit:"club"}],[{rank:"9",suit:"club"},{rank:"9",suit:"heart"},{rank:"3",suit:"diamond"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"diamond"},{rank:"K",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"J",suit:"heart"},{rank:"3",suit:"spade"},{rank:"8",suit:"diamond"}],[{rank:"6",suit:"heart"},{rank:"4",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"Q",suit:"club"},{rank:"5",suit:"diamond"},{rank:"6",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"A",suit:"spade"},{rank:"9",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"J",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"K",suit:"heart"},{rank:"10",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"10",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"4",suit:"spade"},{rank:"8",suit:"diamond"},{rank:"9",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"K",suit:"club"},{rank:"6",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"8",suit:"club"},{rank:"3",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"A",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"8",suit:"spade"},{rank:"5",suit:"diamond"},{rank:"8",suit:"diamond"}],[{rank:"2",suit:"spade"},{rank:"8",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"5",suit:"diamond"},{rank:"5",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"J",suit:"club"},{rank:"8",suit:"heart"},{rank:"3",suit:"heart"}],[{rank:"4",suit:"spade"},{rank:"6",suit:"club"},{rank:"A",suit:"club"}],[{rank:"9",suit:"heart"},{rank:"2",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"10",suit:"club"},{rank:"K",suit:"spade"}],[{rank:"5",suit:"diamond"},{rank:"10",suit:"club"},{rank:"6",suit:"diamond"}],[{rank:"10",suit:"diamond"},{rank:"10",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"2",suit:"club"},{rank:"10",suit:"heart"},{rank:"9",suit:"club"}],[{rank:"3",suit:"club"},{rank:"7",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"Q",suit:"diamond"},{rank:"2",suit:"club"},{rank:"9",suit:"spade"}],[{rank:"7",suit:"heart"},{rank:"J",suit:"spade"},{rank:"4",suit:"diamond"}],[{rank:"10",suit:"club"},{rank:"K",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"9",suit:"heart"},{rank:"6",suit:"club"},{rank:"6",suit:"spade"}],[{rank:"Q",suit:"spade"},{rank:"K",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"10",suit:"club"},{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"diamond"},{rank:"J",suit:"spade"}]]},8249:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(7252),c=r(8938),u=r(829),d=s.Router(),l=r(8749),f=(r(4729),r(6037)),p=(r(573),r(2789)),m=r(5632),h=(r(4269),r(3304)),y=(r(4276).authorizeUser,r(5734).rateLimiterStrictMiddleware,r(7587)),v=(y.captchaCheckData,y.captchaGetData,r(5165).emailSend,r(84).authGenerateJwtToken),b=r(190),g=(b.authCheckPostCredentialsData,b.authCheckPostCredentialsUser,b.authCheckPostCredentialsRegisterData,b.authCheckPostCredentialsRegisterUser,b.authCheckPostCredentialsLinkData,b.authCheckPostCredentialsLinkUser,b.authCheckPostCredentialsRequestData,b.authCheckPostCredentialsRequestUser,b.authCheckPostCredentialsRequestToken,b.authCheckPostCredentialsVerifyData,b.authCheckPostCredentialsVerifyToken,b.authCheckPostCredentialsResetData,b.authCheckPostCredentialsResetToken,b.authCheckPostCredentialsUsernameData,b.authCheckPostCredentialsUsernameUser,b.authCheckPostCredentialsRegisterUserName);b.authCheckPostCredentialsProfileImage,e.exports=function(){return d.get("/",function(){var e=i(n().m((function e(t,r){var a,o;return n().w((function(e){for(;;)switch(e.n){case 0:try{a="".concat(process.env.SERVER_BACKEND_URL,"/auth/google/callback"),o="https://accounts.google.com/o/oauth2/v2/auth?client_id=".concat(process.env.GOOGLE_CLIENT_ID,"&redirect_uri=").concat(a,"&response_type=code&scope=openid%20profile%20email"),r.redirect(o)}catch(e){r.status(500).json({success:!1,error:{message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),d.get("/callback",function(){var e=i(n().m((function e(t,r){var a,o,i,s,d,y,b,k,w,S,A,x,_,O,j,T,P,C,I,E,D,G;return n().w((function(e){for(;;)switch(e.n){case 0:if(a=t.query.code){e.n=1;break}return e.a(2,r.status(400).send("Missing code"));case 1:return e.p=1,o="".concat(process.env.SERVER_BACKEND_URL,"/auth/google/callback"),e.n=2,c.post("https://oauth2.googleapis.com/token",null,{params:{client_id:process.env.GOOGLE_CLIENT_ID,client_secret:process.env.GOOGLE_CLIENT_SECRET,code:a,grant_type:"authorization_code",redirect_uri:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:return i=e.v,s=i.data.id_token,d=u.decode(s),y=d.email,e.n=3,p.findOne({"local.email":y}).select("local ips").lean();case 3:if(null!==(b=e.v)){e.n=6;break}return k=d.email,w=d.email,e.n=4,p.findOne({username:k}).select("local").lean();case 4:return S=e.v,g(S),A=[l.randomBytes(8).toString("hex"),l.randomBytes(8).toString("hex")],x=[l.randomBytes(24).toString("hex"),l.randomBytes(24).toString("hex")],_=[l.createHash("sha256").update(x[0]).digest("hex"),l.createHash("sha256").update(x[1]).digest("hex")],O=t.headers["x-forwarded-for"]||t.socket.remoteAddress,j=new f.Types.ObjectId,T=Math.floor(39*Math.random())+1,e.n=5,Promise.all([p.create({_id:j,username:k,local:{emailVerified:!0,email:w},google:{email:w,id:a},balance:50,ips:[{address:O}],avatar:"/public/img/avatar/".concat(T,".webp")}),h.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1}},{upsert:!0}),m.create({seedClient:A[0],seedServer:x[0],hash:_[0],nonce:1,user:j,state:"active"}),m.create({seedClient:A[1],seedServer:x[1],hash:_[1],nonce:1,user:j,state:"created"})]);case 5:(P=e.v)[0]=P[0].toObject(),delete P[0].local.password,C=v(P[0]._id),console.log("signup success"),r.send("\n                    <script>\n                    window.opener.postMessage(\n                        ".concat(JSON.stringify({success:!0,token:C,user:b}),',\n                        "').concat(process.env.SERVER_FRONTEND_URL,'" // allowed origin\n                    );\n                    window.close();\n                    <\/script>\n                ')),e.n=8;break;case 6:return I=t.headers["x-forwarded-for"]||t.socket.remoteAddress,b.ips=b.ips||[],b.ips.unshift({address:I}),e.n=7,p.findByIdAndUpdate(b._id,{ips:b.ips.slice(0,25),updatedAt:(new Date).getTime()}).select("local.email local.emailVerified roblox.id discord.id username avatar rank fullrank balance xp vault stats rakeback fair anonymous mute ban verifiedAt updatedAt createdAt").lean();case 7:b=e.v,E=v(b._id),r.send("\n                    <script>\n                    window.opener.postMessage(\n                        ".concat(JSON.stringify({success:!0,token:E,user:b}),',\n                        "').concat(process.env.SERVER_FRONTEND_URL,'" // allowed origin\n                    );\n                    window.close();\n                    <\/script>\n                '));case 8:e.n=10;break;case 9:e.p=9,G=e.v,console.error((null===(D=G.response)||void 0===D?void 0:D.data)||G.message),r.status(500).json({success:!1,error:{message:G.message}}),r.send('\n              <script>\n                window.opener.postMessage(\n                  { success: false, message: "OAuth error" },\n                  "'.concat(process.env.SERVER_FRONTEND_URL,'"\n                );\n                window.close();\n              <\/script>\n            '));case 10:return e.a(2)}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),d}},8278:e=>{"use strict";e.exports=require("passport")},8340:e=>{"use strict";e.exports=require("qs")},8361:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(2725),u=r(286),d=r(7908).socketRemoveAntiSpam,l=r(4214).generalCheckSendRakebackClaimUser,f=function(){var e=i(n().m((function e(t,r,a,o,i){var s,u;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,c.find({type:"reward",state:"active"}).select("name amount levelMin type state");case 1:s=e.v,i({success:!0,boxes:s}),e.n=3;break;case 2:e.p=2,u=e.v,i({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),p=function(){var e=i(n().m((function e(t,r,a,o,i){var c,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,l(a),e.n=1,Promise.all([s.findByIdAndUpdate(a._id,{$inc:{balance:a.rakeback.available},"rakeback.available":0,updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt"),u.create({amount:a.rakeback.available,type:"rakebackClaim",user:a._id,state:"completed"})]);case 1:c=e.v,i({success:!0,user:c[0]}),d(a._id),e.n=3;break;case 2:e.p=2,f=e.v,d(r.decoded._id),i({success:!1,error:{type:"error",message:f.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={generalGetRakebackDataSocket:f,generalSendRakebackClaimSocket:p}},8455:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},color:{type:String},game:{type:n.Schema.ObjectId,ref:"RouletteGame"},user:{type:n.Schema.ObjectId,ref:"User",index:!0},stats:{balanceBefore:{type:Number,default:0}},btype:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RouletteBet",a)},8461:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return i(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(i(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,i(p,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,n,(function(){return this})),i(p,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:s,m}})()}function i(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){i(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},i(e,t,r,n)}function s(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){s(o,n,a,i,c,"next",e)}function c(e){s(o,n,a,i,c,"throw",e)}i(void 0)}))}}var u=r(8128),d=null,l=function(){var e=c(o().m((function e(){var t;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,u.findOne({}).select("general chat games robux limited steam crypto gift credit depositbonus redeem rainrestrict").lean();case 1:if(null!=(d=e.v)){e.n=3;break}return e.n=2,u.create({general:{"maintenance.enabled":!1,"rain.enabled":!1,"leaderboard.enabled":!1,"tip.enabled":!0,"affiliate.enabled":!0,"reward.multiplier":1},chat:{mode:"normal",enabled:!0,rooms:{"en.enabled":!0,"tr.enabled":!0,"de.enabled":!0,"es.enabled":!0,"beg.enabled":!0,"whale.enabled":!0}},games:{"crash.enabled":!0,"roll.enabled":!0,"blackjack.enabled":!0,"duels.enabled":!0,"mines.enabled":!0,"towers.enabled":!0,"unbox.enabled":!0,"battles.enabled":!0,"upgrader.enabled":!0,"plinko.enabled":!0,"roulette.enabled":!0,cases:[],"cbattles.enabled":!0,"cmbattles.enabled":!0,"ctotal.enabled":!0,"croulette.enabled":!0,"cblackjack.enabled":!0,"cblackjack.value":3,mcases:[],cmines:[],csmines:[],ctowers:[],mcmines:[],mctowers:[],crashees:[],slides:[]},robux:{"deposit.enabled":!1,"withdraw.enabled":!1},limited:{"deposit.enabled":!1,"withdraw.enabled":!1},steam:{"deposit.enabled":!1,"withdraw.enabled":!1},crypto:{"deposit.enabled":!0,"withdraw.enabled":!0},gift:{"deposit.enabled":!1,"withdraw.enabled":!1},credit:{"deposit.enabled":!1,"withdraw.enabled":!1},depositbonus:{enabled:!1,amount:0,famount:0},rainrestrict:{enabled:!1},redeem:{enabled:!1,amount:0}});case 2:d=(d=e.v).toObject();case 3:delete d._id,e.n=5;break;case 4:e.p=4,t=e.v,console.error("Error: ".concat(t.message)),process.exit(1);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}();e.exports={settingInitDatabase:l,settingCheck:function(e,t){},settingGet:function(){return d},settingSetValue:function(e,t){return new Promise(function(){var r=c(o().m((function r(n,i){return o().w((function(r){for(;;)switch(r.n){case 0:return r.n=1,u.findOneAndUpdate({},a({},e,t),{new:!0}).select("general chat games robux limited steam crypto gift credit depositbonus redeem rainrestrict").lean();case 1:delete(d=r.v)._id,n(d);case 2:return r.a(2)}}),r)})));return function(e,t){return r.apply(this,arguments)}}())},getMinimumValue:function(e){switch(e){case 5:return 47;case 10:return 44;case 15:return 41;case 20:return 39;case 25:return 37;case 30:return 34;case 35:return 32;case 40:return 29;case 45:return 26;case 50:return 24;case 55:return 21;case 60:return 19;case 65:return 16;case 70:return 13;case 75:return 11;case 80:return 9;case 85:return 7;case 90:return 4;case 95:return 3}},getMaximumValue:function(e){switch(e){case 5:return 53;case 10:return 55;case 15:return 57;case 20:return 60;case 25:return 63;case 30:return 65;case 35:return 68;case 40:return 70;case 45:return 72;case 50:return 75;case 55:return 77;case 60:return 80;case 65:return 82;case 70:return 84;case 75:return 87;case 80:return 90;case 85:return 93;case 90:return 95;case 95:return 98}},findPercent:function(e,t,r){for(var n=0,a=0;a<r.length;a++)e>=1e3*r[a].value&&t<1e3*r[a].remain&&(n=r[a].percent);return n},findCountPercent:function(e,t,r,n){for(var a=0,o=0;o<n.length;o++)e>=1e3*n[o].value&&t>=n[o].count&&r>=n[o].step&&(a=n[o].percent);return a},findTCountPercent:function(e,t,r,n){var a=0,o=0;"medium"===t&&(a=1),"hard"===t&&(a=2);for(var i=0;i<n.length;i++)e>=1e3*n[i].value&&a===n[i].count&&r>=n[i].step&&(o=n[i].percent);return o}}},8475:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(9591),c=r(2725),u=r(8921),d=r(7908).socketRemoveAntiSpam,l=r(4040),f=l.adminCheckGetBoxListData,p=l.adminCheckSendBoxCreateData,m=l.adminCheckSendBoxCreateItems,h=l.adminCheckSendBoxRemoveData,y=(l.adminCheckSendBoxRemoveBox,l.adminSaveImage),v=l.adminGetAmountBox,b=l.adminFormatItemSort,g=l.adminCheckSendBoxNameData,k=l.adminCheckSendBoxName,w=l.adminCheckSendItemAmountData,S=l.adminCheckSendBoxStateData,A=l.adminCheckSendBoxCategoriesData,x=l.adminCheckSendBoxImageData,_=l.adminCheckSendBoxItemsData,O=function(){var e=i(n().m((function e(t,r,a,o,i){var s,d,l,p;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,f(o),s=12*(o.page-1),d=b(o.sort),e.n=1,Promise.all([c.countDocuments({name:{$regex:o.search,$options:"i"}}),c.find({name:{$regex:o.search,$options:"i"}}).sort(d).limit(12).skip(s).select("name amount items slug categories state createdAt").lean(),u.find({}).select("name image amountFixed").lean()]);case 1:l=e.v,i({success:!0,count:l[0],boxes:l[1],items:l[2]}),e.n=3;break;case 2:e.p=2,p=e.v,i({success:!1,error:{type:"error",message:p.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),j=function(){var e=i(n().m((function e(t,r,a,o,i){var l,f,h,b,g;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,p(o),e.n=1,u.find({}).select("amountFixed").lean();case 1:return l=e.v,m(o,l),f=v(o,l),h=s(o.name,{lower:!0}),e.n=2,y(o.image,h);case 2:return e.n=3,c.create({name:o.name,slug:h,amount:f,items:o.items,categories:o.categories,type:"site",state:"active"});case 3:b=(b=e.v).toObject(),i({success:!0,box:b}),d(a._id),e.n=5;break;case 4:e.p=4,g=e.v,d(a._id),i({success:!1,error:{type:"error",message:g.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),T=function(){var e=i(n().m((function e(t,r,a,o,i){var s;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,h(o),e.n=1,c.findByIdAndDelete(o.boxId);case 1:boxDatabase=e.v,i({success:!0,box:boxDatabase}),d(a._id),e.n=3;break;case 2:e.p=2,s=e.v,d(a._id),i({success:!1,error:{type:"error",message:s.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),P=function(){var e=i(n().m((function e(t,r,a,o,i){var s,u,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,g(o),e.n=1,c.findById(o.boxId).select("name").lean();case 1:return s=e.v,k(s),u=o.name,e.n=2,Promise.all([c.findByIdAndUpdate(s._id,{name:u},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),d(a._id),e.n=4;break;case 3:e.p=3,f=e.v,d(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),C=function(){var e=i(n().m((function e(t,r,a,o,i){var s,u,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,w(o),e.n=1,c.findById(o.boxId).select("name").lean();case 1:return s=e.v,k(s),u=o.amount,e.n=2,Promise.all([c.findByIdAndUpdate(s._id,{amount:u},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),d(a._id),e.n=4;break;case 3:e.p=3,f=e.v,d(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),I=function(){var e=i(n().m((function e(t,r,a,o,i){var s,u,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,S(o),e.n=1,c.findById(o.boxId).select("name").lean();case 1:return s=e.v,k(s),u=o.state,e.n=2,Promise.all([c.findByIdAndUpdate(s._id,{state:u},{new:!0}).select("name amount slug items categories state createdAt").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),d(a._id),e.n=4;break;case 3:e.p=3,f=e.v,d(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),E=function(){var e=i(n().m((function e(t,r,a,o,i){var s,u,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,A(o),e.n=1,c.findById(o.boxId).select("name").lean();case 1:return s=e.v,k(s),u=o.categories,e.n=2,Promise.all([c.findByIdAndUpdate(s._id,{categories:u},{new:!0}).select("name amount items slug categories state createdAt").lean()]);case 2:l=e.v,i({success:!0,item:l[0]}),d(a._id),e.n=4;break;case 3:e.p=3,f=e.v,d(a._id),i({success:!1,error:{type:"error",message:f.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),D=function(){var e=i(n().m((function e(t,r,a,o,i){var s,u,l,f;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,x(o),e.n=1,c.findById(o.boxId).select("name slug").lean();case 1:return s=e.v,k(s),u=o.image,e.n=2,y(u,s.slug);case 2:return e.n=3,Promise.all([c.findById(s._id).select("name amount items slug categories state createdAt").lean()]);case 3:l=e.v,i({success:!0,item:l[0]}),d(a._id),e.n=5;break;case 4:e.p=4,f=e.v,d(a._id),i({success:!1,error:{type:"error",message:f.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),G=function(){var e=i(n().m((function e(t,r,a,o,i){var s,l,f,p,m;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,_(o),e.n=1,c.findById(o.boxId).select("name").lean();case 1:return s=e.v,k(s),l=o.items,e.n=2,u.find({}).select("amountFixed").lean();case 2:return f=e.v,e.n=3,Promise.all([c.findByIdAndUpdate(s._id,{items:l,amount:v(o,f)},{new:!0}).select("name amount items slug categories state createdAt").lean()]);case 3:p=e.v,i({success:!0,item:p[0]}),d(a._id),e.n=5;break;case 4:e.p=4,m=e.v,d(a._id),i({success:!1,error:{type:"error",message:m.message}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}();e.exports={adminGetBoxListSocket:O,adminSendBoxCreateSocket:j,adminSendBoxRemoveSocket:T,adminSendBoxNameSocket:P,adminSendBoxAmountSocket:C,adminSendBoxStateSocket:I,adminSendBoxCategorySocket:E,adminSendBoxImageSocket:D,adminSendBoxItemsSocket:G}},8481:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(829),c=r(2789),u=r(5734).rateLimiter,d=r(7908),l=d.socketCheckUserData,f=d.socketCheckConnectionLimit,p=d.socketAddConnectionLimit,m=d.socketRemoveConnectionLimit,h=d.socketCheckAntiSpam,y=d.socketRemoveAntiSpam,v=r(8461).settingCheck,b=r(4332),g=b.towersGetGame,k=b.towersSendBetSocket,w=b.towersSendRevealSocket,S=b.towersSendCashoutSocket,A=b.towersInit;e.exports=function(e){e.of("/socket/towers").use(function(){var e=i(n().m((function e(t,r){var a,o,i;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,f("towers",a);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=6;break}return e.p=2,e.n=3,s.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:o=e.v,t.decoded=o,void 0!==t.decoded&&null!==t.decoded&&void 0!==t.decoded._id&&t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("You need to sign in to perform this action.")));case 5:t.emit("init",{game:g(t.decoded)}),r(),e.n=7;break;case 6:r(new Error("You need to sign in to perform this action."));case 7:e.n=9;break;case 8:return e.p=8,i=e.v,e.a(2,r({success:!1,error:{type:"error",message:i.message}}));case 9:return e.a(2)}}),e,null,[[2,4],[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/towers").on("connection",(function(t){var r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress;p("towers",r),t.on("sendBet",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance xp stats limits affiliates anonymous btype mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s,"games.towers.enabled"),k(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendReveal",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance xp stats limits affiliates anonymous btype mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s),w(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashout",function(){var r=i(n().m((function r(a,o){var i,s,d,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,u.consume(i);case 3:return r.n=4,h(t.decoded._id);case 4:return r.p=4,r.n=5,c.findById(t.decoded._id).select("username avatar rank balance fbalance xp stats limits affiliates anonymous btype mute ban createdAt").lean();case 5:s=r.v,l(s,!0),v(s),S(e,t,s,a,o),r.n=7;break;case 6:r.p=6,d=r.v,y(t.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 7:r.n=9;break;case 8:r.p=8,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("disconnect",i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.n){case 0:r=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,m("towers",r);case 1:return e.a(2)}}),e)}))))})),A(e)}},8521:(e,t,r)=>{function n(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,a,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return o(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,a,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,o(p,"constructor",l),o(l,"constructor",d),d.displayName="GeneratorFunction",o(l,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,n,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:s,m}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},o(e,t,r,n)}function i(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,c,"next",e)}function c(e){i(o,n,a,s,c,"throw",e)}s(void 0)}))}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=r(7906),l=r(4229),f=r(3688),p=[];e.exports={cashierCheckGetRobuxData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.type||null===e.type||"string"!=typeof e.type||!0!==["deposit","withdraw"].includes(e.type))throw new Error("Your entered type is invalid.")},cashierCheckGetRobuxDataRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxDepositData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided deposit amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROBUX_MIN_AMOUNT))throw new Error("You can only deposit a minmum amount of DL".concat(parseFloat(process.env.ROBUX_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),"."))},cashierCheckSendRobuxDepositRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxDepositUser:function(e,t,r){if(e.amount+t>Math.floor(1e3*r))throw new Error("You don’t have enough robux for this action.")},cashierCheckSendRobuxWithdrawData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided withdraw amount is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.ROBUX_MIN_AMOUNT))throw new Error("You can only withdraw a minmum amount of R$".concat(parseFloat(process.env.ROBUX_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),"."))},cashierCheckSendRobuxWithdrawRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxWithdrawUser:function(e,t){if(e.balance<Math.floor(t.amount))throw new Error("You don’t have enough balance for this action.");if(e.limits.betToWithdraw>=10)throw new Error("You need to wager ".concat(parseFloat(Math.floor(e.limits.betToWithdraw/10)/100).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," more before you can withdraw."));if(!0===e.limits.blockSponsor)throw new Error("You aren't allowed to withdraw at the moment.")},cashierCheckSendRobuxCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.offerId||"string"!=typeof e.offerId||!0!==d.isMongoId(e.offerId))throw new Error("Your provided offer id is invalid.")},cashierCheckSendRobuxCancelRoblox:function(e){if(void 0===e.roblox)throw new Error("You need to link your roblox account.")},cashierCheckSendRobuxCancelOffer:function(e,t){if(null===e)throw new Error("Your requested offer isn't available.");if("created"!==e.state||!0===t.includes(e._id.toString()))throw new Error("You aren't allowed to cancel this offer at the moment.")},cashierRobuxGetBlockOffer:function(){return p},cashierRobuxAddBlockOffer:function(e){p.push(e)},cashierRobuxRemoveBlockOffer:function(e){p.splice(p.indexOf(e),1)},cashierRobuxSortOffers:function(e){var t,r={},n=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=c(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=new Date(a.createdAt),i="".concat(o.getFullYear(),"-").concat(o.getMonth(),"-").concat(o.getDate(),"-").concat(o.getHours());void 0===r[i]?r[i]=[a]:r[i].push(a)}}catch(e){n.e(e)}finally{n.f()}for(var s in r)r[s].sort((function(e,t){return t.amount-e.amount}));return Object.values(r).flat()},cashierGetUserRobux:function(e,t){return new Promise(function(){var r=s(a().m((function r(n,o){var i,s,c,u;return a().w((function(r){for(;;)switch(r.n){case 0:return r.p=0,i=new f(e),s={cookie:".ROBLOSECURITY=".concat(t)},r.n=1,l("https://economy.roblox.com/v1/user/currency",{agent:i,headers:s});case 1:if(200!==(c=r.v).status){r.n=3;break}return r.n=2,c.json();case 2:c=r.v,n(c.robux),r.n=4;break;case 3:401===c.status?o({relogin:!0}):o(new Error("ERROR: ".concat(c.statusText)));case 4:r.n=6;break;case 5:r.p=5,u=r.v,o(u);case 6:return r.a(2)}}),r,null,[[0,5]])})));return function(e,t){return r.apply(this,arguments)}}())},cashierRobuxGetGameId:function(e,t,r){return new Promise(function(){var n=s(a().m((function n(o,i){var s,c,u,d;return a().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,s=new f(e),c={cookie:".ROBLOSECURITY=".concat(t)},n.n=1,l("https://apis.roblox.com/universes/v1/search?CreatorType=User&CreatorTargetId=".concat(r,"&IsArchived=false&PageSize=10&SortParam=GameCreated&SortOrder=Desc"),{agent:s,headers:c});case 1:if(200!==(u=n.v).status){n.n=3;break}return n.n=2,u.json();case 2:u=n.v,o(u.data[0].id),n.n=4;break;case 3:401===u.status?i({relogin:!0}):i(new Error("ERROR: ".concat(u.statusText)));case 4:n.n=6;break;case 5:n.p=5,d=n.v,i(d);case 6:return n.a(2)}}),n,null,[[0,5]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxGetProducts:function(e,t,r){return new Promise(function(){var o=s(a().m((function o(i,s){var c,u,d,p,m,h;return a().w((function(a){for(;;)switch(a.n){case 0:a.p=0,c=new f(e),u={cookie:".ROBLOSECURITY=".concat(t)},d=[],p=1;case 1:return a.n=2,l("https://apis.roblox.com/developer-products/v1/universes/".concat(r,"/developerproducts?pageNumber=").concat(p,"&pageSize=250"),{agent:c,headers:u});case 2:if(200!==(m=a.v).status){a.n=6;break}return a.n=3,m.json();case 3:if(m=a.v,d=[].concat(n(d),n(m)),!(m.length>=250)){a.n=4;break}p+=1,a.n=5;break;case 4:return a.a(3,9);case 5:a.n=8;break;case 6:if(401!==m.status){a.n=7;break}return s({relogin:!0}),a.a(3,9);case 7:return s(new Error("ERROR: ".concat(m.statusText))),a.a(3,9);case 8:a.n=1;break;case 9:i(d),a.n=11;break;case 10:a.p=10,h=a.v,s(h);case 11:return a.a(2)}}),o,null,[[0,10]])})));return function(e,t){return o.apply(this,arguments)}}())},cashierRobuxGetProduct:function(e,t,r){return new Promise(function(){var n=s(a().m((function n(o,i){var s,c,u,d;return a().w((function(n){for(;;)switch(n.n){case 0:return n.p=0,s=new f(e),c={cookie:".ROBLOSECURITY=".concat(t)},n.n=1,l("https://apis.roblox.com/developer-products/v1/developer-products/".concat(r),{agent:s,headers:c});case 1:if(200!==(u=n.v).status){n.n=3;break}return n.n=2,u.json();case 2:u=n.v,console.log("Scond Get prodct: ",u),o(u),n.n=4;break;case 3:401===u.status?i({relogin:!0}):i(new Error("ERROR: ".concat(u.statusText)));case 4:n.n=6;break;case 5:n.p=5,d=n.v,i(d);case 6:return n.a(2)}}),n,null,[[0,5]])})));return function(e,t){return n.apply(this,arguments)}}())},cashierRobuxCreateProduct:function(e,t,r,n,o,i){return new Promise(function(){var c=s(a().m((function s(c,u){var d,p,m,h;return a().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,d=new f(t),p={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},a.n=1,l("https://apis.roblox.com/developer-products/v1/universes/".concat(n,"/developerproducts?name=").concat(o,"&description=&priceInRobux=").concat(i),{method:"POST",agent:d,headers:p});case 1:if(200!==(m=a.v).status){a.n=3;break}return a.n=2,m.json();case 2:m=a.v,c(m),a.n=4;break;case 3:401===m.status?u({relogin:!0}):u(new Error("ERROR: ".concat(m.statusText)));case 4:a.n=6;break;case 5:a.p=5,h=a.v,u(h);case 6:return a.a(2)}}),s,null,[[0,5]])})));return function(e,t){return c.apply(this,arguments)}}())},cashierRobuxUpdateProduct:function(e,t,r,n,o,i,c){return new Promise(function(){var u=s(a().m((function s(u,d){var p,m,h,y,v;return a().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,p=new f(t),m={"content-type":"application/json-patch+json","x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},h={Name:i,PriceInRobux:c},a.n=1,l("https://apis.roblox.com/developer-products/v1/universes/".concat(n,"/developerproducts/").concat(o,"/update"),{method:"POST",agent:p,headers:m,body:JSON.stringify(h)});case 1:if(200!==(y=a.v).status){a.n=3;break}return a.n=2,y.json();case 2:y=a.v,u(y),a.n=4;break;case 3:d(new Error(y.statusText));case 4:a.n=6;break;case 5:a.p=5,v=a.v,d(v);case 6:return a.a(2)}}),s,null,[[0,5]])})));return function(e,t){return u.apply(this,arguments)}}())},cashierRobuxPurchaseProduct:function(e,t,r,n,o,i){return new Promise(function(){var c=s(a().m((function s(c,u){var d,p,m,h,y;return a().w((function(a){for(;;)switch(a.n){case 0:return a.p=0,d=new f(t),p={"x-csrf-token":e,cookie:".ROBLOSECURITY=".concat(r)},m={expectedCurrency:1,expectedPrice:o,expectedSellerId:i},a.n=1,l("https://economy.roblox.com/v1/purchases/products/".concat(n),{method:"POST",agent:d,headers:p,body:JSON.stringify(m)});case 1:if(!(h=a.v).ok){a.n=3;break}return a.n=2,h.json();case 2:!0===(h=a.v).purchased?c():u(new Error("".concat(h.title,": ").concat(h.errorMsg))),a.n=4;break;case 3:u(new Error(h.statusText));case 4:a.n=6;break;case 5:a.p=5,y=a.v,u(y);case 6:return a.a(2)}}),s,null,[[0,5]])})));return function(e,t){return c.apply(this,arguments)}}())}}},8577:e=>{"use strict";e.exports=require("cors")},8610:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetLeaderboardListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||null===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||null===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendLeaderboardCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.type||null===e.type||"string"!=typeof e.type||""===e.type.trim()||!0!==["wager","deposit","balance"].includes(e.type))throw new Error("Your entered type is invalid.");if(void 0===e.duration||null===e.duration||!0===isNaN(e.duration)||Math.floor(e.duration)<=0||Math.floor(e.duration)>30)throw new Error("Your entered duration is invalid.");if(void 0===e.prizes||!0!==Array.isArray(e.prizes)||e.prizes.length<=0)throw new Error("Your entered prizes are invalid.")},adminCheckSendLeaderboardStopData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.leaderboardId||null===e.leaderboardId||"string"!=typeof e.leaderboardId||!0!==n.isMongoId(e.leaderboardId))throw new Error("Your entered leaderboard id is invalid.")},adminCheckSendLeaderboardStopLeaderboard:function(e){if(null===e)throw new Error("Your entered leaderboard was not found.");if("canceled"===e.state||"completed"===e.state)throw new Error("Your entered leaderboard is already canceled or completed.")}}},8629:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckUserFullRank),f=u.socketCheckAntiSpam,p=u.socketRemoveAntiSpam,m=r(538),h=m.adminSendSettingValueSocket,y=m.adminSendALeaderboardValueSocket,v=m.adminGetLeaderboardCreatorsSocket,b=m.adminSendDLeaderboardValueSocket,g=m.adminSendSLeaderboardValueSocket;e.exports=function(e,t){t.on("sendSettingValue",function(){var r=i(n().m((function r(a,o){var i,u,m,y;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),h(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,y=r.v,o({success:!1,error:{type:"error",message:void 0!==y.message?y.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLeaderboardAffiliators",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendStopLeaderboardAffiliators",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),g(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendDeleteLeaderboardAffiliators",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getLeaderboardCreators",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},8702:(e,t,r)=>{var n=r(6037),a=new n.Schema({amount:{type:Number},payout:{type:Number},multiplier:{type:Number},minesCount:{type:Number},deck:[{type:String}],revealed:[{tile:{type:Number},value:{type:String}}],fair:{seed:{type:n.Schema.ObjectId,ref:"UserSeed"},nonce:{type:Number}},user:{type:n.Schema.ObjectId,ref:"User"},state:{type:String},btype:{type:Number},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("MinesGame",a)},8725:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckUserFullRank),f=u.socketCheckAntiSpam,p=u.socketRemoveAntiSpam,m=r(6088),h=m.adminGetRainListSocket,y=m.adminSendRainAmountSocket;e.exports=function(e,t){t.on("getRainList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["fulladmin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendRainAmount",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},8744:(e,t,r)=>{var n=r(6037),a=new n.Schema({winners:[{prize:{type:Number},points:{type:Number},user:{type:n.Schema.ObjectId,ref:"User"}}],duration:{type:Number},type:{type:String},state:{type:String},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("Leaderboard",a)},8747:e=>{e.exports={upgraderCheckGetItemsDataData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your provided page is invalid.");if(void 0===e.search||"string"!=typeof e.search)throw new Error("Your provided keyword is invalid.");if(void 0===e.select||"string"!=typeof e.select||!1===["all","0 - 1","1 - 5","5 - 25","25 - 100","+100"].includes(e.select))throw new Error("Your provided select value is invalid.");if(void 0===e.sort||"string"!=typeof e.sort||!1===["descending","ascending"].includes(e.sort))throw new Error("Your provided sort value is invalid.")},upgraderCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your provided bet amount is invalid.");if(void 0===e.amountPayout||!0===isNaN(e.amountPayout)||Math.floor(e.amountPayout)<=0)throw new Error("Your provided bet payout amount is invalid.");if(void 0===e.mode||"string"!=typeof e.mode||"under"!==e.mode&&"over"!==e.mode)throw new Error("Your provided mode is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.UPGRADER_MIN_AMOUNT))throw new Error("You can only bet a min amount of $".concat(parseFloat(process.env.UPGRADER_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.UPGRADER_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.UPGRADER_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."))},upgraderCheckSendCreateUser:function(e,t){if(0===t.btype){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")}else{if(1!==t.btype)throw new Error("You don’t have selected the correct coin type");if(t.fbalance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")}},upgraderCheckSendCreateSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},upgraderCheckSendCreateMultiplier:function(e){if(e<=100)throw new Error("Your provided bet multiplier is too low.")},upgraderSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return delete t.fair,t},upgraderFormatItemSelect:function(e){var t={amount:{$gt:0}};return"0 - 1"===e?t={amount:{$gt:0,$lte:1e3}}:"1 - 5"===e?t={amount:{$gt:1e3,$lte:5e3}}:"5 - 25"===e?t={amount:{$gt:5e3,$lte:25e3}}:"25 - 100"===e?t={amount:{$gt:25e3,$lte:1e5}}:"+100"===e&&(t={amount:{$gt:1e5}}),t}}},8749:e=>{"use strict";e.exports=require("crypto")},8781:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckAntiSpam),f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(2396),h=m.generalGetUserInfoSocket,y=m.generalGetUserBetsSocket,v=m.generalGetUserTransactionsSocket,b=m.generalGetUserSeedSocket,g=m.generalSendUserAnonymousSocket,k=m.generalSendUserDiscordSocket,w=m.generalSendUserClientSeedSocket,S=m.generalSendUserServerSeedSocket,A=m.generalSendUserTipSocket,x=m.generalSendUserBalanceModeSocket;e.exports=function(e,t){t.on("getUserInfo",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 3:u=r.v;case 4:d(u,!0),p(u),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserBets",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 3:u=r.v;case 4:d(u,!0),p(u),y(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserTransactions",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 3:u=r.v;case 4:d(u,!0),p(u),v(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("getUserSeed",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank agreed mute ban").lean();case 3:u=r.v;case 4:d(u,!0),p(u),b(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserAnonymous",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),p(u),g(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserBalanceMode",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute btype ban").lean();case 5:u=r.v,d(u,!0),p(u),x(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserDiscord",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("discordId username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),p(u),k(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserClientSeed",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),p(u),w(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserServerSeed",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),p(u),S(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendUserTip",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank balance stats limits mute ban").lean();case 5:u=r.v,d(u,!0),p(u,"general.tip.enabled"),A(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},8796:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var i=r(6037),s=(r(2789),r(5958)),c=(r(3304),r(7908).socketRemoveAntiSpam),u=r(6919),d=u.cashierCheckSendSteamDepositData,l=u.cashierSteamCreateTransaction,f=function(){var e,t=(e=n().m((function e(t,r,a,o,u){var f,p,m,h,y;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,d(o),e.n=1,s.findOne({type:"deposit",user:a._id,state:"created",createdAt:{$gte:(new Date).getTime()-6e4}}).select("data type user state createdAt").lean();case 1:if(null!==(f=e.v)){e.n=4;break}return p=new i.Types.ObjectId,m={deposit_id:p,result_url:"".concat(process.env.SERVER_BACKEND_URL,"/callback/skinify"),priority_game:o.game},e.n=2,l(m);case 2:return h=e.v,e.n=3,s.create({_id:p,data:{providerId:h.transaction_id,providerUrl:h.url},type:"deposit",user:a._id,state:"created"});case 3:f=(f=e.v).toObject();case 4:u({success:!0,transaction:f}),c(a._id),e.n=6;break;case 5:e.p=5,y=e.v,c(r.decoded._id),u({success:!1,error:{type:"error",message:y.message}});case 6:return e.a(2)}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,r,n,a,o){return t.apply(this,arguments)}}();e.exports={cashierSendSteamDepositSocket:f}},8858:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return c(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,c(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,c(p,"constructor",l),c(l,"constructor",d),d.displayName="GeneratorFunction",c(l,a,"GeneratorFunction"),c(p),c(p,a,"Generator"),c(p,n,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},c(e,t,r,n)}function u(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)}))}}var l=r(829),f=r(8749),p=r(1024),m=r(2789),h=r(5632),y=r(5241),v=r(3304),b=r(8744),g=r(8875),k=r(5734).rateLimiter,w=r(7908),S=w.socketCheckUserData,A=w.socketCheckConnectionLimit,x=w.socketAddConnectionLimit,_=w.socketRemoveConnectionLimit,O=w.socketCheckAntiSpam,j=w.socketRemoveAntiSpam,T=r(8461).settingCheck,P=r(9580),C=P.plinkoCheckSendCreateData,I=P.plinkoCheckSendCreateUser,E=P.plinkoCheckSendCreateSeed,D=P.plinkoGenerateDeck,G=P.plinkoGetPayoutAmount,M=r(836),R=M.generalUserGetRakeback,B=M.generalUserGetFormated,U=r(5507).generalAddBetsList;e.exports=function(e){e.of("/socket/plinko").use(function(){var e=d(s().m((function e(t,r){var n,a;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,n=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,e.n=1,A("plinko",n);case 1:if(void 0===t.handshake.auth||void 0===t.handshake.auth.token){e.n=6;break}return e.p=2,e.n=3,l.verify(t.handshake.auth.token,process.env.TOKEN_SECRET);case 3:a=e.v,t.decoded=a,t.join(t.decoded._id.toString()),e.n=5;break;case 4:return e.p=4,e.v,e.a(2,r(new Error("Please sign in to perform this action.")));case 5:r(),e.n=7;break;case 6:r(new Error("Please sign in to perform this action."));case 7:e.n=9;break;case 8:return e.p=8,e.v,e.a(2,r(new Error("Something went wrong! Please try again in a few seconds.")));case 9:return e.a(2)}}),e,null,[[2,4],[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),e.of("/socket/plinko").on("connection",(function(e){var r=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress;x("plinko",r),e.on("sendCreate",function(){var r=d(s().m((function r(n,a){var o,i,c,u;return s().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==a&&"function"==typeof a){r.n=1;break}return r.a(2);case 1:if(void 0===e.decoded||null===e.decoded){r.n=10;break}return r.p=2,o=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress,r.n=3,k.consume(o);case 3:return r.n=4,O(e.decoded._id);case 4:return r.p=4,r.n=5,m.findById(e.decoded._id).select("rank balance fbalance btype stats limits fair agreed affiliates mute ban").lean();case 5:i=r.v,S(i,!0,!0),T(i,"games.plinko.enabled"),t(e,i,n,a),r.n=7;break;case 6:r.p=6,c=r.v,j(e.decoded._id),a({success:!1,error:{type:"error",message:c.message}});case 7:r.n=9;break;case 8:r.p=8,u=r.v,a({success:!1,error:{type:"error",message:void 0!==u.message?u.message:"Please slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:a({success:!1,error:{type:"error",message:"Please sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),e.on("disconnect",(function(){var t=e.handshake.headers["x-forwarded-for"]||e.conn.remoteAddress;_("plinko",t)}))}));var t=function(){var t=d(s().m((function t(r,n,a,i){var c,u,d,l,k,w,S,A,x,_,O,T,P,M,Y,N,F,L,$;return s().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,C(a),I(a,n),t.n=1,h.findOne({user:n._id,state:"created"}).select("seedClient seedServer nonce user state");case 1:return c=t.v,E(c),u=Math.floor(a.amount),d=Math.floor(a.rows),l=R(n),k=!0!==n.limits.blockSponsor?Math.floor(u*l.percentage):0,w=D(d+1),S="".concat(c.seedServer,"-").concat(c.nonce,"-").concat(c.seedClient),A=f.createHash("sha256").update(S).digest("hex"),x=new p(A),_=x.integer({min:1,max:w.reduce((function(e,t){return e+t}),0)}),O=G(u,w,a.risk,_),T=Math.floor(Math.floor(O)/u*100),P=[],t.n=2,b.findOne({state:"running"}).select("state").lean();case 2:return M=t.v,t.n=3,g.find({enabled:"true"}).select("creators").lean();case 3:return Y=t.v,N=Y.some((function(e){var t;return e.creators.includes(null===(t=n.affiliates)||void 0===t||null===(t=t.referrer)||void 0===t?void 0:t.toString())})),F=0===n.btype?{balance:Math.floor(O-u),xp:!0!==n.limits.blockSponsor?u*process.env.XP_RATE*.5:0,"stats.bet":.5*u,"stats.won":O,"leaderboard.points":null!==M&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?.5*u:0,"affiliates.leaderboardpoints":N&&!0!==n.limits.blockSponsor&&!0!==n.limits.blockLeaderboard?.5*u:0,"limits.betToWithdraw":Math.floor(n.limits.betToWithdraw-u)<=0?-n.limits.betToWithdraw:-u,"limits.betToRain":Math.floor(n.limits.betToRain-u)<=0?-n.limits.betToRain:-u,"rakeback.earned":k,"rakeback.available":k}:{fbalance:Math.floor(O-u)},P=[m.findByIdAndUpdate(n._id,{$inc:F,updatedAt:(new Date).getTime()},{new:!0}).select("balance fbalance btype xp stats rakeback mute ban updatedAt").lean(),h.findByIdAndUpdate(c._id,{$inc:{nonce:1}},{}),y.create({amount:u,payout:O,multiplier:T,rows:d,risk:a.risk,ticket:_,btype:n.btype,fair:{seed:c._id,nonce:c.nonce,clientSeed:c.seedClient},user:n._id,stats:{balanceBefore:n.balance},state:"completed"})],"admin"!==n.rank&&0===n.btype&&P.push(v.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.bet":u,"stats.total.won":O,"stats.plinko.bet":u,"stats.plinko.won":O}},{upsert:!0})),t.n=4,Promise.all(P);case 4:return L=t.v,t.n=5,L[2].populate({path:"user",select:"username xp stats avatar rank anonymous"});case 5:L[2]=t.v,L[2]=L[2].toObject(),L[2].method="plinko",L[2].fair=void 0,setTimeout((function(){e.of("/socket/general").to(n._id.toString()).emit("user",{user:L[0]}),e.of("/socket/general").emit("bet",{bet:o(o({},L[2]),{},{user:B(L[2].user)})}),U(e,o(o({},L[2]),{},{user:B(L[2].user),method:"plinko"}))}),500*L[2].rows),i({success:!0,game:L[2]}),j(n._id),t.n=7;break;case 6:t.p=6,$=t.v,j(n._id),i({success:!1,error:{type:"error",message:$.message}});case 7:return t.a(2)}}),t,null,[[0,6]])})));return function(e,r,n,a){return t.apply(this,arguments)}}()}},8875:(e,t,r)=>{var n=r(6037),a=new n.Schema({creators:{type:String},enabled:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("leaderboardCreator",a)},8900:e=>{"use strict";e.exports=require("hpp")},8921:(e,t,r)=>{var n=r(6037),a=new n.Schema({assetId:{type:String},name:{type:String},title:{type:String},image:{type:String},amount:{type:Number},amountFixed:{type:Number},accepted:{type:Boolean},updatedAt:{type:Date,default:Date.now},createdAt:{type:Date,default:Date.now}});e.exports=n.model("LimitedItem",a)},8938:e=>{"use strict";e.exports=require("axios")},9109:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckAntiSpam,f=u.socketRemoveAntiSpam,p=r(8461).settingCheck,m=r(4330),h=m.cashierGetLimitedDataSocket,y=m.cashierSendLimitedEnableSocket,v=m.cashierSendLimitedVerifySocket,b=m.cashierSendLimitedDepositSocket,g=m.cashierSendLimitedWithdrawSocket;e.exports=function(e,t){t.on("getLimitedData",function(){var r=i(n().m((function r(a,o){var i,u,l,f;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("roblox.id username avatar rank proxy mute ban");case 3:u=r.v;case 4:d(u,!0),p(u),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,l=r.v,o({success:!1,error:{type:"error",message:l.message}});case 6:r.n=8;break;case 7:r.p=7,f=r.v,o({success:!1,error:{type:"error",message:void 0!==f.message?f.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedEnable",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban").lean();case 5:u=r.v,d(u,!0),p(u),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedVerify",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban").lean();case 5:u=r.v,d(u,!0),p(u),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedDeposit",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank proxy mute ban verifiedAt").lean();case 5:u=r.v,d(u,!0),p(u,"limited.deposit.enabled"),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendLimitedWithdraw",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,l(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("roblox username avatar rank balance limits proxy mute ban verifiedAt").lean();case 5:u=r.v,d(u,!0),p(u,"limited.withdraw.enabled"),g(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,f(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},9381:(e,t,r)=>{function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return c(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,c(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,c(p,"constructor",l),c(l,"constructor",d),d.displayName="GeneratorFunction",c(l,a,"GeneratorFunction"),c(p),c(p,a,"Generator"),c(p,n,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},c(e,t,r,n)}function u(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)}))}}r(6037);var l=r(2789),f=r(6112),p=r(3844),m=r(5958),h=r(6232),y=r(4823),v=r(6930),b=r(6363),g=r(286),k=r(7908).socketRemoveAntiSpam,w=r(8461).settingGet,S=r(7587),A=S.captchaCheckData,x=S.captchaGetData,_=r(3602),O=_.generalCheckSendRainCreateData,j=_.generalCheckSendRainCreateRain,T=_.generalCheckSendRainCreateUser,P=_.generalCheckSendRainTipData,C=_.generalCheckSendRainTipRain,I=_.generalCheckSendRainTipUser,E=_.generalCheckSendRainJoinData,D=_.generalCheckSendRainJoinRain,G=_.generalCheckSendRainJoinUser,M=_.generalCheckSendRainJoinTransactions,R=r(836).generalUserGetFormated,B=r(7089).generalChatAddMessage,U=[],Y=function(){var e=d(s().m((function e(t,r,n,a,o){var i,c,u,d,p;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,O(a),e.n=1,f.findOne({type:"user",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state createdAt").lean();case 1:return i=e.v,j(i,U),e.p=2,U.push(n._id.toString()),T(a,n),c=Math.floor(a.amount),e.n=3,Promise.all([l.findByIdAndUpdate(n._id,{$inc:{balance:-c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.create({amount:c,creator:n._id,type:"user",state:"created"}),g.create({amount:-c,type:"rainCreate",user:n._id,state:"completed"})]);case 3:(u=e.v)[1]=u[1].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:u[0]}),L(t,u[1]),o({success:!0}),U.splice(U.indexOf(n._id.toString()),1),k(n._id),e.n=5;break;case 4:e.p=4,d=e.v,U.splice(U.indexOf(n._id.toString()),1),k(r.decoded._id),o({success:!1,error:{type:"error",message:d.message}});case 5:e.n=7;break;case 6:e.p=6,p=e.v,k(r.decoded._id),o({success:!1,error:{type:"error",message:p.message}});case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),N=function(){var e=d(s().m((function e(t,r,n,a,o){var i,c,u,d,p;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,P(a),e.n=1,f.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("type state").lean();case 1:return i=e.v,C(i),I(a,n),c=Math.floor(a.amount),e.n=2,Promise.all([l.findByIdAndUpdate(n._id,{$inc:{balance:-c},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.findByIdAndUpdate(i._id,{$inc:{amount:c}},{new:!0}).select("amount participants type state updatedAt").lean(),g.create({amount:-c,type:"rainTip",user:n._id,state:"completed"})]);case 2:(u=e.v)[2]=u[2].toObject(),u[2].user={_id:n._id,username:n.username},t.of("/socket/general").to(n._id.toString()).emit("user",{user:u[0]}),t.of("/socket/general").emit("rain",{rain:u[1]}),d={transaction:u[2],type:"rainTip"},B(t,d),o({success:!0}),k(n._id),e.n=4;break;case 3:e.p=3,p=e.v,k(r.decoded._id),o({success:!1,error:{type:"error",message:p.message}});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),F=function(){var e=d(s().m((function e(t,r,n,o,i){var c,u,d,l,g;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,E(o),e.n=1,x(o.captcha);case 1:return c=e.v,A(c),e.n=2,Promise.all([f.findOne({state:"running"}).select("participants type state updatedAt").lean(),f.find({"participants.user":n._id,state:"completed",updatedAt:{$gte:new Date((new Date).getTime()-864e5)}}).select("participants type state updatedAt").lean()]);case 2:if(u=e.v,d=w(),D(n,u[0],d),G(n,u[0],u[1]),"site"!==u[0].type){e.n=4;break}return e.n=3,Promise.all([p.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),h.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),m.find({"deposit.user":n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount deposit state createdAt").lean(),y.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean(),v.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean(),b.find({type:"deposit",user:n._id,state:"completed",createdAt:{$gte:(new Date).getTime()-6048e5}}).select("amount type user state createdAt").lean()]);case 3:l=e.v,M([].concat(a(l[0]),a(l[1]),a(l[2]),a(l[3]),a(l[4]),a(l[5])));case 4:return e.n=5,f.findByIdAndUpdate(u[0]._id,{$push:{participants:{user:n._id}}},{new:!0}).select("amount participants creator type state updatedAt").populate({path:"creator",select:"username"}).lean();case 5:u[0]=e.v,t.of("/socket/general").emit("rain",{rain:u[0]}),i({success:!0}),k(n._id),e.n=7;break;case 6:e.p=6,g=e.v,k(r.decoded._id),i({success:!1,error:{type:"error",message:g.message}});case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),L=function(){var e=d(s().m((function e(t,r){var n,a,o;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,f.findOne({state:"running"}).select("state updatedAt").lean();case 1:if(null===(n=e.v)){e.n=3;break}return a=new Date(n.updatedAt).getTime()+1e3+12e4-(new Date).getTime(),e.n=2,f.findByIdAndUpdate(r._id,{state:"pending",updatedAt:(new Date).getTime()},{new:!0}).select("amount participants creator type state updatedAt").lean();case 2:n=e.v,setTimeout((function(){L(t,n)}),a),e.n=5;break;case 3:return e.n=4,f.findByIdAndUpdate(r._id,{state:"running",updatedAt:(new Date).getTime()},{new:!0}).select("amount participants creator type state updatedAt").populate({path:"creator",select:"username avatar rank stats anonymous createdAt"}).lean();case 4:"user"===(n=e.v).type&&(n.creator=R(n.creator)),setTimeout((function(){$(t,n)}),12e4);case 5:t.of("/socket/general").emit("rain",{rain:n}),e.n=7;break;case 6:e.p=6,o=e.v,console.error(o);case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),$=function(){var e=d(s().m((function e(t,r){var a,o,i,c,u,d,p,m,h,y,v,b,k,S,A,x,_,O,j,T,P,C;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,f.findById(r._id).select("amount participants creator type state updatedAt").populate({path:"participants",populate:{path:"user",select:"balance xp stats rakeback ips mute ban"}}).lean();case 1:if(a=e.v,o=w(),i=[],c=[],u=[],d=Math.floor(5*Math.random())+3,a.participants.length>0){p=a.participants.reduce((function(e,t){return e+t.user.xp}),0),m=p/a.participants.length,p+=m*d,h=n(a.participants);try{for(h.s();!(y=h.n()).done;)v=y.value,b=Math.floor(a.amount*v.user.xp/p),!0!==i.includes(v.user.ips[0].address)&&!1===isNaN(b)&&b>=10&&(i.push(v.user.ips[0].address),c.push(l.findByIdAndUpdate(v.user._id,{$inc:{balance:b,"limits.betToWithdraw":b,"limits.betToRain":b},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),u.push(g.create({amount:b,type:"rainPayout",user:v.user._id,state:"completed"})))}catch(e){h.e(e)}finally{h.f()}}return k=o.rainrestrict.enabled?d+a.participants.length:a.participants.length,0===a.participants.length&&o.rainrestrict.enabled,e.n=2,Promise.all([f.findByIdAndUpdate(a._id,{state:"completed",totalUsers:k,updatedAt:(new Date).getTime()},{new:!0}).select("amount participants state totalUsers updatedAt").lean()].concat(c,u));case 2:S=e.v,A=n(S.slice(1,c.length+1));try{for(A.s();!(x=A.n()).done;)_=x.value,t.of("/socket/general").to(_._id.toString()).emit("user",{user:_})}catch(e){A.e(e)}finally{A.f()}O=n(S.slice(c.length+1));try{for(O.s();!(j=O.n()).done;)T=j.value,t.of("/socket/general").to(T.user._id.toString()).emit("rainPayout",{transaction:T})}catch(e){O.e(e)}finally{O.f()}if(P={rain:S[0],type:"rainCompleted"},B(t,P),"site"!==r.type){e.n=4;break}return e.n=3,f.create({amount:2500,type:"site",state:"created"});case 3:a=(a=e.v).toObject(),t.of("/socket/general").emit("rain",{rain:a}),setTimeout((function(){L(t,a)}),168e4);case 4:e.n=6;break;case 5:e.p=5,C=e.v,console.error(C);case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=d(s().m((function e(t){var r,a,o,i,c,u,d;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,f.find({$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("participants type state createdAt").populate({path:"participants",populate:{path:"user",select:"balance stats"}}).lean();case 1:r=e.v,a=n(r),e.p=2,a.s();case 3:if((o=a.n()).done){e.n=5;break}return i=o.value,e.n=4,f.findByIdAndUpdate(i._id,{state:"canceled",updatedAt:(new Date).getTime()},{});case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,u=e.v,a.e(u);case 7:return e.p=7,a.f(),e.f(7);case 8:return e.n=9,f.create({amount:2500,type:"site",state:"created"});case 9:c=(c=e.v).toObject(),setTimeout((function(){L(t,c)}),168e4),e.n=11;break;case 10:e.p=10,d=e.v,console.error(d);case 11:return e.a(2)}}),e,null,[[2,6,7,8],[0,10]])})));return function(t){return e.apply(this,arguments)}}();e.exports={generalGetRains:function(){return new Promise(function(){var e=d(s().m((function e(t,r){var n,a;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([f.findOne({type:"site",$or:[{state:"created"},{state:"pending"},{state:"running"}]}).select("amount participants type state totalUsers updatedAt").lean(),f.findOne({state:"running"}).select("amount participants totalUsers creator type state updatedAt").populate({path:"creator",select:"username avatar rank xp stats anonymous createdAt"}).lean()]);case 1:null!==(n=e.v)[1]&&"user"===n[1].type&&(n[1].creator=R(n[1].creator)),t({site:n[0],active:n[1]}),e.n=3;break;case 2:e.p=2,a=e.v,r(a);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r){return e.apply(this,arguments)}}())},generalSendRainCreateSocket:Y,generalSendRainTipSocket:N,generalSendRainJoinSocket:F,generalRainInit:q}},9420:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=(u.socketCheckUserRank,u.socketCheckUserFullRank),f=u.socketCheckAntiSpam,p=u.socketRemoveAntiSpam,m=r(3239),h=m.adminGetCashierListSocket,y=(m.adminSendCashierCryptoActionSocket,m.adminSendCashierRobuxCancelSocket),v=m.adminSendCashierCreateSocket,b=m.adminAproveWithdrawCryptoByOxapay;e.exports=function(e,t){t.on("getCashierList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["fulladmin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierCryptoAction",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierRobuxCancel",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),y(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendCashierCreate",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank fullrank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["fulladmin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},9472:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}r(4229);var i=[],s=[],c=new Date("2024-08-13T00:00:00Z");e.exports={requestGetProxy:function(e,t){return new Promise(function(){var r,a=(r=n().m((function r(a,o){var c,u,d;return n().w((function(r){for(;;)switch(r.n){case 0:if(r.p=0,c=s.findIndex((function(t){return t.userIp===e})),console.log("usedProxies: ",s.length," : ",s),console.log("used proxy exist? ",c," : ",e,t),-1===c){r.n=1;break}a(s[c].proxy),r.n=3;break;case 1:if(!(i.length>0)){r.n=2;break}c=!1===["XX","T1"].includes(t)?i.findIndex((function(e){return e.country_code.toLowerCase()===t.toLowerCase()})):-1,u={userIp:e},console.log("availableProxies: ",i.length),console.log("available proxy exist? ",c),u.proxy=-1!==c?i.splice(c,1)[0]:i.shift(),s.push(u),console.log("addedUsedProxies: ",s.length),console.log("reducedProxies: ",i.length),a(u.proxy),r.n=3;break;case 2:throw new Error("We can`t currently process your request. Please try again in a few seconds.");case 3:r.n=5;break;case 4:r.p=4,d=r.v,o(d);case 5:return r.a(2)}}),r,null,[[0,4]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())},requestRemoveProxy:function(e){try{var t=s.findIndex((function(t){return t.userIp===e}));-1!==t&&(-1===i.findIndex((function(e){return e.proxy_address===s[t].proxy.proxy_address}))&&(i.push(s[t].proxy),console.log("remove - add used proxy")),s.splice(t,1),console.log("remove used proxy: ",e))}catch(e){console.log(e)}},SERVICE_PROXY_TIME:c}},9544:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(2789),c=r(5734).rateLimiter,u=r(7908),d=u.socketCheckUserData,l=u.socketCheckUserRank,f=(u.socketCheckUserFullRank,u.socketCheckAntiSpam),p=u.socketRemoveAntiSpam,m=r(481),h=m.adminGetItemListSocket,y=m.adminSendItemCreateSocket,v=m.adminSendBoxRemoveSocket,b=m.adminSendItemNameSocket,g=m.adminSendItemTitleSocket,k=m.adminSendItemAmountSocket,w=m.adminSendItemImageSocket;e.exports=function(e,t){t.on("getItemList",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:return r.p=1,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=2,c.consume(i);case 2:if(r.p=2,u=null,void 0===t.decoded||null===t.decoded){r.n=4;break}return r.n=3,s.findById(t.decoded._id).select("username avatar rank mute ban");case 3:u=r.v;case 4:d(u,!0),l(u,["admin"]),h(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:return r.a(2)}}),r,null,[[2,5],[1,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemCreate",function(){var r=i(n().m((function r(a,o){var i,u,f,p;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=9;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.p=3,r.n=4,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 4:u=r.v,d(u,!0),l(u,["admin"]),y(e,t,u,a,o),r.n=6;break;case 5:r.p=5,f=r.v,o({success:!1,error:{type:"error",message:f.message}});case 6:r.n=8;break;case 7:r.p=7,p=r.v,o({success:!1,error:{type:"error",message:void 0!==p.message?p.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 8:r.n=10;break;case 9:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 10:return r.a(2)}}),r,null,[[3,5],[2,7]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemRemove",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),v(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemName",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),b(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemTitle",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),g(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemAmount",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),k(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()),t.on("sendItemImage",function(){var r=i(n().m((function r(a,o){var i,u,m,h;return n().w((function(r){for(;;)switch(r.n){case 0:if(void 0!==o&&"function"==typeof o){r.n=1;break}return r.a(2);case 1:if(void 0===t.decoded||null===t.decoded){r.n=10;break}return r.p=2,i=t.handshake.headers["x-forwarded-for"]||t.conn.remoteAddress,r.n=3,c.consume(i);case 3:return r.n=4,f(t.decoded._id);case 4:return r.p=4,r.n=5,s.findById(t.decoded._id).select("username avatar rank mute ban").lean();case 5:u=r.v,d(u,!0),l(u,["admin"]),w(e,t,u,a,o),r.n=7;break;case 6:r.p=6,m=r.v,p(t.decoded._id),o({success:!1,error:{type:"error",message:m.message}});case 7:r.n=9;break;case 8:r.p=8,h=r.v,o({success:!1,error:{type:"error",message:void 0!==h.message?h.message:"You need to slow down, you have send to many request. Try again in a minute."}});case 9:r.n=11;break;case 10:o({success:!1,error:{type:"error",message:"You need to sign in to perform this action."}});case 11:return r.a(2)}}),r,null,[[4,6],[2,8]])})));return function(e,t){return r.apply(this,arguments)}}())}},9580:e=>{function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a={8:{easy:[6,2.1,1.1,.93,.46,.93,1.1,2.1,6],medium:[13,3,1.3,.63,.37,.63,1.3,3,13],hard:[29,4,1.5,.23,.16,.23,1.5,4,29]},9:{easy:[7,2,1.6,.94,.65,.65,.94,1.6,2,7],medium:[18,4,1.7,.83,.46,.46,.83,1.7,4,18],hard:[44,7,2,.51,.17,.17,.51,2,7,44]},10:{easy:[9,3,1.4,1.1,.92,.47,.92,1.1,1.4,3,9],medium:[23,5,2,1.4,.53,.35,.53,1.4,2,5,23],hard:[77,10,3,.9,.22,.16,.22,.9,3,10,77]},11:{easy:[9,3,1.9,1.3,.93,.66,.66,.93,1.3,1.9,3,9],medium:[25,6,3,1.8,.63,.46,.46,.63,1.8,3,6,25],hard:[123,14,5.2,1.4,.32,.16,.16,.32,1.4,5.2,14,123]},12:{easy:[11,3,1.6,1.4,1.1,.92,.46,.92,1.1,1.4,1.6,3,11],medium:[34,11,4,2,1.1,.52,.26,.52,1.1,2,4,11,34],hard:[174,24,8.1,2,.7,.13,.13,.13,.7,2,8.1,24,174]},13:{easy:[22,4,3,1.9,1.2,.83,.65,.65,.83,1.2,1.9,3,4,22],medium:[53,13,6,3,1.3,.62,.36,.36,.62,1.3,3,6,13,53],hard:[274,37,11,4,1,.14,.14,.14,.14,1,4,11,37,274]},14:{easy:[22,4,1.9,1.4,1.3,1.1,.91,.46,.91,1.1,1.3,1.4,1.9,4,22],medium:[73,15,7,4,1.9,1,.41,.16,.41,1,1.9,4,7,15,73],hard:[429,56,18,5,1.9,.3,.13,.13,.13,.3,1.9,5,18,56,429]},15:{easy:[38,8,3,2,1.5,1.1,.93,.65,.65,.93,1.1,1.5,2,3,8,38],medium:[96,18,11,5,3,1.3,.42,.26,.26,.42,1.3,3,5,11,18,96],hard:[643,83,27,8,3,.5,.14,.14,.14,.14,.5,3,8,27,83,643]},16:{easy:[71,9,2,1.4,1.4,1.2,1.1,.91,.45,.91,1.1,1.2,1.4,1.4,2,9,71],medium:[170,41,10,5,3,1.5,1,.41,.25,.41,1,1.5,3,5,10,41,170],hard:[1030,130,26,9,4,2,.2,.12,.14,.12,.2,2,4,9,26,130,1030]}};e.exports={plinkoCheckSendCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||null===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("Your entered bet amount is invalid.");if(void 0===e.rows||null===e.rows||!0===isNaN(e.rows)||Math.floor(e.rows)<8||Math.floor(e.rows)>16)throw new Error("Your entered rows amount is invalid.");if(void 0===e.risk||null===e.risk||"string"!=typeof e.risk||!1===["easy","medium","hard"].includes(e.risk))throw new Error("Your entered risk is invalid.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.PLINKO_MIN_AMOUNT))throw new Error("You can only bet a minmum amount of $".concat(parseFloat(process.env.PLINKO_MIN_AMOUNT).toFixed(2)," per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.PLINKO_MAX_AMOUNT))throw new Error("You can only bet a maximum amount of $".concat(parseFloat(process.env.PLINKO_MAX_AMOUNT).toFixed(2)," per game."))},plinkoCheckSendCreateUser:function(e,t){if(void 0===e||void 0===t)throw new Error("Something went wrong. Please try again in a few seconds.");if(0===t.btype){var r=Math.floor(e.amount);if(t.balance<r)throw new Error("You have not enough balance for this action.")}else{var n=Math.floor(e.amount);if(t.fbalance<n)throw new Error("You have not enough balance for this action.")}},plinkoCheckSendCreateSeed:function(e){if(null==e)throw new Error("You need to generate a personal server seed first at the provably fair page.")},plinkoGenerateDeck:function(e){for(var t=[[1],[1,1]],r=2;r<e;r++){for(var n=t[r-1],a=[1],o=0;o<n.length-1;o++)a.push(n[o]+n[o+1]);a.push(1),t.push(a)}return t[t.length-1]},plinkoGetPayoutAmount:function(e,n,o,i){var s,c=n.length-1,u=0,d=0,l=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=r(e))){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw o}}}}(n.entries());try{for(l.s();!(s=l.n()).done;){var f=t(s.value,2),p=f[0];if((u+=f[1])>=i){d=Math.floor(a[c][o][p]*e);break}}}catch(e){l.e(e)}finally{l.f()}return d}}},9591:e=>{"use strict";e.exports=require("slugify")},9716:(e,t,r)=>{var n=r(7906);e.exports={adminCheckGetCashierListData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.page||!0===isNaN(e.page)||e.page<=0)throw new Error("Your entered page is invalid.");if(void 0===e.search||"string"!=typeof e.search)throw new Error("Your entered keyword is invalid.")},adminCheckSendCashierCryptoActionData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.action||"string"!=typeof e.action||!0!==["approve","cancel"].includes(e.action))throw new Error("Your provided action is invalid.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==n.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.");if("approve"===e.action&&(void 0===e.transactionHash||null===e.transactionHash||"string"!=typeof e.transactionHash))throw new Error("Your provided transaction hash is invalid.")},adminCheckSendCashierCryptoActionTransaction:function(e,t){if(null===e||"pending"!==e.state||!0===t.includes(e._id.toString()))throw new Error("Your provided transaction is not available.")},adminCheckSendCashierRobuxCancelData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.offerId||"string"!=typeof e.offerId||!0!==n.isMongoId(e.offerId))throw new Error("Your provided offer id is invalid.")},adminCheckSendCashierRobuxCancelOffer:function(e,t){if(null===e)throw new Error("Your requested offer isn't available.");if(!0===t.includes(e._id.toString()))return!0},adminCheckSendCashierCreateData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.reward||!0===isNaN(e.reward))throw new Error("Your entered reward amount is invalid.");if(void 0===e.count||!0===isNaN(e.count)||Math.floor(e.count)<=0)throw new Error("Your entered card count is invalid.")},adminCheckSendCashierCryptoActionDataByOxapay:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.action||"string"!=typeof e.action||!0!==["approve","cancel"].includes(e.action))throw new Error("Your provided action is invalid.");if(void 0===e.transactionId||"string"!=typeof e.transactionId||!0!==n.isMongoId(e.transactionId))throw new Error("Your provided transaction id is invalid.")}}},9794:(e,t,r)=>{function n(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return a(d,"_invoke",function(r,n,a){var o,i,s,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,f.n=r,c}};function p(r,n){for(i=r,s=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,i=0))}if(a||r>1)return c;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),i=d,s=m;(t=i<2?e:s)||!l;){o||(i?i<3?(i>1&&(f.n=-1),p(i,s)):f.n=s:f.v=s);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(l=f.n<0)?s:r.call(n,f))!==c)break}catch(t){o=e,i=1,s=t}finally{u=1}}return{value:t,done:l}}}(r,o,i),!0),d}var c={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(a(t={},o,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,a(p,"constructor",l),a(l,"constructor",d),d.displayName="GeneratorFunction",a(l,i,"GeneratorFunction"),a(p),a(p,i,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:s,m}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){a(e,t,(function(e){return this._invoke(t,r,e)}))};i("next",0),i("throw",1),i("return",2)}},a(e,t,r,n)}function o(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){o(i,n,a,s,c,"next",e)}function c(e){o(i,n,a,s,c,"throw",e)}s(void 0)}))}}var s=r(7252).Router(),c=r(8749),u=(r(4729),r(6037)),d=(r(573),r(8938),r(829),r(2789)),l=r(5632),f=(r(4269),r(3304)),p=(r(4276).authorizeUser,r(5734).rateLimiterStrictMiddleware,r(7587)),m=(p.captchaCheckData,p.captchaGetData,r(5165).emailSend,r(84).authGenerateJwtToken),h=r(190),y=(h.authCheckPostCredentialsData,h.authCheckPostCredentialsUser,h.authCheckPostCredentialsRegisterData,h.authCheckPostCredentialsRegisterUser,h.authCheckPostCredentialsLinkData,h.authCheckPostCredentialsLinkUser,h.authCheckPostCredentialsRequestData,h.authCheckPostCredentialsRequestUser,h.authCheckPostCredentialsRequestToken,h.authCheckPostCredentialsVerifyData,h.authCheckPostCredentialsVerifyToken,h.authCheckPostCredentialsResetData,h.authCheckPostCredentialsResetToken,h.authCheckPostCredentialsUsernameData,h.authCheckPostCredentialsUsernameUser,h.authCheckPostCredentialsRegisterUserName),v=(h.authCheckPostCredentialsProfileImage,r(5024).authGetDiscordToken);e.exports=function(){return s.get("/",function(){var e=i(n().m((function e(t,r){return n().w((function(e){for(;;)switch(e.n){case 0:try{r.redirect("https://discord.com/api/oauth2/authorize?client_id=".concat(process.env.DISCORD_CLIENT_ID,"&redirect_uri=").concat(process.env.SERVER_BACKEND_URL,"/auth/discord/callback&response_type=code&scope=identify%20guilds%20email"))}catch(e){r.status(500).json({success:!1,error:{type:"error",message:e.message}})}case 1:return e.a(2)}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),s.get("/callback",function(){var e=i(n().m((function e(t,r){var a,o,i,s,p,h,b,g,k,w,S,A,x,_,O,j,T,P;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,a=t.query.code,e.n=1,v(a);case 1:return o=e.v,e.n=2,fetch("https://discord.com/api/users/@me",{headers:{Authorization:"Bearer ".concat(o)}});case 2:return i=e.v,e.n=3,i.json();case 3:return s=e.v,p=s.email,e.n=4,d.findOne({"local.email":p}).select("local ips").lean();case 4:if(null!==(h=e.v)){e.n=7;break}return b=s.username,g=s.email,e.n=5,d.findOne({username:b}).select("local").lean();case 5:return k=e.v,y(k),w=[c.randomBytes(8).toString("hex"),c.randomBytes(8).toString("hex")],S=[c.randomBytes(24).toString("hex"),c.randomBytes(24).toString("hex")],A=[c.createHash("sha256").update(S[0]).digest("hex"),c.createHash("sha256").update(S[1]).digest("hex")],x=t.headers["x-forwarded-for"]||t.socket.remoteAddress,_=new u.Types.ObjectId,Math.floor(39*Math.random()),e.n=6,Promise.all([d.create({_id:_,username:b,local:{email:g},discord:{email:g,id:s.id,username:s.username},balance:50,ips:[{address:x}],avatar:"https://cdn.discordapp.com/avatars/".concat(s.id,"/").concat(s.avatar,".png")}),f.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.user":1}},{upsert:!0}),l.create({seedClient:w[0],seedServer:S[0],hash:A[0],nonce:1,user:_,state:"active"}),l.create({seedClient:w[1],seedServer:S[1],hash:A[1],nonce:1,user:_,state:"created"})]);case 6:(O=e.v)[0]=O[0].toObject(),delete O[0].local.password,j=m(O[0]._id),console.log("signup success"),r.send("\n                    <script>\n                    window.opener.postMessage(\n                        ".concat(JSON.stringify({success:!0,token:j,user:h}),',\n                        "').concat(process.env.SERVER_FRONTEND_URL,'" // allowed origin\n                    );\n                    window.close();\n                    <\/script>\n                ')),e.n=9;break;case 7:return T=t.headers["x-forwarded-for"]||t.socket.remoteAddress,h.ips=h.ips||[],h.ips.unshift({address:T}),e.n=8,d.findByIdAndUpdate(h._id,{ips:h.ips.slice(0,25),discord:{email:p,id:s.id,username:s.username},avatar:"https://cdn.discordapp.com/avatars/".concat(s.id,"/").concat(s.avatar,".png"),updatedAt:(new Date).getTime()}).select("local.email local.emailVerified roblox.id discord.id username avatar rank fullrank balance xp vault stats rakeback fair anonymous mute ban verifiedAt updatedAt createdAt").lean();case 8:h=e.v,P=m(h._id),r.send("\n                    <script>\n                    window.opener.postMessage(\n                        ".concat(JSON.stringify({success:!0,token:P,user:h}),',\n                        "').concat(process.env.SERVER_FRONTEND_URL,'" // allowed origin\n                    );\n                    window.close();\n                    <\/script>\n                '));case 9:e.n=11;break;case 10:e.p=10,e.v,r.send('\n              <script>\n                window.opener.postMessage(\n                  { success: false, message: "OAuth error" },\n                  "'.concat(process.env.SERVER_FRONTEND_URL,'"\n                );\n                window.close();\n              <\/script>\n            '));case 11:return e.a(2)}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}()),s}},9845:e=>{e.exports=[[{rank:"A",suit:"diamond"},{rank:"10",suit:"spade"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"10",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"diamond"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"club"}],[{rank:"A",suit:"club"},{rank:"J",suit:"club"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"J",suit:"diamond"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"spade"}],[{rank:"J",suit:"club"},{rank:"A",suit:"club"}],[{rank:"K",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"J",suit:"diamond"}],[{rank:"J",suit:"club"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"spade"}],[{rank:"10",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"club"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"spade"}],[{rank:"10",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"spade"}],[{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"J",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"club"}],[{rank:"A",suit:"heart"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"heart"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"10",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"J",suit:"diamond"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"J",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"Q",suit:"spade"}],[{rank:"K",suit:"club"},{rank:"A",suit:"club"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"J",suit:"club"}],[{rank:"A",suit:"club"},{rank:"J",suit:"club"}],[{rank:"K",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"club"},{rank:"10",suit:"club"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"club"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"diamond"},{rank:"J",suit:"club"}],[{rank:"J",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"Q",suit:"diamond"}],[{rank:"10",suit:"club"},{rank:"A",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"J",suit:"spade"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"spade"}],[{rank:"A",suit:"club"},{rank:"Q",suit:"diamond"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"heart"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"heart"}],[{rank:"J",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"club"},{rank:"10",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"club"}],[{rank:"10",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"diamond"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"J",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"club"}],[{rank:"A",suit:"club"},{rank:"10",suit:"club"}],[{rank:"Q",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"Q",suit:"spade"}],[{rank:"10",suit:"spade"},{rank:"A",suit:"spade"}],[{rank:"Q",suit:"diamond"},{rank:"A",suit:"club"}],[{rank:"A",suit:"diamond"},{rank:"10",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"diamond"},{rank:"Q",suit:"diamond"}],[{rank:"A",suit:"heart"},{rank:"J",suit:"spade"}],[{rank:"A",suit:"spade"},{rank:"10",suit:"heart"}],[{rank:"A",suit:"heart"},{rank:"K",suit:"heart"}],[{rank:"J",suit:"club"},{rank:"A",suit:"club"}],[{rank:"Q",suit:"spade"},{rank:"A",suit:"heart"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"spade"}],[{rank:"K",suit:"heart"},{rank:"A",suit:"heart"}],[{rank:"K",suit:"spade"},{rank:"A",suit:"diamond"}],[{rank:"J",suit:"heart"},{rank:"A",suit:"spade"}],[{rank:"Q",suit:"club"},{rank:"A",suit:"club"}],[{rank:"J",suit:"diamond"},{rank:"A",suit:"spade"}],[{rank:"A",suit:"diamond"},{rank:"10",suit:"club"}],[{rank:"A",suit:"spade"},{rank:"K",suit:"heart"}],[{rank:"A",suit:"club"},{rank:"10",suit:"spade"}],[{rank:"A",suit:"club"},{rank:"K",suit:"club"}],[{rank:"10",suit:"heart"},{rank:"A",suit:"heart"}]]},9856:e=>{"use strict";e.exports=require("http")},9940:(e,t,r)=>{var n=r(6037),a=new n.Schema({seedServer:{type:String},hash:{type:String},seedPublic:{type:String},chain:{type:String},state:{type:String},createdAt:{type:Date,default:Date.now}});e.exports=n.model("RollSeed",a)},9949:(e,t,r)=>{var n=r(1024),a=function(e){for(var t=e,r=e;r>1;r--)t*=r-1;return t};e.exports={minesCheckSendBetData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.amount||!0===isNaN(e.amount)||Math.floor(e.amount)<=0)throw new Error("You’ve entered an invalid bet amount.");if(void 0===e.minesCount||!0===isNaN(e.minesCount)||Math.floor(e.minesCount)<=0||Math.floor(e.minesCount)>24)throw new Error("You’ve entered an invalid mines count.");if(Math.floor(e.amount)<Math.floor(1e3*process.env.MINES_MIN_AMOUNT))throw new Error("You can only bet a min amount of ".concat(parseFloat(process.env.MINES_MIN_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."));if(Math.floor(e.amount)>Math.floor(1e3*process.env.MINES_MAX_AMOUNT))throw new Error("You can only bet a max amount of ".concat(parseFloat(process.env.MINES_MAX_AMOUNT).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")," Coin per game."))},minesCheckSendBetUser:function(e,t){if(0===t.btype){if(t.balance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")}else if(t.fbalance<Math.floor(e.amount))throw new Error("You don’t have enough balance for this action.")},minesCheckSendBetGame:function(e){if(void 0!==e)throw new Error("You need to complete your running mines game first.")},minesCheckSendBetSeed:function(e){if(null===e)throw new Error("You need to generate a server seed first.")},minesCheckSendRevealData:function(e){if(null==e)throw new Error("Something went wrong. Please try again in a few seconds.");if(void 0===e.tile||!0===isNaN(e.tile)||Math.floor(e.tile)<0||Math.floor(e.tile)>24)throw new Error("Your entered tile is invalid.")},minesCheckSendRevealGame:function(e,t){if(void 0===e)throw new Error("You have no running mines game at the moment.");if(!0===e.revealed.some((function(e){return e.tile===Math.floor(t.tile)})))throw new Error("Your entered tile is already revealed.")},minesCheckSendCashoutGame:function(e){if(void 0===e)throw new Error("You have no running mines game at the moment.");if(0===e.revealed.length)throw new Error("You need to reveal at least one tile.")},minesGetGamePayout:function(e){var t=0;return e.revealed.length>=1&&(t=(t=(25===e.revealed.length?1:a(25)/(a(e.revealed.length)*a(25-e.revealed.length)))/(25-e.minesCount===e.revealed.length?1:a(25-e.minesCount)/(a(e.revealed.length)*a(25-e.minesCount-e.revealed.length)))*.95)<1?1.01:t,t=Math.round(100*t)/100),Math.floor(e.amount*t)},minesGetGameDeck:function(e,t){for(var r=new n(t),a=[],o=0;o<25;o++)o<e?a.push("mine"):a.push("coin");return r.shuffle(a)},minesSanitizeGame:function(e){var t=JSON.parse(JSON.stringify(e));return"completed"!==t.state&&(delete t.deck,delete t.fair),t}}},9974:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,d=Object.create(s.prototype);return c(d,"_invoke",function(r,n,a){var o,s,c,u=0,d=a||[],l=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,s=0,c=e,f.n=r,i}};function p(r,n){for(s=r,c=n,t=0;!l&&u&&!a&&t<d.length;t++){var a,o=d[t],p=f.p,m=o[2];r>3?(a=m===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=r<2&&p<o[1])?(s=0,f.v=n,f.n=o[1]):p<m&&(a=r<3||o[0]>n||n>m)&&(o[4]=r,o[5]=n,f.n=m,s=0))}if(a||r>1)return i;throw l=!0,n}return function(a,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),s=d,c=m;(t=s<2?e:c)||!l;){o||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=e}else if((t=(l=f.n<0)?c:r.call(n,f))!==i)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:l}}}(r,a,o),!0),d}var i={};function u(){}function d(){}function l(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),p=l.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,c(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=l,c(p,"constructor",l),c(l,"constructor",d),d.displayName="GeneratorFunction",c(l,a,"GeneratorFunction"),c(p),c(p,a,"Generator"),c(p,n,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var o=function(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))};o("next",0),o("throw",1),o("return",2)}},c(e,t,r,n)}function u(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,s,"next",e)}function s(e){u(o,n,a,i,s,"throw",e)}i(void 0)}))}}var l=r(2789),f=r(2298),p=r(3844),m=r(3304),h=r(7908).socketRemoveAntiSpam,y=r(168).authRobloxGetToken,v=r(8521),b=v.cashierCheckGetRobuxData,g=v.cashierCheckGetRobuxDataRoblox,k=v.cashierCheckSendRobuxDepositData,w=v.cashierCheckSendRobuxDepositRoblox,S=v.cashierCheckSendRobuxDepositUser,A=v.cashierCheckSendRobuxWithdrawData,x=v.cashierCheckSendRobuxWithdrawRoblox,_=v.cashierCheckSendRobuxWithdrawUser,O=v.cashierCheckSendRobuxCancelData,j=v.cashierCheckSendRobuxCancelRoblox,T=v.cashierCheckSendRobuxCancelOffer,P=v.cashierRobuxGetBlockOffer,C=v.cashierRobuxAddBlockOffer,I=v.cashierRobuxRemoveBlockOffer,E=v.cashierRobuxSortOffers,D=v.cashierGetUserRobux,G=v.cashierRobuxGetGameId,M=v.cashierRobuxGetProducts,R=v.cashierRobuxGetProduct,B=v.cashierRobuxCreateProduct,U=v.cashierRobuxUpdateProduct,Y=v.cashierRobuxPurchaseProduct,N=function(){var e=d(s().m((function e(t,r,n,a,o){var i,c,u;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,b(a),g(n),i=8*(a.page-1),e.n=1,Promise.all([f.countDocuments({type:a.type,user:n._id}),f.find({type:a.type,user:n._id}).sort({createdAt:-1}).limit(8).skip(i).select("amount amountProcessed type user state createdAt").lean()]);case 1:c=e.v,o({success:!0,count:c[0],offers:c[1]}),e.n=3;break;case 2:e.p=2,u=e.v,o({success:!1,error:{type:"error",message:u.message}});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),F=function(){var e=d(s().m((function e(t,r,n,a,o){var i,c,u,d,l,p;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,k(a),w(n),e.n=1,f.find({type:"deposit",user:n._id,state:"created"}).select("amount amountProcessed type user state").lean();case 1:return i=e.v,c=i.reduce((function(e,t){return t.amount-t.amountProcessed+e}),0),e.n=2,D(n.proxy,n.roblox.cookie);case 2:return u=e.v,S(a,c,u),d=Math.floor(a.amount),e.n=3,f.create({amount:d,type:"deposit",user:n._id,state:"created"});case 3:l=(l=e.v).toObject(),console.log("success offer: ",l),o({success:!0,offer:l}),h(n._id),e.n=5;break;case 4:e.p=4,p=e.v,h(r.decoded._id),o({success:!1,error:void 0===p.relogin?{type:"error",message:p.message}:{type:"error",message:"Your roblox session has been expired. Please login again.",relogin:!0}});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),L=function(){var e=d(s().m((function e(t,r,n,a,o){var i,c,u,d,p;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,A(a),x(n),_(n,a),e.n=1,y(n.proxy,n.roblox.cookie);case 1:return i=e.v,e.n=2,G(n.proxy,n.roblox.cookie,n.roblox.id);case 2:return c=e.v,e.n=3,M(n.proxy,n.roblox.cookie,c);case 3:if(!0===e.v.some((function(e){return"wonderfulbeginnerbackpackapple"===e.name}))){e.n=4;break}return e.n=4,B(i,n.proxy,n.roblox.cookie,c,"wonderfulbeginnerbackpackapple",100);case 4:return u=Math.floor(a.amount),e.n=5,Promise.all([l.findByIdAndUpdate(n._id,{$inc:{balance:-u,"stats.withdraw":u},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),f.create({amount:u,type:"withdraw",user:n._id,state:"created"})]);case 5:(d=e.v)[1]=d[1].toObject(),t.of("/socket/general").to(n._id.toString()).emit("user",{user:d[0]}),o({success:!0,offer:d[1]}),h(n._id),e.n=7;break;case 6:e.p=6,p=e.v,h(r.decoded._id),o({success:!1,error:{type:"error",message:void 0===p.relogin?p.message:"Your roblox session has been expired. Please login again."}});case 7:return e.a(2)}}),e,null,[[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),$=function(){var e=d(s().m((function e(t,r,n,a,o){var i,c,u,d,p;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,O(a),j(n),e.n=1,f.findById(a.offerId).select("amount amountProcessed type user state").lean();case 1:return i=e.v,T(i,P()),e.p=2,C(i._id.toString()),c=[],c=[f.findByIdAndUpdate(i._id,{state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()],"withdraw"===i.type&&c.push(l.findByIdAndUpdate(n._id,{$inc:{balance:Math.floor(i.amount-i.amountProcessed),"stats.withdraw":-Math.floor(i.amount-i.amountProcessed)},updatedAt:(new Date).getTime()},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()),e.n=3,Promise.all(c);case 3:u=e.v,"withdraw"===i.type&&t.of("/socket/general").to(u[1]._id.toString()).emit("user",{user:u[1]}),o({success:!0,offer:u[0]}),I(i._id.toString()),h(n._id),e.n=5;break;case 4:e.p=4,d=e.v,h(r.decoded._id),I(i._id.toString()),o({success:!1,error:{type:"error",message:d.message}});case 5:e.n=7;break;case 6:e.p=6,p=e.v,h(r.decoded._id),o({success:!1,error:{type:"error",message:p.message}});case 7:return e.a(2)}}),e,null,[[2,4],[0,6]])})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),q=function(){var e=d(s().m((function e(t){var r,n,i,c,u,d,l,m,h,y,v,b,g,k,w,S,A,x,_;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,f.find({$or:[{state:"created"},{state:"pending"}]}).sort({updatedAt:1}).select("amount amountProcessed type user state createdAt").lean();case 1:if(r=e.v,n=E(r.filter((function(e){return"deposit"===e.type&&!1===P().includes(e._id.toString())}))),i=E(r.filter((function(e){return"withdraw"===e.type&&!1===P().includes(e._id.toString())})))[0],!(n.length>=1&&void 0!==i)){e.n=17;break}C(i._id.toString()),c=[],u=[],d=o(n),e.p=2,d.s();case 3:if((l=d.n()).done){e.n=5;break}if(m=l.value,C(m._id.toString()),h=m.amount-m.amountProcessed,y=i.amount-i.amountProcessed,v=h<y?h:y,console.log("tracked deposit: ",m.user._id,"-",m.amount,m.amountProcessed,h),console.log("tracked withdraw: ",i.user._id,"-",i.amount,i.amountProcessed,y),console.log("tracked transaction amount: ",v),m.amountProcessed=m.amountProcessed+v,i.amountProcessed=i.amountProcessed+v,c.push(f.findByIdAndUpdate(m._id,{amountProcessed:m.amountProcessed,state:"pending"},{new:!0}).select("amount amountProcessed state user").lean()),u.push(p.create({amount:v,deposit:{user:m.user._id,offer:m._id},withdraw:{user:i.user._id,offer:i._id},state:"created"})),!(i.amount<=i.amountProcessed)){e.n=4;break}return e.a(3,5);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,x=e.v,d.e(x);case 7:return e.p=7,d.f(),e.f(7);case 8:return c.push(f.findByIdAndUpdate(i._id,{amountProcessed:i.amountProcessed,state:"pending"},{new:!0}).select("amount amountProcessed state user").lean()),e.n=9,Promise.all([].concat(c,u));case 9:b=e.v,g=b.slice(c.length).map((function(e){return e.toObject()})),k=o(b.slice(0,c.length)),e.p=10,S=s().m((function e(){var r,n;return s().w((function(e){for(;;)switch(e.n){case 0:r=w.value,I(r._id.toString()),-1!==(n=g.findIndex((function(e){return e.deposit.offer._id.toString()===r._id.toString()})))&&(g[n].deposit.offer=r),t.of("/socket/cashier").to(r.user.toString()).emit("robuxOffer",{offer:r});case 1:return e.a(2)}}),e)})),k.s();case 11:if((w=k.n()).done){e.n=13;break}return e.d(a(S()),12);case 12:e.n=11;break;case 13:e.n=15;break;case 14:e.p=14,_=e.v,k.e(_);case 15:return e.p=15,k.f(),e.f(15);case 16:A={user:i.user,offer:i,transactions:g},console.log("created new Group: ",A),J(t,A),e.n=18;break;case 17:setTimeout((function(){q(t)}),1e4);case 18:e.n=20;break;case 19:e.p=19,e.v,setTimeout((function(){q(t)}),1e4);case 20:return e.a(2)}}),e,null,[[10,14,15,16],[2,6,7,8],[0,19]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=d(s().m((function e(t,r){var n,a;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,l.findById(r.user._id).select("roblox proxy");case 1:return r.user=e.v,e.n=2,y(r.user.proxy,r.user.roblox.cookie);case 2:return r.user.token=e.v,console.log("created group user token: ",r.user.token),console.log("group user: ",r.user),e.n=3,G(r.user.proxy,r.user.roblox.cookie,r.user.roblox.id);case 3:return r.gameId=e.v,e.n=4,M(r.user.proxy,r.user.roblox.cookie,r.gameId);case 4:if(n=e.v,r.product=n[n.findIndex((function(e){return"wonderfulbeginnerbackpackapple"===e.name}))],console.log("First Get Product: ",r.product),void 0===r.product){e.n=6;break}return e.n=5,R(r.user.proxy,r.user.roblox.cookie,r.product.id);case 5:a=e.v,e.n=7;break;case 6:a=null;case 7:r.product=a,null!==r.product?K(t,0,r):W(t,r),e.n=9;break;case 8:e.p=8,e.v,W(t,r);case 9:return e.a(2)}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),K=function(){var e=d(s().m((function e(t,r,n){var a,i,c,u,d,h,v,b,g,k,w,S;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,l.findById(n.transactions[r].deposit.user).select("roblox.cookie affiliates proxy");case 1:if(n.transactions[r].deposit.user=e.v,console.log("start robux transaction"),n.user._id.toString()===n.transactions[r].deposit.user._id.toString()){e.n=5;break}return console.log("receive user: ",n.user),console.log("deposit user: ",n.transactions[r].deposit.user),a=Math.floor(n.transactions[r].amount/1e3),console.log("group trx: ",n.transactions[r]),console.log("trx amount: ",n.transactions[r].amount,a),console.log("receive user token: ",n.user.token),console.log("update product params: ",n.gameId,n.product.id),g=console,e.n=2,U(n.user.token,n.user.proxy,n.user.roblox.cookie,n.gameId,n.product.id,"wonderfulbeginnerbackpackapple",a);case 2:return k=e.v,g.log.call(g,"update product : ",k),e.n=3,y(n.transactions[r].deposit.user.proxy,n.transactions[r].deposit.user.roblox.cookie);case 3:return i=e.v,console.log("get token",i),w=console,e.n=4,Y(i,n.transactions[r].deposit.user.proxy,n.transactions[r].deposit.user.roblox.cookie,n.product.id,a,n.user.roblox.id);case 4:S=e.v,w.log.call(w,"purchace product: ",S);case 5:return c=Math.floor(n.transactions[r].amount/1e3*process.env.COIN_RATE),u=[],u=[l.findByIdAndUpdate(n.transactions[r].deposit.user._id,{$inc:{balance:n.transactions[r].amount,"stats.deposit":n.transactions[r].amount,"limits.betToWithdraw":n.transactions[r].amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(n.transactions[r]._id,{"data.productId":n.product.targetId,state:"completed"},{new:!0}).lean(),m.findOneAndUpdate({createdAt:(new Date).toISOString().slice(0,10)},{$inc:{"stats.total.deposit":c,"stats.total.withdraw":c,"stats.robux.deposit":c,"stats.robux.withdraw":c}},{upsert:!0})],void 0!==n.transactions[r].deposit.user.affiliates.referrer&&u.push(l.findByIdAndUpdate(n.transactions[r].deposit.user.affiliates.referrer,{$inc:{"affiliates.deposit":n.transactions[r].amount},updatedAt:(new Date).getTime()},{})),n.transactions[r].deposit.offer.amount<=n.transactions[r].deposit.offer.amountProcessed&&(u.push(f.findByIdAndUpdate(n.transactions[r].deposit.offer._id,{state:"completed"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),console.log("update robux state 1")),r+1===n.transactions.length&&n.offer.amount===n.offer.amountProcessed&&(u.push(f.findByIdAndUpdate(n.offer._id,{state:"completed"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),console.log("update robux state 2")),e.n=6,Promise.all(u);case 6:d=e.v,t.of("/socket/general").to(d[0]._id.toString()).emit("user",{user:d[0]}),h=o(d.slice(void 0!==n.transactions[r].deposit.user.affiliates.referrer?4:3));try{for(h.s();!(v=h.n()).done;)b=v.value,t.of("/socket/cashier").to(b.user.toString()).emit("robuxOffer",{offer:b})}catch(e){h.e(e)}finally{h.f()}r+1<n.transactions.length?K(t,r+1,n):setTimeout((function(){q(t)}),1e3),e.n=8;break;case 7:e.p=7,e.v,console.log("robux transaction canceld"),V(t,r,n);case 8:return e.a(2)}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),W=function(){var e=d(s().m((function e(t,r){var n,a,i,c,u,d,m,h,y,v,b;return s().w((function(e){for(;;)switch(e.n){case 0:e.p=0,n=[],a=[],i=0,c=o(r.transactions);try{for(c.s();!(u=c.n()).done;)d=u.value,i+=d.amount,n.push(p.findByIdAndUpdate(d._id,{state:"canceled"},{new:!0}).select("amount state").lean()),a.push(f.findByIdAndUpdate(d.deposit.offer._id,{$inc:{amountProcessed:-d.amount}},{new:!0}).select("amount amountProcessed type user state createdAt").lean())}catch(e){c.e(e)}finally{c.f()}return a.push(f.findByIdAndUpdate(r.offer,{$inc:{amountProcessed:-i},state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()),e.n=1,Promise.all([l.findByIdAndUpdate(r.user._id,{$inc:{balance:Math.floor(r.offer.amount-r.offer.amountProcessed+i),"stats.withdraw":-Math.floor(r.offer.amount-r.offer.amountProcessed+i)}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean()].concat(n,a));case 1:m=e.v,t.of("/socket/general").to(m[0]._id.toString()).emit("user",{user:m[0]}),h=o(m.slice(n.length+1));try{for(h.s();!(y=h.n()).done;)v=y.value,t.of("/socket/cashier").to(v.user.toString()).emit("robuxOffer",{offer:v})}catch(e){h.e(e)}finally{h.f()}setTimeout((function(){q(t)}),1e3),e.n=3;break;case 2:e.p=2,b=e.v,console.error(b),setTimeout((function(){q(t)}),1e4);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r){return e.apply(this,arguments)}}(),V=function(){var e=d(s().m((function e(t,r,n){var a,o;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,Promise.all([l.findByIdAndUpdate(n.user._id,{$inc:{balance:n.transactions[r].amount,"stats.withdraw":-n.transactions[r].amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(n.transactions[r]._id,{state:"canceled"},{new:!0}).select("amount state").lean(),f.findByIdAndUpdate(n.transactions[r].deposit.offer._id,{$inc:{amountProcessed:-n.transactions[r].amount},state:"canceled"},{new:!0}).select("amount amountProcessed type user state createdAt").lean()]);case 1:a=e.v,t.of("/socket/general").to(a[0]._id.toString()).emit("user",{user:a[0]}),t.of("/socket/cashier").to(a[2].user.toString()).emit("robuxOffer",{offer:a[2]}),r+1<n.transactions.length?K(t,r+1,n):setTimeout((function(){q(t)}),1e3),e.n=3;break;case 2:e.p=2,o=e.v,console.error(o),setTimeout((function(){q(t)}),1e4);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(t,r,n){return e.apply(this,arguments)}}(),H=function(){var e=d(s().m((function e(t){var r,n,a,i,c,u;return s().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,p.find({state:"created"}).select("amount deposit withdraw state").lean();case 1:r=e.v,n=o(r),e.p=2,n.s();case 3:if((a=n.n()).done){e.n=5;break}return i=a.value,e.n=4,Promise.all([l.findByIdAndUpdate(i.withdraw.user._id,{$inc:{balance:i.amount,"stats.withdraw":-i.amount}},{new:!0}).select("balance xp stats rakeback mute ban verifiedAt updatedAt").lean(),p.findByIdAndUpdate(i._id,{state:"canceled"},{new:!0}).select("amount state").lean()]);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,c=e.v,n.e(c);case 7:return e.p=7,n.f(),e.f(7);case 8:q(t),e.n=10;break;case 9:e.p=9,u=e.v,console.error(u);case 10:return e.a(2)}}),e,null,[[2,6,7,8],[0,9]])})));return function(t){return e.apply(this,arguments)}}();e.exports={cashierGetRobuxDataSocket:N,cashierSendRobuxDepositSocket:F,cashierSendRobuxWithdrawSocket:L,cashierSendRobuxCancelSocket:$,cashierRobuxInit:H}}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e](o,o.exports,a),o.exports}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,a.d(o,i),o},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s=a(2003),c=a(7252),u=a(9856),d=(a(2057),a(8900)),l=a(8577),f=a(4437);a(4383),a(818).config();var p=c();p.use(l());var m,h=u.createServer(p),y=f(h,{transports:["websocket"],cors:{origin:process.env.SERVER_FRONTEND_URL,credentials:!0},maxHttpBufferSize:1e7});a(6701)(),a(8461).settingInitDatabase(),p.set("trust proxy",1),p.use(c.json()),p.use(c.urlencoded({extended:!0})),p.use(d()),p.use(l({origin:[].concat((m=process.env.SERVER_FRONTEND_URL.split(","),function(e){if(Array.isArray(e))return o(e)}(m)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(m)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["http://77.221.151.45"]),credentials:!0})),p.set("view engine","ejs"),p.set("views",s.join(__dirname,"/views")),p.use("/api",a(2622)(y)),p.use("/api/public",c.static(s.join(__dirname,"public"))),a(4906)(y);var v=process.env.SERVER_PORT||5001;h.listen(v,"0.0.0.0",(function(){return console.log("Server running in ".concat("production"," mode on port ").concat(v))}))})();